import{c as pr,a as it,j as i,A as mr,T as gr,B as P,b as A,I as ae,S as Rt,d as at,e as xr,F as Pt,f as At,P as yr,M as br,g as te,L as jr,h as Sr,C as z,i as E,G as O,k as H,l as se,m as _,n as wr,o as vr,p as Cr,q as oe,r as He,s as Tt,t as We,u as Er,D as Ot,v as kt,w as It,x as Rr,y as Pr,z as Ar,E as ce,H as G,J as Tr,K as Or,N as kr,O as Ir,Q as Fr,R as Nr,U as Dr,V as Lr,W as Br,X as _r,Y as Ft,Z as Ur,_ as zr}from"./mui-vendor-cb54c386.js";import{c as Mr,r as b,a as ke,L as F,u as $e,d as qr,H as Hr,e as Wr,f as K,N as le}from"./react-vendor-079e3fe2.js";import{g as J,o as $r,c as Gr,s as Kr,G as Jr,a as Vr,b as Xr,u as Qr,i as Nt,d as Dt,q as Ie,e as ue,w as de,f as Fe,h as Zr,j as Lt,k as $,l as re,m as Bt,n as _t,p as Yr}from"./firebase-vendor-b7fa58b6.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Ne={},ct=Mr;Ne.createRoot=ct.createRoot,Ne.hydrateRoot=ct.hydrateRoot;const en={light:{default:"linear-gradient(135deg, #f5f7fa 0%, #e4e7eb 100%)",pokeball:{position:"relative","&::before":{content:'""',position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"800px",height:"800px",background:"radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%)",backgroundImage:"url('/pokeball-bg.png')",backgroundSize:"contain",backgroundRepeat:"no-repeat",opacity:.1,zIndex:0,pointerEvents:"none"}}},dark:{default:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",pokeball:{position:"relative","&::before":{content:'""',position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"800px",height:"800px",background:"radial-gradient(circle, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 70%)",backgroundImage:"url('/pokeball-bg.png')",backgroundSize:"contain",backgroundRepeat:"no-repeat",opacity:.1,zIndex:0,pointerEvents:"none"}}}},tn=pr({palette:{primary:{main:"#2a75bb",light:"#5a9cdb",dark:"#004c8c",contrastText:"#fff"},secondary:{main:"#ffcb05",light:"#fffd54",dark:"#c79b00",contrastText:"#000"},background:{default:en.light.default,paper:"#ffffff"},text:{primary:"#2d3748",secondary:"#4a5568"}},typography:{fontFamily:"'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif",h1:{fontWeight:700,fontSize:"2.5rem",lineHeight:1.2,letterSpacing:"-0.01562em",background:"linear-gradient(45deg, #2a75bb, #ffcb05)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},h2:{fontWeight:600,fontSize:"2rem",lineHeight:1.3},h3:{fontWeight:600,fontSize:"1.75rem",lineHeight:1.3},h4:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.3},h5:{fontWeight:600,fontSize:"1.25rem",lineHeight:1.3},h6:{fontWeight:600,fontSize:"1.125rem",lineHeight:1.3},subtitle1:{fontSize:"1.125rem",lineHeight:1.5,letterSpacing:"0.00938em"},subtitle2:{fontSize:"0.875rem",lineHeight:1.5,letterSpacing:"0.00714em"},body1:{fontSize:"1rem",lineHeight:1.5,letterSpacing:"0.00938em"},body2:{fontSize:"0.875rem",lineHeight:1.5,letterSpacing:"0.01071em"},button:{textTransform:"none",fontWeight:600}},components:{MuiCard:{styleOverrides:{root:{backdropFilter:"blur(10px)",backgroundColor:it("#ffffff",.9),boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 48px rgba(0, 0, 0, 0.15)"}}}},MuiButton:{styleOverrides:{root:{borderRadius:"2rem",textTransform:"none",fontWeight:600,padding:"8px 24px",background:"linear-gradient(45deg, #2a75bb, #3a85cb)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(42, 117, 187, 0.4)"}}}},MuiAppBar:{styleOverrides:{root:{backdropFilter:"blur(10px)",backgroundColor:it("#ffffff",.9),boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)"}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:"1rem",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 20px rgba(42, 117, 187, 0.15)"},"&.Mui-focused":{boxShadow:"0 4px 20px rgba(42, 117, 187, 0.25)"}}}}}},shape:{borderRadius:12}});function B(){const[e,t]=b.useState(null),[r,n]=b.useState(!0),[s,o]=b.useState(null);b.useEffect(()=>{const p=J();return $r(p,m=>{t(m),n(!1),o(null)})},[]);const a=p=>{switch(p.code||""){case"auth/email-already-in-use":return"Cette adresse email est déjà utilisée.";case"auth/invalid-email":return"Adresse email invalide.";case"auth/operation-not-allowed":return"Opération non autorisée.";case"auth/weak-password":return"Le mot de passe est trop faible.";case"auth/user-disabled":return"Ce compte a été désactivé.";case"auth/user-not-found":return"Aucun compte ne correspond à cette adresse email.";case"auth/wrong-password":return"Mot de passe incorrect.";default:return"Une erreur est survenue. Veuillez réessayer."}};return{user:e,loading:r,error:s,signUp:async(p,y)=>{const m=J();o(null);try{return(await Gr(m,p,y)).user}catch(g){const x=a(g);throw o(x),new Error(x)}},signIn:async(p,y)=>{const m=J();o(null);try{return(await Kr(m,p,y)).user}catch(g){const x=a(g);throw o(x),new Error(x)}},signInWithGoogle:async()=>{const p=J();o(null);try{const y=new Jr;return(await Vr(p,y)).user}catch(y){const m=a(y);throw o(m),new Error(m)}},signOut:async()=>{const p=J();o(null);try{await Xr(p)}catch(y){const m=a(y);throw o(m),new Error(m)}},updateProfile:async(p,y)=>{if(e)try{await Qr(e,{displayName:p||e.displayName,photoURL:y||e.photoURL}),t({...e})}catch(m){const g=a(m);throw o(g),new Error(g)}}}}const lt=e=>{let t;const r=new Set,n=(l,d)=>{const f=typeof l=="function"?l(t):l;if(!Object.is(f,t)){const p=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(y=>y(t,p))}},s=()=>t,c={setState:n,getState:s,getInitialState:()=>h,subscribe:l=>(r.add(l),()=>r.delete(l))},h=t=e(n,s,c);return c},rn=e=>e?lt(e):lt,nn=e=>e;function sn(e,t=nn){const r=ke.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return ke.useDebugValue(r),r}const ut=e=>{const t=rn(e),r=n=>sn(t,n);return Object.assign(r,t),r},Ge=e=>e?ut(e):ut;function on(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var o;const a=h=>h===null?null:JSON.parse(h,t==null?void 0:t.reviver),c=(o=r.getItem(s))!=null?o:null;return c instanceof Promise?c.then(a):a(c)},setItem:(s,o)=>r.setItem(s,JSON.stringify(o,t==null?void 0:t.replacer)),removeItem:s=>r.removeItem(s)}}const De=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return De(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return De(n)(r)}}}},an=(e,t)=>(r,n,s)=>{let o={storage:on(()=>localStorage),partialize:g=>g,version:0,merge:(g,x)=>({...x,...g}),...t},a=!1;const c=new Set,h=new Set;let l=o.storage;if(!l)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...g)},n,s);const d=()=>{const g=o.partialize({...n()});return l.setItem(o.name,{state:g,version:o.version})},f=s.setState;s.setState=(g,x)=>{f(g,x),d()};const p=e((...g)=>{r(...g),d()},n,s);s.getInitialState=()=>p;let y;const m=()=>{var g,x;if(!l)return;a=!1,c.forEach(v=>{var R;return v((R=n())!=null?R:p)});const C=((x=o.onRehydrateStorage)==null?void 0:x.call(o,(g=n())!=null?g:p))||void 0;return De(l.getItem.bind(l))(o.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return[!0,o.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var R;const[S,j]=v;if(y=o.merge(j,(R=n())!=null?R:p),r(y,!0),S)return d()}).then(()=>{C==null||C(y,void 0),y=n(),a=!0,h.forEach(v=>v(y))}).catch(v=>{C==null||C(void 0,v)})};return s.persist={setOptions:g=>{o={...o,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:g=>(c.add(g),()=>{c.delete(g)}),onFinishHydration:g=>(h.add(g),()=>{h.delete(g)})},o.skipHydration||m(),y||p},Ut=an,cn=Ge()(Ut((e,t)=>({items:[],addItem:r=>{const n=t().items,s=n.find(o=>o.card.id===r.id);e(s?{items:n.map(o=>o.card.id===r.id?{...o,quantity:o.quantity+1}:o)}:{items:[...n,{card:r,quantity:1}]})},removeItem:r=>{e({items:t().items.filter(n=>n.card.id!==r)})},updateQuantity:(r,n)=>{e({items:t().items.map(s=>s.card.id===r?{...s,quantity:n}:s)})},clearCart:()=>e({items:[]}),total:()=>t().items.reduce((r,n)=>r+n.card.cardmarket.prices.averageSellPrice*n.quantity,0)}),{name:"cart-storage"})),zt=Ge()(Ut((e,t)=>({favorites:[],addFavorite:r=>e(n=>({favorites:[...n.favorites,r]})),removeFavorite:r=>e(n=>({favorites:n.favorites.filter(s=>s.id!==r)})),isFavorite:r=>t().favorites.some(n=>n.id===r),toggleFavorite:r=>{t().isFavorite(r.id)?t().removeFavorite(r.id):t().addFavorite(r)}}),{name:"favorites-storage"}));const ln=()=>{const{user:e,signOut:t}=B(),{items:r}=cn(),{favorites:n}=zt(),[s,o]=b.useState(null),a=l=>{o(l.currentTarget)},c=()=>{o(null)},h=async()=>{try{await t(),c()}catch(l){console.error("Erreur lors de la déconnexion:",l)}};return i.jsx(mr,{position:"static",sx:{background:"linear-gradient(45deg, #2a75bb 30%, #3c5aa6 90%)",boxShadow:"0 8px 16px rgba(0,0,0,0.3)"},children:i.jsxs(gr,{sx:{display:"flex",justifyContent:"space-between"},children:[i.jsxs(P,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsx(F,{to:"/",className:"title-3d",style:{textDecoration:"none",color:"white"},children:"Pokemon TCG"}),i.jsx(A,{color:"inherit",component:F,to:"/marketplace",sx:{display:{xs:"none",sm:"block"}},children:"Marketplace"}),e&&i.jsx(A,{color:"inherit",component:F,to:"/collection",sx:{display:{xs:"none",sm:"block"}},children:"Ma Collection"})]}),i.jsxs(P,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(ae,{color:"inherit",component:F,to:"/search",children:i.jsx(Rt,{})}),e&&i.jsxs(i.Fragment,{children:[i.jsx(ae,{color:"inherit",component:F,to:"/cart",children:i.jsx(at,{badgeContent:r.length,color:"error",children:i.jsx(xr,{})})}),i.jsx(ae,{color:"inherit",component:F,to:"/favorites",children:i.jsx(at,{badgeContent:n.length,color:"error",children:i.jsx(Pt,{})})}),i.jsx(ae,{onClick:a,color:"inherit",children:e.photoURL?i.jsx(At,{src:e.photoURL,sx:{width:32,height:32}}):i.jsx(yr,{})}),i.jsxs(br,{anchorEl:s,open:!!s,onClose:c,children:[i.jsx(te,{component:F,to:"/profile",onClick:c,children:"Profil"}),i.jsx(te,{onClick:h,children:"Se déconnecter"})]})]}),!e&&i.jsxs(P,{sx:{display:"flex",gap:1},children:[i.jsx(A,{color:"inherit",component:F,to:"/login",startIcon:i.jsx(jr,{}),children:"Connexion"}),i.jsx(A,{color:"inherit",component:F,to:"/signup",startIcon:i.jsx(Sr,{}),children:"Inscription"})]})]})]})})},un=()=>{const{user:e}=B();return i.jsxs(z,{maxWidth:"lg",children:[i.jsxs(P,{sx:{py:8},children:[i.jsx(E,{variant:"h2",component:"h1",gutterBottom:!0,align:"center",children:"Pokemon TCG Marketplace"}),i.jsx(E,{variant:"h5",component:"h2",align:"center",color:"text.secondary",paragraph:!0,children:"Achetez, vendez et échangez vos cartes Pokémon en toute sécurité"}),i.jsx(P,{sx:{mt:4,display:"flex",justifyContent:"center",gap:2},children:e?i.jsx(A,{variant:"contained",size:"large",component:F,to:"/marketplace",children:"Explorer le Marketplace"}):i.jsx(A,{variant:"contained",size:"large",component:F,to:"/login",children:"Commencer"})})]}),i.jsxs(O,{container:!0,spacing:4,sx:{mt:4},children:[i.jsx(O,{item:!0,xs:12,md:4,children:i.jsxs(H,{sx:{p:3,height:"100%"},children:[i.jsx(E,{variant:"h5",component:"h3",gutterBottom:!0,children:"Marketplace"}),i.jsx(E,{variant:"body1",paragraph:!0,children:"Trouvez les cartes que vous recherchez parmi notre vaste sélection. Prix du marché en temps réel et paiement sécurisé."}),i.jsx(A,{component:F,to:"/marketplace",variant:"outlined",children:"Voir le Marketplace"})]})}),i.jsx(O,{item:!0,xs:12,md:4,children:i.jsxs(H,{sx:{p:3,height:"100%"},children:[i.jsx(E,{variant:"h5",component:"h3",gutterBottom:!0,children:"Collection"}),i.jsx(E,{variant:"body1",paragraph:!0,children:"Gérez votre collection de cartes. Marquez les cartes à vendre, à échanger ou à garder. Suivez la valeur de votre collection."}),i.jsx(A,{component:F,to:"/collection",variant:"outlined",children:"Gérer ma Collection"})]})}),i.jsx(O,{item:!0,xs:12,md:4,children:i.jsxs(H,{sx:{p:3,height:"100%"},children:[i.jsx(E,{variant:"h5",component:"h3",gutterBottom:!0,children:"Blog"}),i.jsx(E,{variant:"body1",paragraph:!0,children:"Rejoignez notre communauté active. Partagez vos expériences, discutez des dernières sorties et trouvez des conseils."}),i.jsx(A,{component:F,to:"/blog",variant:"outlined",children:"Voir le Blog"})]})})]})]})};function Mt(e,t){return function(){return e.apply(t,arguments)}}const{toString:dn}=Object.prototype,{getPrototypeOf:Ke}=Object,je=(e=>t=>{const r=dn.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),M=e=>(e=e.toLowerCase(),t=>je(t)===e),Se=e=>t=>typeof t===e,{isArray:Q}=Array,ne=Se("undefined");function fn(e){return e!==null&&!ne(e)&&e.constructor!==null&&!ne(e.constructor)&&L(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const qt=M("ArrayBuffer");function hn(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&qt(e.buffer),t}const pn=Se("string"),L=Se("function"),Ht=Se("number"),we=e=>e!==null&&typeof e=="object",mn=e=>e===!0||e===!1,fe=e=>{if(je(e)!=="object")return!1;const t=Ke(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gn=M("Date"),xn=M("File"),yn=M("Blob"),bn=M("FileList"),jn=e=>we(e)&&L(e.pipe),Sn=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||L(e.append)&&((t=je(e))==="formdata"||t==="object"&&L(e.toString)&&e.toString()==="[object FormData]"))},wn=M("URLSearchParams"),[vn,Cn,En,Rn]=["ReadableStream","Request","Response","Headers"].map(M),Pn=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ie(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Q(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let c;for(n=0;n<a;n++)c=o[n],t.call(null,e[c],c,e)}}function Wt(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const V=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),$t=e=>!ne(e)&&e!==V;function Le(){const{caseless:e}=$t(this)&&this||{},t={},r=(n,s)=>{const o=e&&Wt(t,s)||s;fe(t[o])&&fe(n)?t[o]=Le(t[o],n):fe(n)?t[o]=Le({},n):Q(n)?t[o]=n.slice():t[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&ie(arguments[n],r);return t}const An=(e,t,r,{allOwnKeys:n}={})=>(ie(t,(s,o)=>{r&&L(s)?e[o]=Mt(s,r):e[o]=s},{allOwnKeys:n}),e),Tn=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),On=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},kn=(e,t,r,n)=>{let s,o,a;const c={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],(!n||n(a,e,t))&&!c[a]&&(t[a]=e[a],c[a]=!0);e=r!==!1&&Ke(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},In=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Fn=e=>{if(!e)return null;if(Q(e))return e;let t=e.length;if(!Ht(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Nn=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ke(Uint8Array)),Dn=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},Ln=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Bn=M("HTMLFormElement"),_n=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),dt=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Un=M("RegExp"),Gt=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};ie(r,(s,o)=>{let a;(a=t(s,o,e))!==!1&&(n[o]=a||s)}),Object.defineProperties(e,n)},zn=e=>{Gt(e,(t,r)=>{if(L(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(L(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Mn=(e,t)=>{const r={},n=s=>{s.forEach(o=>{r[o]=!0})};return Q(e)?n(e):n(String(e).split(t)),r},qn=()=>{},Hn=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Pe="abcdefghijklmnopqrstuvwxyz",ft="0123456789",Kt={DIGIT:ft,ALPHA:Pe,ALPHA_DIGIT:Pe+Pe.toUpperCase()+ft},Wn=(e=16,t=Kt.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function $n(e){return!!(e&&L(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Gn=e=>{const t=new Array(10),r=(n,s)=>{if(we(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const o=Q(n)?[]:{};return ie(n,(a,c)=>{const h=r(a,s+1);!ne(h)&&(o[c]=h)}),t[s]=void 0,o}}return n};return r(e,0)},Kn=M("AsyncFunction"),Jn=e=>e&&(we(e)||L(e))&&L(e.then)&&L(e.catch),Jt=((e,t)=>e?setImmediate:t?((r,n)=>(V.addEventListener("message",({source:s,data:o})=>{s===V&&o===r&&n.length&&n.shift()()},!1),s=>{n.push(s),V.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",L(V.postMessage)),Vn=typeof queueMicrotask<"u"?queueMicrotask.bind(V):typeof process<"u"&&process.nextTick||Jt,u={isArray:Q,isArrayBuffer:qt,isBuffer:fn,isFormData:Sn,isArrayBufferView:hn,isString:pn,isNumber:Ht,isBoolean:mn,isObject:we,isPlainObject:fe,isReadableStream:vn,isRequest:Cn,isResponse:En,isHeaders:Rn,isUndefined:ne,isDate:gn,isFile:xn,isBlob:yn,isRegExp:Un,isFunction:L,isStream:jn,isURLSearchParams:wn,isTypedArray:Nn,isFileList:bn,forEach:ie,merge:Le,extend:An,trim:Pn,stripBOM:Tn,inherits:On,toFlatObject:kn,kindOf:je,kindOfTest:M,endsWith:In,toArray:Fn,forEachEntry:Dn,matchAll:Ln,isHTMLForm:Bn,hasOwnProperty:dt,hasOwnProp:dt,reduceDescriptors:Gt,freezeMethods:zn,toObjectSet:Mn,toCamelCase:_n,noop:qn,toFiniteNumber:Hn,findKey:Wt,global:V,isContextDefined:$t,ALPHABET:Kt,generateString:Wn,isSpecCompliantForm:$n,toJSONObject:Gn,isAsyncFn:Kn,isThenable:Jn,setImmediate:Jt,asap:Vn};function w(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}u.inherits(w,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:u.toJSONObject(this.config),code:this.code,status:this.status}}});const Vt=w.prototype,Xt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Xt[e]={value:e}});Object.defineProperties(w,Xt);Object.defineProperty(Vt,"isAxiosError",{value:!0});w.from=(e,t,r,n,s,o)=>{const a=Object.create(Vt);return u.toFlatObject(e,a,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),w.call(a,e.message,t,r,n,s),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const Xn=null;function Be(e){return u.isPlainObject(e)||u.isArray(e)}function Qt(e){return u.endsWith(e,"[]")?e.slice(0,-2):e}function ht(e,t,r){return e?e.concat(t).map(function(s,o){return s=Qt(s),!r&&o?"["+s+"]":s}).join(r?".":""):t}function Qn(e){return u.isArray(e)&&!e.some(Be)}const Zn=u.toFlatObject(u,{},null,function(t){return/^is[A-Z]/.test(t)});function ve(e,t,r){if(!u.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=u.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,x){return!u.isUndefined(x[g])});const n=r.metaTokens,s=r.visitor||d,o=r.dots,a=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&u.isSpecCompliantForm(t);if(!u.isFunction(s))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(u.isDate(m))return m.toISOString();if(!h&&u.isBlob(m))throw new w("Blob is not supported. Use a Buffer instead.");return u.isArrayBuffer(m)||u.isTypedArray(m)?h&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,x){let C=m;if(m&&!x&&typeof m=="object"){if(u.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(u.isArray(m)&&Qn(m)||(u.isFileList(m)||u.endsWith(g,"[]"))&&(C=u.toArray(m)))return g=Qt(g),C.forEach(function(R,S){!(u.isUndefined(R)||R===null)&&t.append(a===!0?ht([g],S,o):a===null?g:g+"[]",l(R))}),!1}return Be(m)?!0:(t.append(ht(x,g,o),l(m)),!1)}const f=[],p=Object.assign(Zn,{defaultVisitor:d,convertValue:l,isVisitable:Be});function y(m,g){if(!u.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(m),u.forEach(m,function(C,v){(!(u.isUndefined(C)||C===null)&&s.call(t,C,u.isString(v)?v.trim():v,g,p))===!0&&y(C,g?g.concat(v):[v])}),f.pop()}}if(!u.isObject(e))throw new TypeError("data must be an object");return y(e),t}function pt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Je(e,t){this._pairs=[],e&&ve(e,this,t)}const Zt=Je.prototype;Zt.append=function(t,r){this._pairs.push([t,r])};Zt.toString=function(t){const r=t?function(n){return t.call(this,n,pt)}:pt;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Yn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Yt(e,t,r){if(!t)return e;const n=r&&r.encode||Yn;u.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let o;if(s?o=s(t,r):o=u.isURLSearchParams(t)?t.toString():new Je(t,r).toString(n),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class es{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){u.forEach(this.handlers,function(n){n!==null&&t(n)})}}const mt=es,er={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ts=typeof URLSearchParams<"u"?URLSearchParams:Je,rs=typeof FormData<"u"?FormData:null,ns=typeof Blob<"u"?Blob:null,ss={isBrowser:!0,classes:{URLSearchParams:ts,FormData:rs,Blob:ns},protocols:["http","https","file","blob","url","data"]},Ve=typeof window<"u"&&typeof document<"u",_e=typeof navigator=="object"&&navigator||void 0,os=Ve&&(!_e||["ReactNative","NativeScript","NS"].indexOf(_e.product)<0),is=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),as=Ve&&window.location.href||"http://localhost",cs=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ve,hasStandardBrowserEnv:os,hasStandardBrowserWebWorkerEnv:is,navigator:_e,origin:as},Symbol.toStringTag,{value:"Module"})),N={...cs,...ss};function ls(e,t){return ve(e,new N.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,o){return N.isNode&&u.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function us(e){return u.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ds(e){const t={},r=Object.keys(e);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],t[o]=e[o];return t}function tr(e){function t(r,n,s,o){let a=r[o++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),h=o>=r.length;return a=!a&&u.isArray(s)?s.length:a,h?(u.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!c):((!s[a]||!u.isObject(s[a]))&&(s[a]=[]),t(r,n,s[a],o)&&u.isArray(s[a])&&(s[a]=ds(s[a])),!c)}if(u.isFormData(e)&&u.isFunction(e.entries)){const r={};return u.forEachEntry(e,(n,s)=>{t(us(n),s,r,0)}),r}return null}function fs(e,t,r){if(u.isString(e))try{return(t||JSON.parse)(e),u.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Xe={transitional:er,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=u.isObject(t);if(o&&u.isHTMLForm(t)&&(t=new FormData(t)),u.isFormData(t))return s?JSON.stringify(tr(t)):t;if(u.isArrayBuffer(t)||u.isBuffer(t)||u.isStream(t)||u.isFile(t)||u.isBlob(t)||u.isReadableStream(t))return t;if(u.isArrayBufferView(t))return t.buffer;if(u.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return ls(t,this.formSerializer).toString();if((c=u.isFileList(t))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return ve(c?{"files[]":t}:t,h&&new h,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),fs(t)):t}],transformResponse:[function(t){const r=this.transitional||Xe.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(u.isResponse(t)||u.isReadableStream(t))return t;if(t&&u.isString(t)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(c){if(a)throw c.name==="SyntaxError"?w.from(c,w.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:N.classes.FormData,Blob:N.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};u.forEach(["delete","get","head","post","put","patch"],e=>{Xe.headers[e]={}});const Qe=Xe,hs=u.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ps=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||t[r]&&hs[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},gt=Symbol("internals");function ee(e){return e&&String(e).trim().toLowerCase()}function he(e){return e===!1||e==null?e:u.isArray(e)?e.map(he):String(e)}function ms(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const gs=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ae(e,t,r,n,s){if(u.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!u.isString(t)){if(u.isString(n))return t.indexOf(n)!==-1;if(u.isRegExp(n))return n.test(t)}}function xs(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function ys(e,t){const r=u.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,o,a){return this[n].call(this,t,s,o,a)},configurable:!0})})}class Ce{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function o(c,h,l){const d=ee(h);if(!d)throw new Error("header name must be a non-empty string");const f=u.findKey(s,d);(!f||s[f]===void 0||l===!0||l===void 0&&s[f]!==!1)&&(s[f||h]=he(c))}const a=(c,h)=>u.forEach(c,(l,d)=>o(l,d,h));if(u.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(u.isString(t)&&(t=t.trim())&&!gs(t))a(ps(t),r);else if(u.isHeaders(t))for(const[c,h]of t.entries())o(h,c,n);else t!=null&&o(r,t,n);return this}get(t,r){if(t=ee(t),t){const n=u.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return ms(s);if(u.isFunction(r))return r.call(this,s,n);if(u.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=ee(t),t){const n=u.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Ae(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function o(a){if(a=ee(a),a){const c=u.findKey(n,a);c&&(!r||Ae(n,n[c],c,r))&&(delete n[c],s=!0)}}return u.isArray(t)?t.forEach(o):o(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const o=r[n];(!t||Ae(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const r=this,n={};return u.forEach(this,(s,o)=>{const a=u.findKey(n,o);if(a){r[a]=he(s),delete r[o];return}const c=t?xs(o):String(o).trim();c!==o&&delete r[o],r[c]=he(s),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return u.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&u.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[gt]=this[gt]={accessors:{}}).accessors,s=this.prototype;function o(a){const c=ee(a);n[c]||(ys(s,a),n[c]=!0)}return u.isArray(t)?t.forEach(o):o(t),this}}Ce.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);u.reduceDescriptors(Ce.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});u.freezeMethods(Ce);const U=Ce;function Te(e,t){const r=this||Qe,n=t||r,s=U.from(n.headers);let o=n.data;return u.forEach(e,function(c){o=c.call(r,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function rr(e){return!!(e&&e.__CANCEL__)}function Z(e,t,r){w.call(this,e??"canceled",w.ERR_CANCELED,t,r),this.name="CanceledError"}u.inherits(Z,w,{__CANCEL__:!0});function nr(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new w("Request failed with status code "+r.status,[w.ERR_BAD_REQUEST,w.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function bs(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function js(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,o=0,a;return t=t!==void 0?t:1e3,function(h){const l=Date.now(),d=n[o];a||(a=l),r[s]=h,n[s]=l;let f=o,p=0;for(;f!==s;)p+=r[f++],f=f%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-a<t)return;const y=d&&l-d;return y?Math.round(p*1e3/y):void 0}}function Ss(e,t){let r=0,n=1e3/t,s,o;const a=(l,d=Date.now())=>{r=d,s=null,o&&(clearTimeout(o),o=null),e.apply(null,l)};return[(...l)=>{const d=Date.now(),f=d-r;f>=n?a(l,d):(s=l,o||(o=setTimeout(()=>{o=null,a(s)},n-f)))},()=>s&&a(s)]}const xe=(e,t,r=3)=>{let n=0;const s=js(50,250);return Ss(o=>{const a=o.loaded,c=o.lengthComputable?o.total:void 0,h=a-n,l=s(h),d=a<=c;n=a;const f={loaded:a,total:c,progress:c?a/c:void 0,bytes:h,rate:l||void 0,estimated:l&&c&&d?(c-a)/l:void 0,event:o,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(f)},r)},xt=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},yt=e=>(...t)=>u.asap(()=>e(...t)),ws=N.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,N.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(N.origin),N.navigator&&/(msie|trident)/i.test(N.navigator.userAgent)):()=>!0,vs=N.hasStandardBrowserEnv?{write(e,t,r,n,s,o){const a=[e+"="+encodeURIComponent(t)];u.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),u.isString(n)&&a.push("path="+n),u.isString(s)&&a.push("domain="+s),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Cs(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Es(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function sr(e,t){return e&&!Cs(t)?Es(e,t):t}const bt=e=>e instanceof U?{...e}:e;function X(e,t){t=t||{};const r={};function n(l,d,f,p){return u.isPlainObject(l)&&u.isPlainObject(d)?u.merge.call({caseless:p},l,d):u.isPlainObject(d)?u.merge({},d):u.isArray(d)?d.slice():d}function s(l,d,f,p){if(u.isUndefined(d)){if(!u.isUndefined(l))return n(void 0,l,f,p)}else return n(l,d,f,p)}function o(l,d){if(!u.isUndefined(d))return n(void 0,d)}function a(l,d){if(u.isUndefined(d)){if(!u.isUndefined(l))return n(void 0,l)}else return n(void 0,d)}function c(l,d,f){if(f in t)return n(l,d);if(f in e)return n(void 0,l)}const h={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(l,d,f)=>s(bt(l),bt(d),f,!0)};return u.forEach(Object.keys(Object.assign({},e,t)),function(d){const f=h[d]||s,p=f(e[d],t[d],d);u.isUndefined(p)&&f!==c||(r[d]=p)}),r}const or=e=>{const t=X({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:c}=t;t.headers=a=U.from(a),t.url=Yt(sr(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let h;if(u.isFormData(r)){if(N.hasStandardBrowserEnv||N.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((h=a.getContentType())!==!1){const[l,...d]=h?h.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([l||"multipart/form-data",...d].join("; "))}}if(N.hasStandardBrowserEnv&&(n&&u.isFunction(n)&&(n=n(t)),n||n!==!1&&ws(t.url))){const l=s&&o&&vs.read(o);l&&a.set(s,l)}return t},Rs=typeof XMLHttpRequest<"u",Ps=Rs&&function(e){return new Promise(function(r,n){const s=or(e);let o=s.data;const a=U.from(s.headers).normalize();let{responseType:c,onUploadProgress:h,onDownloadProgress:l}=s,d,f,p,y,m;function g(){y&&y(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function C(){if(!x)return;const R=U.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),j={data:!c||c==="text"||c==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:R,config:e,request:x};nr(function(I){r(I),g()},function(I){n(I),g()},j),x=null}"onloadend"in x?x.onloadend=C:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(C)},x.onabort=function(){x&&(n(new w("Request aborted",w.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new w("Network Error",w.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const j=s.transitional||er;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),n(new w(S,j.clarifyTimeoutError?w.ETIMEDOUT:w.ECONNABORTED,e,x)),x=null},o===void 0&&a.setContentType(null),"setRequestHeader"in x&&u.forEach(a.toJSON(),function(S,j){x.setRequestHeader(j,S)}),u.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),c&&c!=="json"&&(x.responseType=s.responseType),l&&([p,m]=xe(l,!0),x.addEventListener("progress",p)),h&&x.upload&&([f,y]=xe(h),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(d=R=>{x&&(n(!R||R.type?new Z(null,e,x):R),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const v=bs(s.url);if(v&&N.protocols.indexOf(v)===-1){n(new w("Unsupported protocol "+v+":",w.ERR_BAD_REQUEST,e));return}x.send(o||null)})},As=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const o=function(l){if(!s){s=!0,c();const d=l instanceof Error?l:this.reason;n.abort(d instanceof w?d:new Z(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,o(new w(`timeout ${t} of ms exceeded`,w.ETIMEDOUT))},t);const c=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o)}),e=null)};e.forEach(l=>l.addEventListener("abort",o));const{signal:h}=n;return h.unsubscribe=()=>u.asap(c),h}},Ts=As,Os=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},ks=async function*(e,t){for await(const r of Is(e))yield*Os(r,t)},Is=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},jt=(e,t,r,n)=>{const s=ks(e,t);let o=0,a,c=h=>{a||(a=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:l,value:d}=await s.next();if(l){c(),h.close();return}let f=d.byteLength;if(r){let p=o+=f;r(p)}h.enqueue(new Uint8Array(d))}catch(l){throw c(l),l}},cancel(h){return c(h),s.return()}},{highWaterMark:2})},Ee=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ir=Ee&&typeof ReadableStream=="function",Fs=Ee&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ar=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Ns=ir&&ar(()=>{let e=!1;const t=new Request(N.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),St=64*1024,Ue=ir&&ar(()=>u.isReadableStream(new Response("").body)),ye={stream:Ue&&(e=>e.body)};Ee&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ye[t]&&(ye[t]=u.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new w(`Response type '${t}' is not supported`,w.ERR_NOT_SUPPORT,n)})})})(new Response);const Ds=async e=>{if(e==null)return 0;if(u.isBlob(e))return e.size;if(u.isSpecCompliantForm(e))return(await new Request(N.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(u.isArrayBufferView(e)||u.isArrayBuffer(e))return e.byteLength;if(u.isURLSearchParams(e)&&(e=e+""),u.isString(e))return(await Fs(e)).byteLength},Ls=async(e,t)=>{const r=u.toFiniteNumber(e.getContentLength());return r??Ds(t)},Bs=Ee&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:o,timeout:a,onDownloadProgress:c,onUploadProgress:h,responseType:l,headers:d,withCredentials:f="same-origin",fetchOptions:p}=or(e);l=l?(l+"").toLowerCase():"text";let y=Ts([s,o&&o.toAbortSignal()],a),m;const g=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let x;try{if(h&&Ns&&r!=="get"&&r!=="head"&&(x=await Ls(d,n))!==0){let j=new Request(t,{method:"POST",body:n,duplex:"half"}),k;if(u.isFormData(n)&&(k=j.headers.get("content-type"))&&d.setContentType(k),j.body){const[I,W]=xt(x,xe(yt(h)));n=jt(j.body,St,I,W)}}u.isString(f)||(f=f?"include":"omit");const C="credentials"in Request.prototype;m=new Request(t,{...p,signal:y,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:C?f:void 0});let v=await fetch(m);const R=Ue&&(l==="stream"||l==="response");if(Ue&&(c||R&&g)){const j={};["status","statusText","headers"].forEach(Y=>{j[Y]=v[Y]});const k=u.toFiniteNumber(v.headers.get("content-length")),[I,W]=c&&xt(k,xe(yt(c),!0))||[];v=new Response(jt(v.body,St,I,()=>{W&&W(),g&&g()}),j)}l=l||"text";let S=await ye[u.findKey(ye,l)||"text"](v,e);return!R&&g&&g(),await new Promise((j,k)=>{nr(j,k,{data:S,headers:U.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:m})})}catch(C){throw g&&g(),C&&C.name==="TypeError"&&/fetch/i.test(C.message)?Object.assign(new w("Network Error",w.ERR_NETWORK,e,m),{cause:C.cause||C}):w.from(C,C&&C.code,e,m)}}),ze={http:Xn,xhr:Ps,fetch:Bs};u.forEach(ze,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const wt=e=>`- ${e}`,_s=e=>u.isFunction(e)||e===null||e===!1,cr={getAdapter:e=>{e=u.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let o=0;o<t;o++){r=e[o];let a;if(n=r,!_s(r)&&(n=ze[(a=String(r)).toLowerCase()],n===void 0))throw new w(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+o]=n}if(!n){const o=Object.entries(s).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(wt).join(`
`):" "+wt(o[0]):"as no adapter specified";throw new w("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:ze};function Oe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Z(null,e)}function vt(e){return Oe(e),e.headers=U.from(e.headers),e.data=Te.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),cr.getAdapter(e.adapter||Qe.adapter)(e).then(function(n){return Oe(e),n.data=Te.call(e,e.transformResponse,n),n.headers=U.from(n.headers),n},function(n){return rr(n)||(Oe(e),n&&n.response&&(n.response.data=Te.call(e,e.transformResponse,n.response),n.response.headers=U.from(n.response.headers))),Promise.reject(n)})}const lr="1.7.8",Re={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Re[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ct={};Re.transitional=function(t,r,n){function s(o,a){return"[Axios v"+lr+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,c)=>{if(t===!1)throw new w(s(a," has been removed"+(r?" in "+r:"")),w.ERR_DEPRECATED);return r&&!Ct[a]&&(Ct[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,c):!0}};Re.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Us(e,t,r){if(typeof e!="object")throw new w("options must be an object",w.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],a=t[o];if(a){const c=e[o],h=c===void 0||a(c,o,e);if(h!==!0)throw new w("option "+o+" must be "+h,w.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new w("Unknown option "+o,w.ERR_BAD_OPTION)}}const pe={assertOptions:Us,validators:Re},q=pe.validators;class be{constructor(t){this.defaults=t,this.interceptors={request:new mt,response:new mt}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=X(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&pe.assertOptions(n,{silentJSONParsing:q.transitional(q.boolean),forcedJSONParsing:q.transitional(q.boolean),clarifyTimeoutError:q.transitional(q.boolean)},!1),s!=null&&(u.isFunction(s)?r.paramsSerializer={serialize:s}:pe.assertOptions(s,{encode:q.function,serialize:q.function},!0)),pe.assertOptions(r,{baseUrl:q.spelling("baseURL"),withXsrfToken:q.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=o&&u.merge(o.common,o[r.method]);o&&u.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),r.headers=U.concat(a,o);const c=[];let h=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(h=h&&g.synchronous,c.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let d,f=0,p;if(!h){const m=[vt.bind(this),void 0];for(m.unshift.apply(m,c),m.push.apply(m,l),p=m.length,d=Promise.resolve(r);f<p;)d=d.then(m[f++],m[f++]);return d}p=c.length;let y=r;for(f=0;f<p;){const m=c[f++],g=c[f++];try{y=m(y)}catch(x){g.call(this,x);break}}try{d=vt.call(this,y)}catch(m){return Promise.reject(m)}for(f=0,p=l.length;f<p;)d=d.then(l[f++],l[f++]);return d}getUri(t){t=X(this.defaults,t);const r=sr(t.baseURL,t.url);return Yt(r,t.params,t.paramsSerializer)}}u.forEach(["delete","get","head","options"],function(t){be.prototype[t]=function(r,n){return this.request(X(n||{},{method:t,url:r,data:(n||{}).data}))}});u.forEach(["post","put","patch"],function(t){function r(n){return function(o,a,c){return this.request(X(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}be.prototype[t]=r(),be.prototype[t+"Form"]=r(!0)});const me=be;class Ze{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const a=new Promise(c=>{n.subscribe(c),o=c}).then(s);return a.cancel=function(){n.unsubscribe(o)},a},t(function(o,a,c){n.reason||(n.reason=new Z(o,a,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Ze(function(s){t=s}),cancel:t}}}const zs=Ze;function Ms(e){return function(r){return e.apply(null,r)}}function qs(e){return u.isObject(e)&&e.isAxiosError===!0}const Me={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Me).forEach(([e,t])=>{Me[t]=e});const Hs=Me;function ur(e){const t=new me(e),r=Mt(me.prototype.request,t);return u.extend(r,me.prototype,t,{allOwnKeys:!0}),u.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return ur(X(e,s))},r}const T=ur(Qe);T.Axios=me;T.CanceledError=Z;T.CancelToken=zs;T.isCancel=rr;T.VERSION=lr;T.toFormData=ve;T.AxiosError=w;T.Cancel=T.CanceledError;T.all=function(t){return Promise.all(t)};T.spread=Ms;T.isAxiosError=qs;T.mergeConfig=X;T.AxiosHeaders=U;T.formToJSON=e=>tr(u.isHTMLForm(e)?new FormData(e):e);T.getAdapter=cr.getAdapter;T.HttpStatusCode=Hs;T.default=T;const qe=T,Et="https://api.pokemontcg.io/v2";class Ws{constructor(){this.apiKey="b2b2c3b9-cab6-4908-acc8-c0b296524fef",this.apiKey?console.log("Pokemon TCG API Key is configured"):console.error("Pokemon TCG API Key is missing!")}getHeaders(){return{"X-Api-Key":this.apiKey}}async searchCards(t="*",r=1,n=20){var s,o,a;try{console.log("Searching cards with query:",t);const c=await qe.get(`${Et}/cards`,{headers:this.getHeaders(),params:{q:t==="*"?"supertype:Pokémon":`supertype:Pokémon name:*${t}*`,page:r,pageSize:n,orderBy:"name"}});return console.log("API Response:",{count:c.data.count,totalCount:c.data.totalCount,pageSize:c.data.pageSize,page:c.data.page}),{data:c.data.data,totalCount:c.data.totalCount||0}}catch(c){throw console.error("Error fetching cards:",((s=c.response)==null?void 0:s.data)||c.message),new Error(((a=(o=c.response)==null?void 0:o.data)==null?void 0:a.error)||c.message||"Erreur lors de la recherche des cartes")}}async getCardById(t){var r,n,s;try{return(await qe.get(`${Et}/cards/${t}`,{headers:this.getHeaders()})).data.data}catch(o){throw console.error("Error fetching card:",((r=o.response)==null?void 0:r.data)||o.message),new Error(((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.error)||o.message||"Erreur lors de la récupération de la carte")}}}const dr=new Ws;const $s=()=>{const[e,t]=b.useState([]),[r,n]=b.useState(""),[s,o]=b.useState(1),[a,c]=b.useState(1),[h,l]=b.useState(!0),[d,f]=b.useState(null),[p,y]=b.useState("asc");B();const m=$e();b.useEffect(()=>{g()},[s]);const g=async()=>{try{l(!0),f(null);const{data:j,totalCount:k}=await dr.searchCards(r||"*",s),I=x(j,p);t(I),c(Math.ceil(k/20))}catch(j){console.error("Erreur lors de la recherche des cartes:",j),f("Impossible de charger les cartes. Veuillez réessayer plus tard."),t([])}finally{l(!1)}},x=(j,k)=>[...j].sort((I,W)=>{var rt,nt,st,ot;const Y=((nt=(rt=I.cardmarket)==null?void 0:rt.prices)==null?void 0:nt.averageSellPrice)||0,tt=((ot=(st=W.cardmarket)==null?void 0:st.prices)==null?void 0:ot.averageSellPrice)||0;return k==="asc"?Y-tt:tt-Y}),C=()=>{const j=p==="asc"?"desc":"asc";y(j),t(x(e,j))},v=j=>{j.preventDefault(),o(1),g()},R=j=>{m(`/card/${j.id}`)},S=j=>j?`${j.toFixed(2)} €`:"N/A";return d?i.jsx(z,{children:i.jsx(se,{severity:"error",sx:{mt:2},children:d})}):i.jsxs(z,{maxWidth:"xl",children:[i.jsxs("div",{className:"marketplace-header",children:[i.jsx(E,{variant:"h1",component:"h1",children:"Marketplace"}),i.jsx(E,{variant:"subtitle1",children:"Découvrez notre collection de cartes Pokémon et trouvez les meilleures offres"})]}),i.jsx(H,{className:"search-bar",elevation:0,children:i.jsx("form",{onSubmit:v,children:i.jsxs(O,{container:!0,spacing:2,alignItems:"center",children:[i.jsx(O,{item:!0,xs:12,sm:6,md:8,children:i.jsx(_,{fullWidth:!0,placeholder:"Rechercher une carte...",value:r,onChange:j=>n(j.target.value),variant:"outlined",InputProps:{startAdornment:i.jsx(wr,{position:"start",children:i.jsx(Rt,{color:"action"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"2rem",backgroundColor:"white"}}})}),i.jsx(O,{item:!0,xs:12,sm:3,md:2,children:i.jsx(A,{fullWidth:!0,type:"submit",variant:"contained",size:"large",sx:{borderRadius:"2rem",height:"56px",background:"linear-gradient(45deg, var(--primary-color), var(--secondary-color))"},children:"Rechercher"})}),i.jsx(O,{item:!0,xs:12,sm:3,md:2,children:i.jsx(vr,{title:p==="asc"?"Prix croissant":"Prix décroissant",children:i.jsx(A,{fullWidth:!0,variant:"outlined",onClick:C,startIcon:i.jsx(Cr,{}),size:"large",className:"sort-button",sx:{borderRadius:"2rem",height:"56px"},children:p==="asc"?"Prix ↑":"Prix ↓"})})})]})})}),h?i.jsx(P,{display:"flex",justifyContent:"center",my:4,children:i.jsx(oe,{size:60,thickness:4})}):i.jsxs(P,{className:"card-grid",mt:4,children:[i.jsx(O,{container:!0,spacing:3,children:e.map((j,k)=>{var I,W;return i.jsx(O,{item:!0,xs:12,sm:6,md:4,lg:3,className:"card-animation",sx:{animationDelay:`${k*.1}s`},children:i.jsxs(He,{className:"pokemon-card",onClick:()=>R(j),children:[i.jsx(Tt,{component:"img",image:j.images.small,alt:j.name,sx:{objectFit:"contain",pt:2,transform:"scale(1.1)",transition:"transform 0.3s ease"}}),i.jsxs(We,{children:[i.jsx(E,{gutterBottom:!0,variant:"h6",component:"h2",noWrap:!0,sx:{fontWeight:600,color:"var(--text-primary)"},children:j.name}),i.jsxs(E,{variant:"body2",sx:{color:"var(--text-secondary)",mb:1},children:["Set: ",j.set.name]}),i.jsx(E,{variant:"h6",className:"card-price",children:S((W=(I=j.cardmarket)==null?void 0:I.prices)==null?void 0:W.averageSellPrice)})]})]})},j.id)})}),e.length>0&&i.jsx(P,{className:"pagination",sx:{display:"flex",justifyContent:"center"},children:i.jsx(Er,{count:a,page:s,onChange:(j,k)=>o(k),color:"primary",size:"large",sx:{"& .MuiPaginationItem-root":{fontSize:"1.1rem",fontWeight:500}}})})]})]})},Gs=Ge(e=>({notifications:[],addNotification:t=>{const r=Math.random().toString(36).substring(7);e(n=>({notifications:[...n.notifications,{...t,id:r}]})),setTimeout(()=>{e(n=>({notifications:n.notifications.filter(s=>s.id!==r)}))},5e3)},removeNotification:t=>e(r=>({notifications:r.notifications.filter(n=>n.id!==t)}))})),Ks=()=>{const{user:e,updateProfile:t}=B(),{addNotification:r}=Gs(),[n,s]=b.useState(!1),[o,a]=b.useState({displayName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",photoURL:(e==null?void 0:e.photoURL)||""}),c=l=>{const{name:d,value:f}=l.target;a(p=>({...p,[d]:f}))},h=async l=>{l.preventDefault(),s(!0);try{await t({displayName:o.displayName,photoURL:o.photoURL}),r({message:"Profil mis à jour avec succès",type:"success"})}catch{r({message:"Erreur lors de la mise à jour du profil",type:"error"})}finally{s(!1)}};return e?i.jsx(z,{maxWidth:"md",children:i.jsxs(P,{sx:{py:4},children:[i.jsx(E,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Mon Profil"}),i.jsx(H,{sx:{p:4,mt:4},children:i.jsxs(P,{component:"form",onSubmit:h,sx:{display:"flex",flexDirection:"column",gap:3},children:[i.jsx(P,{sx:{display:"flex",justifyContent:"center",mb:3},children:i.jsx(At,{src:o.photoURL,alt:o.displayName,sx:{width:100,height:100}})}),i.jsxs(O,{container:!0,spacing:3,children:[i.jsx(O,{item:!0,xs:12,children:i.jsx(_,{fullWidth:!0,label:"Nom d'affichage",name:"displayName",value:o.displayName,onChange:c})}),i.jsx(O,{item:!0,xs:12,children:i.jsx(_,{fullWidth:!0,label:"Email",name:"email",value:o.email,disabled:!0})}),i.jsx(O,{item:!0,xs:12,children:i.jsx(_,{fullWidth:!0,label:"URL de la photo",name:"photoURL",value:o.photoURL,onChange:c})})]}),i.jsx(A,{type:"submit",variant:"contained",color:"primary",disabled:n,sx:{mt:2},children:n?i.jsx(oe,{size:24}):"Mettre à jour"})]})})]})}):i.jsx(z,{children:i.jsx(E,{variant:"h5",align:"center",sx:{py:8},children:"Veuillez vous connecter pour accéder à votre profil"})})},Js=()=>{const[e,t]=b.useState(""),[r,n]=b.useState(""),[s,o]=b.useState(null),{signIn:a,signInWithGoogle:c,error:h}=B(),l=$e(),d=async p=>{if(p.preventDefault(),o(null),!e||!r){o("Veuillez remplir tous les champs.");return}try{await a(e,r),l("/marketplace")}catch(y){console.error("Erreur de connexion:",y)}},f=async()=>{try{await c(),l("/marketplace")}catch(p){console.error("Erreur de connexion avec Google:",p)}};return i.jsx(z,{maxWidth:"sm",children:i.jsxs(H,{elevation:3,sx:{p:4,mt:8,display:"flex",flexDirection:"column",gap:2},children:[i.jsx(E,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Connexion"}),(s||h)&&i.jsx(se,{severity:"error",sx:{mb:2},children:s||h}),i.jsxs("form",{onSubmit:d,style:{display:"flex",flexDirection:"column",gap:16},children:[i.jsx(_,{fullWidth:!0,label:"Email",type:"email",value:e,onChange:p=>t(p.target.value),required:!0,autoComplete:"email"}),i.jsx(_,{fullWidth:!0,label:"Mot de passe",type:"password",value:r,onChange:p=>n(p.target.value),required:!0,autoComplete:"current-password"}),i.jsx(A,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,children:"Se connecter"})]}),i.jsx(P,{sx:{my:2},children:i.jsx(Ot,{children:"ou"})}),i.jsx(A,{variant:"outlined",onClick:f,startIcon:i.jsx(kt,{}),fullWidth:!0,size:"large",children:"Continuer avec Google"}),i.jsx(P,{sx:{mt:2,textAlign:"center"},children:i.jsxs(E,{variant:"body2",color:"text.secondary",children:["Pas encore de compte ?"," ",i.jsx(It,{component:F,to:"/signup",color:"primary",children:"S'inscrire"})]})})]})})},Vs=()=>{const[e,t]=b.useState(""),[r,n]=b.useState(""),[s,o]=b.useState(""),[a,c]=b.useState(null),{signUp:h,signInWithGoogle:l}=B(),d=$e(),f=async y=>{if(y.preventDefault(),c(null),r!==s){c("Les mots de passe ne correspondent pas.");return}if(r.length<6){c("Le mot de passe doit contenir au moins 6 caractères.");return}try{await h(e,r),d("/profile")}catch(m){console.error("Erreur d'inscription:",m),m.message.includes("email-already-in-use")?c("Cette adresse email est déjà utilisée."):m.message.includes("invalid-email")?c("Adresse email invalide."):c("Erreur lors de l'inscription. Veuillez réessayer.")}},p=async()=>{try{await l(),d("/profile")}catch(y){console.error("Erreur de connexion Google:",y),c("Erreur lors de la connexion avec Google.")}};return i.jsx(z,{maxWidth:"sm",children:i.jsxs(H,{elevation:3,sx:{p:4,mt:4},children:[i.jsx(E,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Inscription"}),a&&i.jsx(se,{severity:"error",sx:{mb:2},children:a}),i.jsxs("form",{onSubmit:f,children:[i.jsx(_,{label:"Email",type:"email",fullWidth:!0,margin:"normal",value:e,onChange:y=>t(y.target.value),required:!0}),i.jsx(_,{label:"Mot de passe",type:"password",fullWidth:!0,margin:"normal",value:r,onChange:y=>n(y.target.value),required:!0}),i.jsx(_,{label:"Confirmer le mot de passe",type:"password",fullWidth:!0,margin:"normal",value:s,onChange:y=>o(y.target.value),required:!0}),i.jsx(A,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",sx:{mt:2},children:"S'inscrire"})]}),i.jsx(Ot,{sx:{my:3},children:"ou"}),i.jsx(A,{variant:"outlined",fullWidth:!0,startIcon:i.jsx(kt,{}),onClick:p,sx:{mb:2},children:"Continuer avec Google"}),i.jsx(P,{sx:{mt:2,textAlign:"center"},children:i.jsxs(E,{variant:"body2",children:["Déjà inscrit ?"," ",i.jsx(It,{component:F,to:"/login",children:"Connectez-vous"})]})})]})})};class fr{static async getCardPrice(t,r){try{const n=`pokemon ${r} ${t}`.toLowerCase(),s=await qe.get(`${this.BASE_URL}`,{params:{t:n,format:"json"}});return s.data&&s.data.loose_price?{name:s.data.name,loose_price:s.data.loose_price,graded_price:s.data.graded_price,last_updated:s.data.last_updated}:null}catch(n){return console.error("Error fetching price from PriceCharting:",n),null}}static async comparePrice(t,r,n){const s=await this.getCardPrice(r,n);if(!s)return{tcgPrice:t,priceChartingPrice:null,difference:null,recommendation:"Prix PriceCharting non disponible"};const o=s.loose_price,a=t-o,c=a/o*100;let h="";return Math.abs(c)<=10?h="Prix compétitif (±10% du marché)":c>10?h="Prix au-dessus du marché":h="Prix en dessous du marché",{tcgPrice:t,priceChartingPrice:o,difference:a,recommendation:h}}}fr.BASE_URL="https://www.pricecharting.com/api/product";const Xs=({card:e})=>{var a,c;const[t,r]=b.useState(null),[n,s]=b.useState(!0);b.useEffect(()=>{(async()=>{var l,d;if((d=(l=e.cardmarket)==null?void 0:l.prices)!=null&&d.averageSellPrice){const f=await fr.comparePrice(e.cardmarket.prices.averageSellPrice,e.name,e.set.name);r(f)}s(!1)})()},[e]);const o=h=>h==null?"N/A":`${h.toFixed(2)} €`;return i.jsx(He,{elevation:3,children:i.jsxs(We,{children:[i.jsx(E,{variant:"h5",gutterBottom:!0,children:"Comparaison des prix"}),n?i.jsx(P,{display:"flex",justifyContent:"center",my:2,children:i.jsx(oe,{})}):i.jsxs(i.Fragment,{children:[i.jsx(Rr,{component:H,variant:"outlined",children:i.jsxs(Pr,{children:[i.jsx(Ar,{children:i.jsxs(ce,{children:[i.jsx(G,{children:"Source"}),i.jsx(G,{align:"right",children:"Prix"})]})}),i.jsxs(Tr,{children:[i.jsxs(ce,{children:[i.jsx(G,{children:"Pokemon TCG"}),i.jsx(G,{align:"right",children:o((c=(a=e.cardmarket)==null?void 0:a.prices)==null?void 0:c.averageSellPrice)})]}),i.jsxs(ce,{children:[i.jsx(G,{children:"PriceCharting"}),i.jsx(G,{align:"right",children:o(t==null?void 0:t.priceChartingPrice)})]}),(t==null?void 0:t.difference)&&i.jsxs(ce,{children:[i.jsx(G,{children:"Différence"}),i.jsx(G,{align:"right",children:o(t.difference)})]})]})]})}),t&&i.jsx(P,{mt:2,children:i.jsx(Or,{label:t.recommendation,color:t.recommendation.includes("compétitif")?"success":t.recommendation.includes("dessous")?"warning":"error",variant:"outlined"})}),i.jsxs(E,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"},children:["Les prix sont mis à jour régulièrement. Dernière mise à jour : ",new Date().toLocaleDateString()]})]})]})})},ge={apiKey:"AIzaSyDrqUfwjpKjyEwpuZGTCxbvfhKWdHAHAHX",authDomain:"pokemon-tcg-marketplace.firebaseapp.com",projectId:"pokemon-tcg-marketplace",storageBucket:"pokemon-tcg-marketplace.appspot.com",messagingSenderId:"433238130897",appId:"1:433238130897:web:0b3faf40c5d0b71d2985f0"};console.log("Firebase Config:",{apiKey:ge.apiKey?"Present":"Missing",authDomain:ge.authDomain?"Present":"Missing",projectId:ge.projectId?"Present":"Missing"});const hr=Nt(ge),Qs=J(hr),D=Dt(hr);Qs.useDeviceLanguage();const Zs=()=>{const{user:e}=B(),[t,r]=b.useState([]),[n,s]=b.useState(!0);return b.useEffect(()=>{if(!e){r([]),s(!1);return}(async()=>{try{const l=Ie(ue(D,"collections"),de("userId","==",e.uid)),f=(await Fe(l)).docs.map(p=>p.data().cardId);r(f)}catch(l){console.error("Error fetching collection:",l)}finally{s(!1)}})()},[e]),{userCollection:t,loading:n,addToCollection:async h=>{if(e)try{await Zr(ue(D,"collections"),{userId:e.uid,cardId:h,addedAt:new Date().toISOString()}),r(l=>[...l,h])}catch(l){throw console.error("Error adding to collection:",l),l}},removeFromCollection:async h=>{if(e)try{const l=Ie(ue(D,"collections"),de("userId","==",e.uid),de("cardId","==",h)),f=(await Fe(l)).docs[0];f&&(await Lt($(D,"collections",f.id)),r(p=>p.filter(y=>y!==h)))}catch(l){throw console.error("Error removing from collection:",l),l}},isInCollection:h=>t.includes(h)}},Ys=()=>{const{id:e}=qr(),[t,r]=b.useState(null),[n,s]=b.useState(!0),{user:o}=B(),{addToCollection:a}=Zs(),{addToFavorites:c,favorites:h}=zt(),[l,d]=b.useState(null);b.useEffect(()=>{(async()=>{if(e)try{s(!0);const g=await dr.getCard(e);r(g),d(null)}catch(g){console.error("Error fetching card:",g),d("Erreur lors du chargement de la carte")}finally{s(!1)}})()},[e]);const f=async()=>{if(!(!t||!o))try{await a(t)}catch(m){console.error("Error adding to collection:",m),d("Erreur lors de l'ajout à la collection")}},p=async()=>{if(!(!t||!o))try{await c(t)}catch(m){console.error("Error adding to favorites:",m),d("Erreur lors de l'ajout aux favoris")}};if(n)return i.jsx(P,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:i.jsx(oe,{})});if(l||!t)return i.jsx(z,{children:i.jsx(E,{color:"error",align:"center",children:l||"Carte non trouvée"})});const y=h.some(m=>m.id===t.id);return i.jsx(z,{maxWidth:"lg",sx:{mt:4,mb:4},children:i.jsxs(O,{container:!0,spacing:4,children:[i.jsx(O,{item:!0,xs:12,md:6,children:i.jsx(H,{elevation:3,sx:{p:2,textAlign:"center"},children:i.jsx("img",{src:t.images.large,alt:t.name,style:{maxWidth:"100%",height:"auto"}})})}),i.jsx(O,{item:!0,xs:12,md:6,children:i.jsxs(H,{elevation:3,sx:{p:3},children:[i.jsx(E,{variant:"h4",gutterBottom:!0,children:t.name}),i.jsxs(E,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:["Set: ",t.set.name," (",t.set.series,")"]}),t.rarity&&i.jsxs(E,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Rareté: ",t.rarity]}),i.jsx(P,{sx:{mt:3,mb:4},children:i.jsx(Xs,{card:t})}),o&&i.jsxs(P,{sx:{mt:3,display:"flex",gap:2},children:[i.jsx(A,{variant:"contained",startIcon:i.jsx(kr,{}),onClick:f,fullWidth:!0,children:"Ajouter à ma collection"}),i.jsx(A,{variant:"outlined",startIcon:i.jsx(Pt,{}),onClick:p,color:y?"secondary":"primary",fullWidth:!0,children:y?"Retirer des favoris":"Ajouter aux favoris"})]})]})})]})})},eo=()=>{const[e,t]=b.useState([]),[r,n]=b.useState(null),[s,o]=b.useState(""),[a,c]=b.useState(!0),[h,l]=b.useState(null),[d,f]=b.useState(null),[p,y]=b.useState("keep"),[m,g]=b.useState("1"),{user:x}=B();b.useEffect(()=>{x?C():(t([]),c(!1))},[x]);const C=async()=>{if(x)try{c(!0),l(null);const S=Ie(ue(D,"collection"),de("userId","==",x.uid)),k=(await Fe(S)).docs.map(I=>({...I.data(),docId:I.id}));t(k)}catch(S){console.error("Erreur lors du chargement de la collection:",S),l("Impossible de charger votre collection. Veuillez réessayer plus tard.")}finally{c(!1)}},v=async()=>{if(!(!r||!x))try{const S=$(D,"collection",r.docId);await re(S,{status:p,price:p==="sell"?parseFloat(s):null,quantity:parseInt(m)}),f("Carte mise à jour avec succès !"),C(),n(null)}catch(S){console.error("Erreur lors de la mise à jour de la carte:",S),l("Impossible de mettre à jour la carte. Veuillez réessayer.")}},R=async S=>{if(x)try{await Lt($(D,"collection",S)),f("Carte supprimée avec succès !"),C()}catch(j){console.error("Erreur lors de la suppression de la carte:",j),l("Impossible de supprimer la carte. Veuillez réessayer.")}};return x?i.jsxs(z,{maxWidth:"lg",children:[i.jsxs(P,{sx:{py:4},children:[i.jsx(E,{variant:"h4",component:"h1",gutterBottom:!0,children:"Ma Collection"}),h&&i.jsx(se,{severity:"error",sx:{mb:2},children:h}),a?i.jsx(P,{sx:{display:"flex",justifyContent:"center",py:4},children:i.jsx(oe,{})}):e.length===0?i.jsx(E,{variant:"body1",sx:{textAlign:"center",py:4},children:"Votre collection est vide. Ajoutez des cartes depuis le Marketplace !"}):i.jsx(O,{container:!0,spacing:3,children:e.map(S=>i.jsx(O,{item:!0,xs:12,sm:6,md:4,lg:3,children:i.jsxs(He,{children:[i.jsx(Tt,{component:"img",image:S.images.small,alt:S.name,sx:{objectFit:"contain",cursor:"pointer"},onClick:()=>n(S)}),i.jsxs(We,{children:[i.jsx(E,{variant:"h6",gutterBottom:!0,children:S.name}),i.jsxs(E,{variant:"body2",color:"text.secondary",children:["Status: ",S.status]}),i.jsxs(E,{variant:"body2",color:"text.secondary",children:["Quantité: ",S.quantity]}),S.status==="sell"&&S.price&&i.jsxs(E,{variant:"body2",color:"text.secondary",children:["Prix: ",S.price,"€"]}),i.jsxs(P,{sx:{mt:2},children:[i.jsx(A,{size:"small",variant:"outlined",onClick:()=>n(S),children:"Modifier"}),i.jsx(A,{size:"small",color:"error",onClick:()=>R(S.docId),sx:{ml:1},children:"Supprimer"})]})]})]})},S.docId))})]}),i.jsxs(Ir,{open:!!r,onClose:()=>n(null),children:[i.jsx(Fr,{children:"Modifier la carte"}),i.jsx(Nr,{children:i.jsxs(P,{sx:{pt:2},children:[i.jsxs(Dr,{fullWidth:!0,sx:{mb:2},children:[i.jsx(Lr,{children:"Status"}),i.jsxs(Br,{value:p,label:"Status",onChange:S=>y(S.target.value),children:[i.jsx(te,{value:"keep",children:"Garder"}),i.jsx(te,{value:"sell",children:"Vendre"}),i.jsx(te,{value:"trade",children:"Échanger"})]})]}),p==="sell"&&i.jsx(_,{label:"Prix (€)",type:"number",fullWidth:!0,value:s,onChange:S=>o(S.target.value),sx:{mb:2}}),i.jsx(_,{label:"Quantité",type:"number",fullWidth:!0,value:m,onChange:S=>g(S.target.value),inputProps:{min:1}})]})}),i.jsxs(_r,{children:[i.jsx(A,{onClick:()=>n(null),children:"Annuler"}),i.jsx(A,{onClick:v,variant:"contained",children:"Sauvegarder"})]})]}),i.jsx(Ft,{open:!!d,autoHideDuration:3e3,onClose:()=>f(null),message:d})]}):i.jsx(z,{maxWidth:"lg",children:i.jsx(P,{sx:{py:4,textAlign:"center"},children:i.jsx(E,{variant:"h5",gutterBottom:!0,children:"Connectez-vous pour voir votre collection"})})})},to=b.createContext(void 0),ro=({children:e})=>{const[t,r]=b.useState([]),[n,s]=b.useState(!0),{user:o}=B();b.useEffect(()=>{(async()=>{if(!o){r([]),s(!1);return}try{const f=$(D,"users",o.uid),p=await Bt(f);if(p.exists()){const y=p.data();r(y.collection||[])}else await _t(f,{collection:[]}),r([])}catch(f){console.error("Error loading collection:",f)}finally{s(!1)}})()},[o]);const l={collection:t,addToCollection:async d=>{if(o)try{const f=$(D,"users",o.uid),p=[...t,d];await re(f,{collection:p}),r(p)}catch(f){throw console.error("Error adding card to collection:",f),f}},removeFromCollection:async d=>{if(o)try{const f=$(D,"users",o.uid),p=t.filter(y=>y.id!==d);await re(f,{collection:p}),r(p)}catch(f){throw console.error("Error removing card from collection:",f),f}},isInCollection:d=>t.some(f=>f.id===d),loading:n};return i.jsx(to.Provider,{value:l,children:e})},no=b.createContext(void 0),so=({children:e})=>{const[t,r]=b.useState([]),[n,s]=b.useState(!0),{user:o}=B();b.useEffect(()=>{(async()=>{if(!o){r([]),s(!1);return}try{const f=$(D,"users",o.uid),p=await Bt(f);if(p.exists()){const y=p.data();r(y.favorites||[])}else await _t(f,{favorites:[]}),r([])}catch(f){console.error("Error loading favorites:",f)}finally{s(!1)}})()},[o]);const l={favorites:t,addToFavorites:async d=>{if(o)try{const f=$(D,"users",o.uid),p=[...t,d];await re(f,{favorites:p}),r(p)}catch(f){throw console.error("Error adding card to favorites:",f),f}},removeFromFavorites:async d=>{if(o)try{const f=$(D,"users",o.uid),p=t.filter(y=>y.id!==d);await re(f,{favorites:p}),r(p)}catch(f){throw console.error("Error removing card from favorites:",f),f}},isInFavorites:d=>t.some(f=>f.id===d),loading:n};return i.jsx(no.Provider,{value:l,children:e})},oo=()=>{const{user:e,error:t}=B();return b.useEffect(()=>{console.log("App mounted"),console.log("User state:",e?"Logged in":"Not logged in")},[e]),i.jsxs(Ur,{theme:tn,children:[i.jsx(zr,{}),i.jsx(ro,{children:i.jsxs(so,{children:[i.jsx(Hr,{children:i.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[i.jsx(ln,{}),i.jsx("main",{style:{flex:1,padding:"20px 0"},children:i.jsxs(Wr,{children:[i.jsx(K,{path:"/",element:i.jsx(un,{})}),i.jsx(K,{path:"/marketplace",element:i.jsx($s,{})}),i.jsx(K,{path:"/card/:id",element:i.jsx(Ys,{})}),i.jsx(K,{path:"/profile",element:e?i.jsx(Ks,{}):i.jsx(le,{to:"/login",replace:!0})}),i.jsx(K,{path:"/collection",element:e?i.jsx(eo,{}):i.jsx(le,{to:"/login",replace:!0})}),i.jsx(K,{path:"/login",element:e?i.jsx(le,{to:"/profile",replace:!0}):i.jsx(Js,{})}),i.jsx(K,{path:"/signup",element:e?i.jsx(le,{to:"/profile",replace:!0}):i.jsx(Vs,{})})]})})]})}),t&&i.jsx(Ft,{open:!!t,autoHideDuration:6e3,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:i.jsx(se,{severity:"error",variant:"filled",children:t})})]})})]})},io={apiKey:"AIzaSyDrqUfwjpKjyEwpuZGTCxbvfhKWdHAHAHX",authDomain:"pokemon-tcg-marketplace.firebaseapp.com",projectId:"pokemon-tcg-marketplace",storageBucket:"pokemon-tcg-marketplace.appspot.com",messagingSenderId:"433238130897",appId:"1:433238130897:web:0b3faf40c5d0b71d2985f0"},Ye=Nt(io);Dt(Ye);const ao=J(Ye);Yr(Ye);const co=b.createContext({user:null,loading:!0});function lo({children:e}){const[t,r]=b.useState(null),[n,s]=b.useState(!0);return b.useEffect(()=>{console.log("Setting up auth listener");const o=ao.onAuthStateChanged(a=>{console.log("Auth state changed:",a?"User logged in":"No user"),r(a),s(!1)});return()=>o()},[]),i.jsx(co.Provider,{value:{user:t,loading:n},children:!n&&e})}const et=document.getElementById("root");console.log("Initializing app...");console.log("Root element:",et);if(!et)throw console.error("Root element not found!"),new Error("Failed to find the root element");const uo=Ne.createRoot(et);console.log("Root created successfully");uo.render(i.jsx(ke.StrictMode,{children:i.jsx(lo,{children:i.jsx(oo,{})})}));console.log("App rendered");
