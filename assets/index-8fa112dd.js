var Pl=Object.defineProperty;var jl=(n,t,e)=>t in n?Pl(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var it=(n,t,e)=>(jl(n,typeof t!="symbol"?t+"":t,e),e);import{c as Cl,a as Qr,j as O,A as Ml,C as Ut,T as Rl,b as et,B as rt,d as gt,I as Ht,S as Hs,e as to,f as Ll,F as Ws,g as Us,P as Nl,M as Dl,h as me,L as Il,i as Bl,G as dt,k as Dt,l as nn,m as Wt,n as Fl,o as Vs,p as ql,q as rn,r as oe,s as vr,t as se,u as zl,D as $s,v as Ks,w as Ys,x as Hl,y as Wl,z as Ul,E as Fn,H as xe,J as Vl,K as kn,N as br,O as xr,Q as _r,R as wr,U as Gs,V as Xs,W as Zs,X as Or,Y as Sr,Z as Js,_ as bn,$ as eo,a0 as no,a1 as io,a2 as ro,a3 as oo,a4 as $l,a5 as Kl,a6 as Qs,a7 as Yl,a8 as Gl,a9 as Xl,aa as Zl,ab as Jl,ac as Ql,ad as tc,ae as ec,af as so,ag as nc,ah as ic,ai as rc,aj as oc}from"./mui-vendor-8c9d71a3.js";import{c as ta,r as J,a as En,L as Ct,u as kr,e as sc,d as ve,f as ac,H as lc,h as cc,i as fe,N as qn}from"./react-vendor-fba0532a.js";import{g as Ne,o as uc,c as fc,s as hc,G as dc,a as pc,b as gc,u as mc,i as ea,d as na,q as Be,e as ae,w as we,f as Fe,h as ia,j as ra,k as Nt,l as Jt,m as fi,n as oa,p as yc}from"./firebase-vendor-b7fa58b6.js";import{i as vc}from"./chart-vendor-d24d8700.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var er={},ao=ta;er.createRoot=ao.createRoot,er.hydrateRoot=ao.hydrateRoot;const bc={light:{default:"linear-gradient(135deg, #f5f7fa 0%, #e4e7eb 100%)",pokeball:{position:"relative","&::before":{content:'""',position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"800px",height:"800px",background:"radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%)",backgroundImage:"url('/pokeball-bg.png')",backgroundSize:"contain",backgroundRepeat:"no-repeat",opacity:.1,zIndex:0,pointerEvents:"none"}}},dark:{default:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",pokeball:{position:"relative","&::before":{content:'""',position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"800px",height:"800px",background:"radial-gradient(circle, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 70%)",backgroundImage:"url('/pokeball-bg.png')",backgroundSize:"contain",backgroundRepeat:"no-repeat",opacity:.1,zIndex:0,pointerEvents:"none"}}}},xc=Cl({palette:{primary:{main:"#2a75bb",light:"#5a9cdb",dark:"#004c8c",contrastText:"#fff"},secondary:{main:"#ffcb05",light:"#fffd54",dark:"#c79b00",contrastText:"#000"},background:{default:bc.light.default,paper:"#ffffff"},text:{primary:"#2d3748",secondary:"#4a5568"}},typography:{fontFamily:"'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif",h1:{fontWeight:700,fontSize:"2.5rem",lineHeight:1.2,letterSpacing:"-0.01562em",background:"linear-gradient(45deg, #2a75bb, #ffcb05)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},h2:{fontWeight:600,fontSize:"2rem",lineHeight:1.3},h3:{fontWeight:600,fontSize:"1.75rem",lineHeight:1.3},h4:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.3},h5:{fontWeight:600,fontSize:"1.25rem",lineHeight:1.3},h6:{fontWeight:600,fontSize:"1.125rem",lineHeight:1.3},subtitle1:{fontSize:"1.125rem",lineHeight:1.5,letterSpacing:"0.00938em"},subtitle2:{fontSize:"0.875rem",lineHeight:1.5,letterSpacing:"0.00714em"},body1:{fontSize:"1rem",lineHeight:1.5,letterSpacing:"0.00938em"},body2:{fontSize:"0.875rem",lineHeight:1.5,letterSpacing:"0.01071em"},button:{textTransform:"none",fontWeight:600}},components:{MuiCard:{styleOverrides:{root:{backdropFilter:"blur(10px)",backgroundColor:Qr("#ffffff",.9),boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 48px rgba(0, 0, 0, 0.15)"}}}},MuiButton:{styleOverrides:{root:{borderRadius:"2rem",textTransform:"none",fontWeight:600,padding:"8px 24px",background:"linear-gradient(45deg, #2a75bb, #3a85cb)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(42, 117, 187, 0.4)"}}}},MuiAppBar:{styleOverrides:{root:{backdropFilter:"blur(10px)",backgroundColor:Qr("#ffffff",.9),boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)"}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:"1rem",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 20px rgba(42, 117, 187, 0.15)"},"&.Mui-focused":{boxShadow:"0 4px 20px rgba(42, 117, 187, 0.25)"}}}}}},shape:{borderRadius:12}});function Vt(){const[n,t]=J.useState(null),[e,i]=J.useState(!0),[r,o]=J.useState(null);J.useEffect(()=>{const h=Ne();return uc(h,g=>{t(g),i(!1),o(null)})},[]);const s=h=>{switch(h.code||""){case"auth/email-already-in-use":return"Cette adresse email est déjà utilisée.";case"auth/invalid-email":return"Adresse email invalide.";case"auth/operation-not-allowed":return"Opération non autorisée.";case"auth/weak-password":return"Le mot de passe est trop faible.";case"auth/user-disabled":return"Ce compte a été désactivé.";case"auth/user-not-found":return"Aucun compte ne correspond à cette adresse email.";case"auth/wrong-password":return"Mot de passe incorrect.";default:return"Une erreur est survenue. Veuillez réessayer."}};return{user:n,loading:e,error:r,signUp:async(h,d)=>{const g=Ne();o(null);try{return(await fc(g,h,d)).user}catch(p){const m=s(p);throw o(m),new Error(m)}},signIn:async(h,d)=>{const g=Ne();o(null);try{return(await hc(g,h,d)).user}catch(p){const m=s(p);throw o(m),new Error(m)}},signInWithGoogle:async()=>{const h=Ne();o(null);try{const d=new dc;return(await pc(h,d)).user}catch(d){const g=s(d);throw o(g),new Error(g)}},signOut:async()=>{const h=Ne();o(null);try{await gc(h)}catch(d){const g=s(d);throw o(g),new Error(g)}},updateProfile:async(h,d)=>{if(n)try{await mc(n,{displayName:h||n.displayName,photoURL:d||n.photoURL}),t({...n})}catch(g){const p=s(g);throw o(p),new Error(p)}}}}const lo=n=>{let t;const e=new Set,i=(c,u)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const h=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),e.forEach(d=>d(t,h))}},r=()=>t,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(e.add(c),()=>e.delete(c))},l=t=n(i,r,a);return a},_c=n=>n?lo(n):lo,wc=n=>n;function Oc(n,t=wc){const e=En.useSyncExternalStore(n.subscribe,()=>t(n.getState()),()=>t(n.getInitialState()));return En.useDebugValue(e),e}const co=n=>{const t=_c(n),e=i=>Oc(t,i);return Object.assign(e,t),e},Er=n=>n?co(n):co;function Sc(n,t){let e;try{e=n()}catch{return}return{getItem:r=>{var o;const s=l=>l===null?null:JSON.parse(l,t==null?void 0:t.reviver),a=(o=e.getItem(r))!=null?o:null;return a instanceof Promise?a.then(s):s(a)},setItem:(r,o)=>e.setItem(r,JSON.stringify(o,t==null?void 0:t.replacer)),removeItem:r=>e.removeItem(r)}}const nr=n=>t=>{try{const e=n(t);return e instanceof Promise?e:{then(i){return nr(i)(e)},catch(i){return this}}}catch(e){return{then(i){return this},catch(i){return nr(i)(e)}}}},kc=(n,t)=>(e,i,r)=>{let o={storage:Sc(()=>localStorage),partialize:p=>p,version:0,merge:(p,m)=>({...m,...p}),...t},s=!1;const a=new Set,l=new Set;let c=o.storage;if(!c)return n((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...p)},i,r);const u=()=>{const p=o.partialize({...i()});return c.setItem(o.name,{state:p,version:o.version})},f=r.setState;r.setState=(p,m)=>{f(p,m),u()};const h=n((...p)=>{e(...p),u()},i,r);r.getInitialState=()=>h;let d;const g=()=>{var p,m;if(!c)return;s=!1,a.forEach(v=>{var _;return v((_=i())!=null?_:h)});const y=((m=o.onRehydrateStorage)==null?void 0:m.call(o,(p=i())!=null?p:h))||void 0;return nr(c.getItem.bind(c))(o.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return[!0,o.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var _;const[b,x]=v;if(d=o.merge(x,(_=i())!=null?_:h),e(d,!0),b)return u()}).then(()=>{y==null||y(d,void 0),d=i(),s=!0,l.forEach(v=>v(d))}).catch(v=>{y==null||y(void 0,v)})};return r.persist={setOptions:p=>{o={...o,...p},p.storage&&(c=p.storage)},clearStorage:()=>{c==null||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(l.add(p),()=>{l.delete(p)})},o.skipHydration||g(),d||h},sa=kc,Ec=Er()(sa((n,t)=>({items:[],addItem:e=>{const i=t().items,r=i.find(o=>o.card.id===e.id);n(r?{items:i.map(o=>o.card.id===e.id?{...o,quantity:o.quantity+1}:o)}:{items:[...i,{card:e,quantity:1}]})},removeItem:e=>{n({items:t().items.filter(i=>i.card.id!==e)})},updateQuantity:(e,i)=>{n({items:t().items.map(r=>r.card.id===e?{...r,quantity:i}:r)})},clearCart:()=>n({items:[]}),total:()=>t().items.reduce((e,i)=>e+i.card.cardmarket.prices.averageSellPrice*i.quantity,0)}),{name:"cart-storage"})),aa=Er()(sa((n,t)=>({favorites:[],addFavorite:e=>n(i=>({favorites:[...i.favorites,e]})),removeFavorite:e=>n(i=>({favorites:i.favorites.filter(r=>r.id!==e)})),isFavorite:e=>t().favorites.some(i=>i.id===e),toggleFavorite:e=>{t().isFavorite(e.id)?t().removeFavorite(e.id):t().addFavorite(e)}}),{name:"favorites-storage"}));const Ac=()=>{const{user:n,signOut:t}=Vt(),{items:e}=Ec(),{favorites:i}=aa(),[r,o]=J.useState(null),s=c=>{o(c.currentTarget)},a=()=>{o(null)},l=async()=>{try{await t(),a()}catch(c){console.error("Erreur lors de la déconnexion:",c)}};return O.jsx(Ml,{position:"fixed",sx:{backgroundColor:"rgba(255, 255, 255, 0.95)",zIndex:1100},children:O.jsx(Ut,{maxWidth:"xl",children:O.jsxs(Rl,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"64px"},children:[O.jsx(et,{variant:"h5",component:Ct,to:"/",sx:{color:"#2c3e50",fontWeight:"bold",textDecoration:"none",flexShrink:0},children:"Pokémon TCG"}),O.jsxs(rt,{sx:{display:"flex",alignItems:"center",gap:2},children:[O.jsx(gt,{component:Ct,to:"/marketplace",color:"inherit",sx:{color:"#2c3e50"},children:"Marketplace"}),n&&O.jsx(gt,{component:Ct,to:"/collection",color:"inherit",sx:{color:"#2c3e50"},children:"Ma Collection"}),O.jsx(gt,{component:Ct,to:"/blog",color:"inherit",sx:{color:"#2c3e50"},children:"Blog"}),O.jsxs(rt,{sx:{display:"flex",gap:1,alignItems:"center"},children:[O.jsx(Ht,{color:"inherit",component:Ct,to:"/search",children:O.jsx(Hs,{})}),n&&O.jsxs(O.Fragment,{children:[O.jsx(Ht,{color:"inherit",component:Ct,to:"/cart",children:O.jsx(to,{badgeContent:e.length,color:"error",children:O.jsx(Ll,{})})}),O.jsx(Ht,{color:"inherit",component:Ct,to:"/favorites",children:O.jsx(to,{badgeContent:i.length,color:"error",children:O.jsx(Ws,{})})}),O.jsx(Ht,{onClick:s,color:"inherit",children:n.photoURL?O.jsx(Us,{src:n.photoURL,sx:{width:32,height:32}}):O.jsx(Nl,{})}),O.jsxs(Dl,{anchorEl:r,open:!!r,onClose:a,children:[O.jsx(me,{component:Ct,to:"/profile",onClick:a,children:"Profil"}),O.jsx(me,{onClick:l,children:"Se déconnecter"})]})]}),!n&&O.jsxs(rt,{sx:{display:"flex",gap:1},children:[O.jsx(gt,{color:"inherit",component:Ct,to:"/login",startIcon:O.jsx(Il,{}),children:"Connexion"}),O.jsx(gt,{color:"inherit",component:Ct,to:"/signup",startIcon:O.jsx(Bl,{}),children:"Inscription"})]})]})]})]})})})},Tc=()=>{const{user:n}=Vt();return O.jsxs(Ut,{maxWidth:"lg",children:[O.jsxs(rt,{sx:{py:8},children:[O.jsx(et,{variant:"h2",component:"h1",gutterBottom:!0,align:"center",children:"Pokemon TCG Marketplace"}),O.jsx(et,{variant:"h5",component:"h2",align:"center",color:"text.secondary",paragraph:!0,children:"Achetez, vendez et échangez vos cartes Pokémon en toute sécurité"}),O.jsx(rt,{sx:{mt:4,display:"flex",justifyContent:"center",gap:2},children:n?O.jsx(gt,{variant:"contained",size:"large",component:Ct,to:"/marketplace",children:"Explorer le Marketplace"}):O.jsx(gt,{variant:"contained",size:"large",component:Ct,to:"/login",children:"Commencer"})})]}),O.jsxs(dt,{container:!0,spacing:4,sx:{mt:4},children:[O.jsx(dt,{item:!0,xs:12,md:4,children:O.jsxs(Dt,{sx:{p:3,height:"100%"},children:[O.jsx(et,{variant:"h5",component:"h3",gutterBottom:!0,children:"Marketplace"}),O.jsx(et,{variant:"body1",paragraph:!0,children:"Trouvez les cartes que vous recherchez parmi notre vaste sélection. Prix du marché en temps réel et paiement sécurisé."}),O.jsx(gt,{component:Ct,to:"/marketplace",variant:"outlined",children:"Voir le Marketplace"})]})}),O.jsx(dt,{item:!0,xs:12,md:4,children:O.jsxs(Dt,{sx:{p:3,height:"100%"},children:[O.jsx(et,{variant:"h5",component:"h3",gutterBottom:!0,children:"Collection"}),O.jsx(et,{variant:"body1",paragraph:!0,children:"Gérez votre collection de cartes. Marquez les cartes à vendre, à échanger ou à garder. Suivez la valeur de votre collection."}),O.jsx(gt,{component:Ct,to:"/collection",variant:"outlined",children:"Gérer ma Collection"})]})}),O.jsx(dt,{item:!0,xs:12,md:4,children:O.jsxs(Dt,{sx:{p:3,height:"100%"},children:[O.jsx(et,{variant:"h5",component:"h3",gutterBottom:!0,children:"Blog"}),O.jsx(et,{variant:"body1",paragraph:!0,children:"Rejoignez notre communauté active. Partagez vos expériences, discutez des dernières sorties et trouvez des conseils."}),O.jsx(gt,{component:Ct,to:"/blog",variant:"outlined",children:"Voir le Blog"})]})})]})]})};function la(n,t){return function(){return n.apply(t,arguments)}}const{toString:Pc}=Object.prototype,{getPrototypeOf:Ar}=Object,Pi=(n=>t=>{const e=Pc.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),te=n=>(n=n.toLowerCase(),t=>Pi(t)===n),ji=n=>t=>typeof t===n,{isArray:on}=Array,An=ji("undefined");function jc(n){return n!==null&&!An(n)&&n.constructor!==null&&!An(n.constructor)&&Kt(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const ca=te("ArrayBuffer");function Cc(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&ca(n.buffer),t}const Mc=ji("string"),Kt=ji("function"),ua=ji("number"),Ci=n=>n!==null&&typeof n=="object",Rc=n=>n===!0||n===!1,ni=n=>{if(Pi(n)!=="object")return!1;const t=Ar(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Lc=te("Date"),Nc=te("File"),Dc=te("Blob"),Ic=te("FileList"),Bc=n=>Ci(n)&&Kt(n.pipe),Fc=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Kt(n.append)&&((t=Pi(n))==="formdata"||t==="object"&&Kt(n.toString)&&n.toString()==="[object FormData]"))},qc=te("URLSearchParams"),[zc,Hc,Wc,Uc]=["ReadableStream","Request","Response","Headers"].map(te),Vc=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Nn(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),on(n))for(i=0,r=n.length;i<r;i++)t.call(null,n[i],i,n);else{const o=e?Object.getOwnPropertyNames(n):Object.keys(n),s=o.length;let a;for(i=0;i<s;i++)a=o[i],t.call(null,n[a],a,n)}}function fa(n,t){t=t.toLowerCase();const e=Object.keys(n);let i=e.length,r;for(;i-- >0;)if(r=e[i],t===r.toLowerCase())return r;return null}const De=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ha=n=>!An(n)&&n!==De;function ir(){const{caseless:n}=ha(this)&&this||{},t={},e=(i,r)=>{const o=n&&fa(t,r)||r;ni(t[o])&&ni(i)?t[o]=ir(t[o],i):ni(i)?t[o]=ir({},i):on(i)?t[o]=i.slice():t[o]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Nn(arguments[i],e);return t}const $c=(n,t,e,{allOwnKeys:i}={})=>(Nn(t,(r,o)=>{e&&Kt(r)?n[o]=la(r,e):n[o]=r},{allOwnKeys:i}),n),Kc=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Yc=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},Gc=(n,t,e,i)=>{let r,o,s;const a={};if(t=t||{},n==null)return t;do{for(r=Object.getOwnPropertyNames(n),o=r.length;o-- >0;)s=r[o],(!i||i(s,n,t))&&!a[s]&&(t[s]=n[s],a[s]=!0);n=e!==!1&&Ar(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},Xc=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},Zc=n=>{if(!n)return null;if(on(n))return n;let t=n.length;if(!ua(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},Jc=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&Ar(Uint8Array)),Qc=(n,t)=>{const i=(n&&n[Symbol.iterator]).call(n);let r;for(;(r=i.next())&&!r.done;){const o=r.value;t.call(n,o[0],o[1])}},tu=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},eu=te("HTMLFormElement"),nu=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,r){return i.toUpperCase()+r}),uo=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),iu=te("RegExp"),da=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};Nn(e,(r,o)=>{let s;(s=t(r,o,n))!==!1&&(i[o]=s||r)}),Object.defineProperties(n,i)},ru=n=>{da(n,(t,e)=>{if(Kt(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(Kt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},ou=(n,t)=>{const e={},i=r=>{r.forEach(o=>{e[o]=!0})};return on(n)?i(n):i(String(n).split(t)),e},su=()=>{},au=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t,zi="abcdefghijklmnopqrstuvwxyz",fo="0123456789",pa={DIGIT:fo,ALPHA:zi,ALPHA_DIGIT:zi+zi.toUpperCase()+fo},lu=(n=16,t=pa.ALPHA_DIGIT)=>{let e="";const{length:i}=t;for(;n--;)e+=t[Math.random()*i|0];return e};function cu(n){return!!(n&&Kt(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const uu=n=>{const t=new Array(10),e=(i,r)=>{if(Ci(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[r]=i;const o=on(i)?[]:{};return Nn(i,(s,a)=>{const l=e(s,r+1);!An(l)&&(o[a]=l)}),t[r]=void 0,o}}return i};return e(n,0)},fu=te("AsyncFunction"),hu=n=>n&&(Ci(n)||Kt(n))&&Kt(n.then)&&Kt(n.catch),ga=((n,t)=>n?setImmediate:t?((e,i)=>(De.addEventListener("message",({source:r,data:o})=>{r===De&&o===e&&i.length&&i.shift()()},!1),r=>{i.push(r),De.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Kt(De.postMessage)),du=typeof queueMicrotask<"u"?queueMicrotask.bind(De):typeof process<"u"&&process.nextTick||ga,$={isArray:on,isArrayBuffer:ca,isBuffer:jc,isFormData:Fc,isArrayBufferView:Cc,isString:Mc,isNumber:ua,isBoolean:Rc,isObject:Ci,isPlainObject:ni,isReadableStream:zc,isRequest:Hc,isResponse:Wc,isHeaders:Uc,isUndefined:An,isDate:Lc,isFile:Nc,isBlob:Dc,isRegExp:iu,isFunction:Kt,isStream:Bc,isURLSearchParams:qc,isTypedArray:Jc,isFileList:Ic,forEach:Nn,merge:ir,extend:$c,trim:Vc,stripBOM:Kc,inherits:Yc,toFlatObject:Gc,kindOf:Pi,kindOfTest:te,endsWith:Xc,toArray:Zc,forEachEntry:Qc,matchAll:tu,isHTMLForm:eu,hasOwnProperty:uo,hasOwnProp:uo,reduceDescriptors:da,freezeMethods:ru,toObjectSet:ou,toCamelCase:nu,noop:su,toFiniteNumber:au,findKey:fa,global:De,isContextDefined:ha,ALPHABET:pa,generateString:lu,isSpecCompliantForm:cu,toJSONObject:uu,isAsyncFn:fu,isThenable:hu,setImmediate:ga,asap:du};function at(n,t,e,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}$.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const ma=at.prototype,ya={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{ya[n]={value:n}});Object.defineProperties(at,ya);Object.defineProperty(ma,"isAxiosError",{value:!0});at.from=(n,t,e,i,r,o)=>{const s=Object.create(ma);return $.toFlatObject(n,s,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),at.call(s,n.message,t,e,i,r),s.cause=n,s.name=n.name,o&&Object.assign(s,o),s};const pu=null;function rr(n){return $.isPlainObject(n)||$.isArray(n)}function va(n){return $.endsWith(n,"[]")?n.slice(0,-2):n}function ho(n,t,e){return n?n.concat(t).map(function(r,o){return r=va(r),!e&&o?"["+r+"]":r}).join(e?".":""):t}function gu(n){return $.isArray(n)&&!n.some(rr)}const mu=$.toFlatObject($,{},null,function(t){return/^is[A-Z]/.test(t)});function Mi(n,t,e){if(!$.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=$.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!$.isUndefined(m[p])});const i=e.metaTokens,r=e.visitor||u,o=e.dots,s=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(r))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if($.isDate(g))return g.toISOString();if(!l&&$.isBlob(g))throw new at("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(g)||$.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,p,m){let y=g;if(g&&!m&&typeof g=="object"){if($.endsWith(p,"{}"))p=i?p:p.slice(0,-2),g=JSON.stringify(g);else if($.isArray(g)&&gu(g)||($.isFileList(g)||$.endsWith(p,"[]"))&&(y=$.toArray(g)))return p=va(p),y.forEach(function(_,b){!($.isUndefined(_)||_===null)&&t.append(s===!0?ho([p],b,o):s===null?p:p+"[]",c(_))}),!1}return rr(g)?!0:(t.append(ho(m,p,o),c(g)),!1)}const f=[],h=Object.assign(mu,{defaultVisitor:u,convertValue:c,isVisitable:rr});function d(g,p){if(!$.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(g),$.forEach(g,function(y,v){(!($.isUndefined(y)||y===null)&&r.call(t,y,$.isString(v)?v.trim():v,p,h))===!0&&d(y,p?p.concat(v):[v])}),f.pop()}}if(!$.isObject(n))throw new TypeError("data must be an object");return d(n),t}function po(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Tr(n,t){this._pairs=[],n&&Mi(n,this,t)}const ba=Tr.prototype;ba.append=function(t,e){this._pairs.push([t,e])};ba.toString=function(t){const e=t?function(i){return t.call(this,i,po)}:po;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function yu(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xa(n,t,e){if(!t)return n;const i=e&&e.encode||yu;$.isFunction(e)&&(e={serialize:e});const r=e&&e.serialize;let o;if(r?o=r(t,e):o=$.isURLSearchParams(t)?t.toString():new Tr(t,e).toString(i),o){const s=n.indexOf("#");s!==-1&&(n=n.slice(0,s)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class vu{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(i){i!==null&&t(i)})}}const go=vu,_a={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bu=typeof URLSearchParams<"u"?URLSearchParams:Tr,xu=typeof FormData<"u"?FormData:null,_u=typeof Blob<"u"?Blob:null,wu={isBrowser:!0,classes:{URLSearchParams:bu,FormData:xu,Blob:_u},protocols:["http","https","file","blob","url","data"]},Pr=typeof window<"u"&&typeof document<"u",or=typeof navigator=="object"&&navigator||void 0,Ou=Pr&&(!or||["ReactNative","NativeScript","NS"].indexOf(or.product)<0),Su=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ku=Pr&&window.location.href||"http://localhost",Eu=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pr,hasStandardBrowserEnv:Ou,hasStandardBrowserWebWorkerEnv:Su,navigator:or,origin:ku},Symbol.toStringTag,{value:"Module"})),Lt={...Eu,...wu};function Au(n,t){return Mi(n,new Lt.classes.URLSearchParams,Object.assign({visitor:function(e,i,r,o){return Lt.isNode&&$.isBuffer(e)?(this.append(i,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function Tu(n){return $.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Pu(n){const t={},e=Object.keys(n);let i;const r=e.length;let o;for(i=0;i<r;i++)o=e[i],t[o]=n[o];return t}function wa(n){function t(e,i,r,o){let s=e[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),l=o>=e.length;return s=!s&&$.isArray(r)?r.length:s,l?($.hasOwnProp(r,s)?r[s]=[r[s],i]:r[s]=i,!a):((!r[s]||!$.isObject(r[s]))&&(r[s]=[]),t(e,i,r[s],o)&&$.isArray(r[s])&&(r[s]=Pu(r[s])),!a)}if($.isFormData(n)&&$.isFunction(n.entries)){const e={};return $.forEachEntry(n,(i,r)=>{t(Tu(i),r,e,0)}),e}return null}function ju(n,t,e){if($.isString(n))try{return(t||JSON.parse)(n),$.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const jr={transitional:_a,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",r=i.indexOf("application/json")>-1,o=$.isObject(t);if(o&&$.isHTMLForm(t)&&(t=new FormData(t)),$.isFormData(t))return r?JSON.stringify(wa(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Au(t,this.formSerializer).toString();if((a=$.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Mi(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||r?(e.setContentType("application/json",!1),ju(t)):t}],transformResponse:[function(t){const e=this.transitional||jr.transitional,i=e&&e.forcedJSONParsing,r=this.responseType==="json";if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(i&&!this.responseType||r)){const s=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?at.from(a,at.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lt.classes.FormData,Blob:Lt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],n=>{jr.headers[n]={}});const Cr=jr,Cu=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Mu=n=>{const t={};let e,i,r;return n&&n.split(`
`).forEach(function(s){r=s.indexOf(":"),e=s.substring(0,r).trim().toLowerCase(),i=s.substring(r+1).trim(),!(!e||t[e]&&Cu[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},mo=Symbol("internals");function an(n){return n&&String(n).trim().toLowerCase()}function ii(n){return n===!1||n==null?n:$.isArray(n)?n.map(ii):String(n)}function Ru(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const Lu=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Hi(n,t,e,i,r){if($.isFunction(i))return i.call(this,t,e);if(r&&(t=e),!!$.isString(t)){if($.isString(i))return t.indexOf(i)!==-1;if($.isRegExp(i))return i.test(t)}}function Nu(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function Du(n,t){const e=$.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(r,o,s){return this[i].call(this,t,r,o,s)},configurable:!0})})}class Ri{constructor(t){t&&this.set(t)}set(t,e,i){const r=this;function o(a,l,c){const u=an(l);if(!u)throw new Error("header name must be a non-empty string");const f=$.findKey(r,u);(!f||r[f]===void 0||c===!0||c===void 0&&r[f]!==!1)&&(r[f||l]=ii(a))}const s=(a,l)=>$.forEach(a,(c,u)=>o(c,u,l));if($.isPlainObject(t)||t instanceof this.constructor)s(t,e);else if($.isString(t)&&(t=t.trim())&&!Lu(t))s(Mu(t),e);else if($.isHeaders(t))for(const[a,l]of t.entries())o(l,a,i);else t!=null&&o(e,t,i);return this}get(t,e){if(t=an(t),t){const i=$.findKey(this,t);if(i){const r=this[i];if(!e)return r;if(e===!0)return Ru(r);if($.isFunction(e))return e.call(this,r,i);if($.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=an(t),t){const i=$.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||Hi(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let r=!1;function o(s){if(s=an(s),s){const a=$.findKey(i,s);a&&(!e||Hi(i,i[a],a,e))&&(delete i[a],r=!0)}}return $.isArray(t)?t.forEach(o):o(t),r}clear(t){const e=Object.keys(this);let i=e.length,r=!1;for(;i--;){const o=e[i];(!t||Hi(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const e=this,i={};return $.forEach(this,(r,o)=>{const s=$.findKey(i,o);if(s){e[s]=ii(r),delete e[o];return}const a=t?Nu(o):String(o).trim();a!==o&&delete e[o],e[a]=ii(r),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return $.forEach(this,(i,r)=>{i!=null&&i!==!1&&(e[r]=t&&$.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(r=>i.set(r)),i}static accessor(t){const i=(this[mo]=this[mo]={accessors:{}}).accessors,r=this.prototype;function o(s){const a=an(s);i[a]||(Du(r,s),i[a]=!0)}return $.isArray(t)?t.forEach(o):o(t),this}}Ri.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(Ri.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});$.freezeMethods(Ri);const Qt=Ri;function Wi(n,t){const e=this||Cr,i=t||e,r=Qt.from(i.headers);let o=i.data;return $.forEach(n,function(a){o=a.call(e,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function Oa(n){return!!(n&&n.__CANCEL__)}function sn(n,t,e){at.call(this,n??"canceled",at.ERR_CANCELED,t,e),this.name="CanceledError"}$.inherits(sn,at,{__CANCEL__:!0});function Sa(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new at("Request failed with status code "+e.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function Iu(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function Bu(n,t){n=n||10;const e=new Array(n),i=new Array(n);let r=0,o=0,s;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=i[o];s||(s=c),e[r]=l,i[r]=c;let f=o,h=0;for(;f!==r;)h+=e[f++],f=f%n;if(r=(r+1)%n,r===o&&(o=(o+1)%n),c-s<t)return;const d=u&&c-u;return d?Math.round(h*1e3/d):void 0}}function Fu(n,t){let e=0,i=1e3/t,r,o;const s=(c,u=Date.now())=>{e=u,r=null,o&&(clearTimeout(o),o=null),n.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-e;f>=i?s(c,u):(r=c,o||(o=setTimeout(()=>{o=null,s(r)},i-f)))},()=>r&&s(r)]}const hi=(n,t,e=3)=>{let i=0;const r=Bu(50,250);return Fu(o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,l=s-i,c=r(l),u=s<=a;i=s;const f={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-s)/c:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};n(f)},e)},yo=(n,t)=>{const e=n!=null;return[i=>t[0]({lengthComputable:e,total:n,loaded:i}),t[1]]},vo=n=>(...t)=>$.asap(()=>n(...t)),qu=Lt.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,Lt.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(Lt.origin),Lt.navigator&&/(msie|trident)/i.test(Lt.navigator.userAgent)):()=>!0,zu=Lt.hasStandardBrowserEnv?{write(n,t,e,i,r,o){const s=[n+"="+encodeURIComponent(t)];$.isNumber(e)&&s.push("expires="+new Date(e).toGMTString()),$.isString(i)&&s.push("path="+i),$.isString(r)&&s.push("domain="+r),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Hu(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Wu(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function ka(n,t){return n&&!Hu(t)?Wu(n,t):t}const bo=n=>n instanceof Qt?{...n}:n;function ze(n,t){t=t||{};const e={};function i(c,u,f,h){return $.isPlainObject(c)&&$.isPlainObject(u)?$.merge.call({caseless:h},c,u):$.isPlainObject(u)?$.merge({},u):$.isArray(u)?u.slice():u}function r(c,u,f,h){if($.isUndefined(u)){if(!$.isUndefined(c))return i(void 0,c,f,h)}else return i(c,u,f,h)}function o(c,u){if(!$.isUndefined(u))return i(void 0,u)}function s(c,u){if($.isUndefined(u)){if(!$.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function a(c,u,f){if(f in t)return i(c,u);if(f in n)return i(void 0,c)}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(c,u,f)=>r(bo(c),bo(u),f,!0)};return $.forEach(Object.keys(Object.assign({},n,t)),function(u){const f=l[u]||r,h=f(n[u],t[u],u);$.isUndefined(h)&&f!==a||(e[u]=h)}),e}const Ea=n=>{const t=ze({},n);let{data:e,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:o,headers:s,auth:a}=t;t.headers=s=Qt.from(s),t.url=xa(ka(t.baseURL,t.url),n.params,n.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if($.isFormData(e)){if(Lt.hasStandardBrowserEnv||Lt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Lt.hasStandardBrowserEnv&&(i&&$.isFunction(i)&&(i=i(t)),i||i!==!1&&qu(t.url))){const c=r&&o&&zu.read(o);c&&s.set(r,c)}return t},Uu=typeof XMLHttpRequest<"u",Vu=Uu&&function(n){return new Promise(function(e,i){const r=Ea(n);let o=r.data;const s=Qt.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=r,u,f,h,d,g;function p(){d&&d(),g&&g(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout;function y(){if(!m)return;const _=Qt.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:_,config:n,request:m};Sa(function(S){e(S),p()},function(S){i(S),p()},x),m=null}"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(y)},m.onabort=function(){m&&(i(new at("Request aborted",at.ECONNABORTED,n,m)),m=null)},m.onerror=function(){i(new at("Network Error",at.ERR_NETWORK,n,m)),m=null},m.ontimeout=function(){let b=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const x=r.transitional||_a;r.timeoutErrorMessage&&(b=r.timeoutErrorMessage),i(new at(b,x.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,n,m)),m=null},o===void 0&&s.setContentType(null),"setRequestHeader"in m&&$.forEach(s.toJSON(),function(b,x){m.setRequestHeader(x,b)}),$.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),a&&a!=="json"&&(m.responseType=r.responseType),c&&([h,g]=hi(c,!0),m.addEventListener("progress",h)),l&&m.upload&&([f,d]=hi(l),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",d)),(r.cancelToken||r.signal)&&(u=_=>{m&&(i(!_||_.type?new sn(null,n,m):_),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const v=Iu(r.url);if(v&&Lt.protocols.indexOf(v)===-1){i(new at("Unsupported protocol "+v+":",at.ERR_BAD_REQUEST,n));return}m.send(o||null)})},$u=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let i=new AbortController,r;const o=function(c){if(!r){r=!0,a();const u=c instanceof Error?c:this.reason;i.abort(u instanceof at?u:new sn(u instanceof Error?u.message:u))}};let s=t&&setTimeout(()=>{s=null,o(new at(`timeout ${t} of ms exceeded`,at.ETIMEDOUT))},t);const a=()=>{n&&(s&&clearTimeout(s),s=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),n=null)};n.forEach(c=>c.addEventListener("abort",o));const{signal:l}=i;return l.unsubscribe=()=>$.asap(a),l}},Ku=$u,Yu=function*(n,t){let e=n.byteLength;if(!t||e<t){yield n;return}let i=0,r;for(;i<e;)r=i+t,yield n.slice(i,r),i=r},Gu=async function*(n,t){for await(const e of Xu(n))yield*Yu(e,t)},Xu=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},xo=(n,t,e,i)=>{const r=Gu(n,t);let o=0,s,a=l=>{s||(s=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await r.next();if(c){a(),l.close();return}let f=u.byteLength;if(e){let h=o+=f;e(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},Li=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Aa=Li&&typeof ReadableStream=="function",Zu=Li&&(typeof TextEncoder=="function"?(n=>t=>n.encode(t))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Ta=(n,...t)=>{try{return!!n(...t)}catch{return!1}},Ju=Aa&&Ta(()=>{let n=!1;const t=new Request(Lt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!t}),_o=64*1024,sr=Aa&&Ta(()=>$.isReadableStream(new Response("").body)),di={stream:sr&&(n=>n.body)};Li&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!di[t]&&(di[t]=$.isFunction(n[t])?e=>e[t]():(e,i)=>{throw new at(`Response type '${t}' is not supported`,at.ERR_NOT_SUPPORT,i)})})})(new Response);const Qu=async n=>{if(n==null)return 0;if($.isBlob(n))return n.size;if($.isSpecCompliantForm(n))return(await new Request(Lt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if($.isArrayBufferView(n)||$.isArrayBuffer(n))return n.byteLength;if($.isURLSearchParams(n)&&(n=n+""),$.isString(n))return(await Zu(n)).byteLength},tf=async(n,t)=>{const e=$.toFiniteNumber(n.getContentLength());return e??Qu(t)},ef=Li&&(async n=>{let{url:t,method:e,data:i,signal:r,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:h}=Ea(n);c=c?(c+"").toLowerCase():"text";let d=Ku([r,o&&o.toAbortSignal()],s),g;const p=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let m;try{if(l&&Ju&&e!=="get"&&e!=="head"&&(m=await tf(u,i))!==0){let x=new Request(t,{method:"POST",body:i,duplex:"half"}),T;if($.isFormData(i)&&(T=x.headers.get("content-type"))&&u.setContentType(T),x.body){const[S,k]=yo(m,hi(vo(l)));i=xo(x.body,_o,S,k)}}$.isString(f)||(f=f?"include":"omit");const y="credentials"in Request.prototype;g=new Request(t,{...h,signal:d,method:e.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:y?f:void 0});let v=await fetch(g);const _=sr&&(c==="stream"||c==="response");if(sr&&(a||_&&p)){const x={};["status","statusText","headers"].forEach(P=>{x[P]=v[P]});const T=$.toFiniteNumber(v.headers.get("content-length")),[S,k]=a&&yo(T,hi(vo(a),!0))||[];v=new Response(xo(v.body,_o,S,()=>{k&&k(),p&&p()}),x)}c=c||"text";let b=await di[$.findKey(di,c)||"text"](v,n);return!_&&p&&p(),await new Promise((x,T)=>{Sa(x,T,{data:b,headers:Qt.from(v.headers),status:v.status,statusText:v.statusText,config:n,request:g})})}catch(y){throw p&&p(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,n,g),{cause:y.cause||y}):at.from(y,y&&y.code,n,g)}}),ar={http:pu,xhr:Vu,fetch:ef};$.forEach(ar,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const wo=n=>`- ${n}`,nf=n=>$.isFunction(n)||n===null||n===!1,Pa={getAdapter:n=>{n=$.isArray(n)?n:[n];const{length:t}=n;let e,i;const r={};for(let o=0;o<t;o++){e=n[o];let s;if(i=e,!nf(e)&&(i=ar[(s=String(e)).toLowerCase()],i===void 0))throw new at(`Unknown adapter '${s}'`);if(i)break;r[s||"#"+o]=i}if(!i){const o=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?`since :
`+o.map(wo).join(`
`):" "+wo(o[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i},adapters:ar};function Ui(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new sn(null,n)}function Oo(n){return Ui(n),n.headers=Qt.from(n.headers),n.data=Wi.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Pa.getAdapter(n.adapter||Cr.adapter)(n).then(function(i){return Ui(n),i.data=Wi.call(n,n.transformResponse,i),i.headers=Qt.from(i.headers),i},function(i){return Oa(i)||(Ui(n),i&&i.response&&(i.response.data=Wi.call(n,n.transformResponse,i.response),i.response.headers=Qt.from(i.response.headers))),Promise.reject(i)})}const ja="1.7.8",Ni={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Ni[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const So={};Ni.transitional=function(t,e,i){function r(o,s){return"[Axios v"+ja+"] Transitional option '"+o+"'"+s+(i?". "+i:"")}return(o,s,a)=>{if(t===!1)throw new at(r(s," has been removed"+(e?" in "+e:"")),at.ERR_DEPRECATED);return e&&!So[s]&&(So[s]=!0,console.warn(r(s," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,s,a):!0}};Ni.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function rf(n,t,e){if(typeof n!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const o=i[r],s=t[o];if(s){const a=n[o],l=a===void 0||s(a,o,n);if(l!==!0)throw new at("option "+o+" must be "+l,at.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new at("Unknown option "+o,at.ERR_BAD_OPTION)}}const ri={assertOptions:rf,validators:Ni},ee=ri.validators;class pi{constructor(t){this.defaults=t,this.interceptors={request:new go,response:new go}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=ze(this.defaults,e);const{transitional:i,paramsSerializer:r,headers:o}=e;i!==void 0&&ri.assertOptions(i,{silentJSONParsing:ee.transitional(ee.boolean),forcedJSONParsing:ee.transitional(ee.boolean),clarifyTimeoutError:ee.transitional(ee.boolean)},!1),r!=null&&($.isFunction(r)?e.paramsSerializer={serialize:r}:ri.assertOptions(r,{encode:ee.function,serialize:ee.function},!0)),ri.assertOptions(e,{baseUrl:ee.spelling("baseURL"),withXsrfToken:ee.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=o&&$.merge(o.common,o[e.method]);o&&$.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),e.headers=Qt.concat(s,o);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(e)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const c=[];this.interceptors.response.forEach(function(p){c.push(p.fulfilled,p.rejected)});let u,f=0,h;if(!l){const g=[Oo.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),h=g.length,u=Promise.resolve(e);f<h;)u=u.then(g[f++],g[f++]);return u}h=a.length;let d=e;for(f=0;f<h;){const g=a[f++],p=a[f++];try{d=g(d)}catch(m){p.call(this,m);break}}try{u=Oo.call(this,d)}catch(g){return Promise.reject(g)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(t){t=ze(this.defaults,t);const e=ka(t.baseURL,t.url);return xa(e,t.params,t.paramsSerializer)}}$.forEach(["delete","get","head","options"],function(t){pi.prototype[t]=function(e,i){return this.request(ze(i||{},{method:t,url:e,data:(i||{}).data}))}});$.forEach(["post","put","patch"],function(t){function e(i){return function(o,s,a){return this.request(ze(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}pi.prototype[t]=e(),pi.prototype[t+"Form"]=e(!0)});const oi=pi;class Mr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const i=this;this.promise.then(r=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](r);i._listeners=null}),this.promise.then=r=>{let o;const s=new Promise(a=>{i.subscribe(a),o=a}).then(r);return s.cancel=function(){i.unsubscribe(o)},s},t(function(o,s,a){i.reason||(i.reason=new sn(o,s,a),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=i=>{t.abort(i)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Mr(function(r){t=r}),cancel:t}}}const of=Mr;function sf(n){return function(e){return n.apply(null,e)}}function af(n){return $.isObject(n)&&n.isAxiosError===!0}const lr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lr).forEach(([n,t])=>{lr[t]=n});const lf=lr;function Ca(n){const t=new oi(n),e=la(oi.prototype.request,t);return $.extend(e,oi.prototype,t,{allOwnKeys:!0}),$.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return Ca(ze(n,r))},e}const Tt=Ca(Cr);Tt.Axios=oi;Tt.CanceledError=sn;Tt.CancelToken=of;Tt.isCancel=Oa;Tt.VERSION=ja;Tt.toFormData=Mi;Tt.AxiosError=at;Tt.Cancel=Tt.CanceledError;Tt.all=function(t){return Promise.all(t)};Tt.spread=sf;Tt.isAxiosError=af;Tt.mergeConfig=ze;Tt.AxiosHeaders=Qt;Tt.formToJSON=n=>wa($.isHTMLForm(n)?new FormData(n):n);Tt.getAdapter=Pa.getAdapter;Tt.HttpStatusCode=lf;Tt.default=Tt;const si=Tt,Vi="https://api.pokemontcg.io/v2";class cf{constructor(){this.apiKey="b2b2c3b9-cab6-4908-acc8-c0b296524fef",this.apiKey?console.log("Pokemon TCG API Key is configured"):console.error("Pokemon TCG API Key is missing!")}getHeaders(){return{"X-Api-Key":this.apiKey}}async searchCards(t="*",e=1,i=20){var r,o,s;try{console.log("Searching cards with query:",t);const a=await si.get(`${Vi}/cards`,{headers:this.getHeaders(),params:{q:t==="*"?"supertype:Pokémon":`supertype:Pokémon name:*${t}*`,page:e,pageSize:i,orderBy:"name"}});return console.log("API Response:",{count:a.data.count,totalCount:a.data.totalCount,pageSize:a.data.pageSize,page:a.data.page}),{data:a.data.data,totalCount:a.data.totalCount||0}}catch(a){throw console.error("Error fetching cards:",((r=a.response)==null?void 0:r.data)||a.message),new Error(((s=(o=a.response)==null?void 0:o.data)==null?void 0:s.error)||a.message||"Erreur lors de la recherche des cartes")}}async getCard(t){try{return(await si.get(`${Vi}/cards/${t}`,{headers:this.getHeaders()})).data.data}catch(e){throw console.error("Error fetching card:",e),e}}async getCardById(t){var e,i,r;try{return(await si.get(`${Vi}/cards/${t}`,{headers:this.getHeaders()})).data.data}catch(o){throw console.error("Error fetching card:",((e=o.response)==null?void 0:e.data)||o.message),new Error(((r=(i=o.response)==null?void 0:i.data)==null?void 0:r.error)||o.message||"Erreur lors de la récupération de la carte")}}}const Ma=new cf;const uf=()=>{const[n,t]=J.useState([]),[e,i]=J.useState(""),[r,o]=J.useState(1),[s,a]=J.useState(1),[l,c]=J.useState(!0),[u,f]=J.useState(null),[h,d]=J.useState("asc");Vt();const g=kr();J.useEffect(()=>{p()},[r]);const p=async()=>{try{c(!0),f(null);const{data:x,totalCount:T}=await Ma.searchCards(e||"*",r),S=x.filter(w=>w.rarity&&["Rare","Rare Holo","Rare Ultra","Rare Secret"].includes(w.rarity)),k=[...x,...S],P=Array.from(new Map(k.map(w=>[w.id,w])).values()),E=m(P,h);t(E),a(Math.ceil(T/20))}catch(x){console.error("Erreur lors de la recherche des cartes:",x),f("Impossible de charger les cartes. Veuillez réessayer plus tard."),t([])}finally{c(!1)}},m=(x,T)=>[...x].sort((S,k)=>{var w,A,j,M;const P=((A=(w=S.cardmarket)==null?void 0:w.prices)==null?void 0:A.averageSellPrice)||0,E=((M=(j=k.cardmarket)==null?void 0:j.prices)==null?void 0:M.averageSellPrice)||0;return T==="asc"?P-E:E-P}),y=()=>{const x=h==="asc"?"desc":"asc";d(x),t(m(n,x))},v=x=>{x.preventDefault(),o(1),p()},_=x=>{g(`/card/${x.id}`)},b=x=>x?`${x.toFixed(2)} €`:"N/A";return u?O.jsx(Ut,{children:O.jsx(nn,{severity:"error",sx:{mt:2},children:u})}):O.jsxs(Ut,{maxWidth:"xl",sx:{mt:10,mb:4},children:[O.jsxs(rt,{sx:{mb:4},children:[O.jsx(et,{variant:"h4",component:"h1",gutterBottom:!0,children:"Marketplace"}),O.jsx(et,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Découvrez notre sélection de cartes Pokémon, incluant des cartes rares et communes."})]}),O.jsx(Dt,{className:"search-bar",elevation:0,children:O.jsx("form",{onSubmit:v,children:O.jsxs(dt,{container:!0,spacing:2,alignItems:"center",children:[O.jsx(dt,{item:!0,xs:12,sm:6,md:8,children:O.jsx(Wt,{fullWidth:!0,placeholder:"Rechercher une carte...",value:e,onChange:x=>i(x.target.value),variant:"outlined",InputProps:{startAdornment:O.jsx(Fl,{position:"start",children:O.jsx(Hs,{color:"action"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"2rem",backgroundColor:"white"}}})}),O.jsx(dt,{item:!0,xs:12,sm:3,md:2,children:O.jsx(gt,{fullWidth:!0,type:"submit",variant:"contained",size:"large",sx:{borderRadius:"2rem",height:"56px",background:"linear-gradient(45deg, var(--primary-color), var(--secondary-color))"},children:"Rechercher"})}),O.jsx(dt,{item:!0,xs:12,sm:3,md:2,children:O.jsx(Vs,{title:h==="asc"?"Prix croissant":"Prix décroissant",children:O.jsx(gt,{fullWidth:!0,variant:"outlined",onClick:y,startIcon:O.jsx(ql,{}),size:"large",className:"sort-button",sx:{borderRadius:"2rem",height:"56px"},children:h==="asc"?"Prix ↑":"Prix ↓"})})})]})})}),l?O.jsx(rt,{display:"flex",justifyContent:"center",my:4,children:O.jsx(rn,{size:60,thickness:4})}):O.jsxs(rt,{className:"card-grid",mt:4,children:[O.jsx(dt,{container:!0,spacing:3,children:n.map((x,T)=>{var S,k;return O.jsx(dt,{item:!0,xs:12,sm:6,md:4,lg:3,className:"card-animation",sx:{animationDelay:`${T*.1}s`},children:O.jsxs(oe,{className:"pokemon-card",onClick:()=>_(x),children:[O.jsx(vr,{component:"img",image:x.images.small,alt:x.name,sx:{objectFit:"contain",pt:2,transform:"scale(1.1)",transition:"transform 0.3s ease"}}),O.jsxs(se,{children:[O.jsx(et,{gutterBottom:!0,variant:"h6",component:"h2",noWrap:!0,sx:{fontWeight:600,color:"var(--text-primary)"},children:x.name}),O.jsxs(et,{variant:"body2",sx:{color:"var(--text-secondary)",mb:1},children:["Set: ",x.set.name]}),O.jsx(et,{variant:"h6",className:"card-price",children:b((k=(S=x.cardmarket)==null?void 0:S.prices)==null?void 0:k.averageSellPrice)})]})]})},x.id)})}),n.length>0&&O.jsx(rt,{className:"pagination",sx:{display:"flex",justifyContent:"center"},children:O.jsx(zl,{count:s,page:r,onChange:(x,T)=>o(T),color:"primary",size:"large",sx:{"& .MuiPaginationItem-root":{fontSize:"1.1rem",fontWeight:500}}})})]})]})},ff=Er(n=>({notifications:[],addNotification:t=>{const e=Math.random().toString(36).substring(7);n(i=>({notifications:[...i.notifications,{...t,id:e}]})),setTimeout(()=>{n(i=>({notifications:i.notifications.filter(r=>r.id!==e)}))},5e3)},removeNotification:t=>n(e=>({notifications:e.notifications.filter(i=>i.id!==t)}))})),hf=()=>{const{user:n,updateProfile:t}=Vt(),{addNotification:e}=ff(),[i,r]=J.useState(!1),[o,s]=J.useState({displayName:(n==null?void 0:n.displayName)||"",email:(n==null?void 0:n.email)||"",photoURL:(n==null?void 0:n.photoURL)||""}),a=c=>{const{name:u,value:f}=c.target;s(h=>({...h,[u]:f}))},l=async c=>{c.preventDefault(),r(!0);try{await t({displayName:o.displayName,photoURL:o.photoURL}),e({message:"Profil mis à jour avec succès",type:"success"})}catch{e({message:"Erreur lors de la mise à jour du profil",type:"error"})}finally{r(!1)}};return n?O.jsx(Ut,{maxWidth:"md",children:O.jsxs(rt,{sx:{py:4},children:[O.jsx(et,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Mon Profil"}),O.jsx(Dt,{sx:{p:4,mt:4},children:O.jsxs(rt,{component:"form",onSubmit:l,sx:{display:"flex",flexDirection:"column",gap:3},children:[O.jsx(rt,{sx:{display:"flex",justifyContent:"center",mb:3},children:O.jsx(Us,{src:o.photoURL,alt:o.displayName,sx:{width:100,height:100}})}),O.jsxs(dt,{container:!0,spacing:3,children:[O.jsx(dt,{item:!0,xs:12,children:O.jsx(Wt,{fullWidth:!0,label:"Nom d'affichage",name:"displayName",value:o.displayName,onChange:a})}),O.jsx(dt,{item:!0,xs:12,children:O.jsx(Wt,{fullWidth:!0,label:"Email",name:"email",value:o.email,disabled:!0})}),O.jsx(dt,{item:!0,xs:12,children:O.jsx(Wt,{fullWidth:!0,label:"URL de la photo",name:"photoURL",value:o.photoURL,onChange:a})})]}),O.jsx(gt,{type:"submit",variant:"contained",color:"primary",disabled:i,sx:{mt:2},children:i?O.jsx(rn,{size:24}):"Mettre à jour"})]})})]})}):O.jsx(Ut,{children:O.jsx(et,{variant:"h5",align:"center",sx:{py:8},children:"Veuillez vous connecter pour accéder à votre profil"})})},df=()=>{const[n,t]=J.useState(""),[e,i]=J.useState(""),[r,o]=J.useState(null),{signIn:s,signInWithGoogle:a,error:l}=Vt(),c=kr(),u=async h=>{if(h.preventDefault(),o(null),!n||!e){o("Veuillez remplir tous les champs.");return}try{await s(n,e),c("/marketplace")}catch(d){console.error("Erreur de connexion:",d)}},f=async()=>{try{await a(),c("/marketplace")}catch(h){console.error("Erreur de connexion avec Google:",h)}};return O.jsx(Ut,{maxWidth:"sm",children:O.jsxs(Dt,{elevation:3,sx:{p:4,mt:8,display:"flex",flexDirection:"column",gap:2},children:[O.jsx(et,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Connexion"}),(r||l)&&O.jsx(nn,{severity:"error",sx:{mb:2},children:r||l}),O.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",gap:16},children:[O.jsx(Wt,{fullWidth:!0,label:"Email",type:"email",value:n,onChange:h=>t(h.target.value),required:!0,autoComplete:"email"}),O.jsx(Wt,{fullWidth:!0,label:"Mot de passe",type:"password",value:e,onChange:h=>i(h.target.value),required:!0,autoComplete:"current-password"}),O.jsx(gt,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,children:"Se connecter"})]}),O.jsx(rt,{sx:{my:2},children:O.jsx($s,{children:"ou"})}),O.jsx(gt,{variant:"outlined",onClick:f,startIcon:O.jsx(Ks,{}),fullWidth:!0,size:"large",children:"Continuer avec Google"}),O.jsx(rt,{sx:{mt:2,textAlign:"center"},children:O.jsxs(et,{variant:"body2",color:"text.secondary",children:["Pas encore de compte ?"," ",O.jsx(Ys,{component:Ct,to:"/signup",color:"primary",children:"S'inscrire"})]})})]})})},pf=()=>{const[n,t]=J.useState(""),[e,i]=J.useState(""),[r,o]=J.useState(""),[s,a]=J.useState(null),{signUp:l,signInWithGoogle:c}=Vt(),u=kr(),f=async d=>{if(d.preventDefault(),a(null),e!==r){a("Les mots de passe ne correspondent pas.");return}if(e.length<6){a("Le mot de passe doit contenir au moins 6 caractères.");return}try{await l(n,e),u("/profile")}catch(g){console.error("Erreur d'inscription:",g),g.message.includes("email-already-in-use")?a("Cette adresse email est déjà utilisée."):g.message.includes("invalid-email")?a("Adresse email invalide."):a("Erreur lors de l'inscription. Veuillez réessayer.")}},h=async()=>{try{await c(),u("/profile")}catch(d){console.error("Erreur de connexion Google:",d),a("Erreur lors de la connexion avec Google.")}};return O.jsx(Ut,{maxWidth:"sm",children:O.jsxs(Dt,{elevation:3,sx:{p:4,mt:4},children:[O.jsx(et,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Inscription"}),s&&O.jsx(nn,{severity:"error",sx:{mb:2},children:s}),O.jsxs("form",{onSubmit:f,children:[O.jsx(Wt,{label:"Email",type:"email",fullWidth:!0,margin:"normal",value:n,onChange:d=>t(d.target.value),required:!0}),O.jsx(Wt,{label:"Mot de passe",type:"password",fullWidth:!0,margin:"normal",value:e,onChange:d=>i(d.target.value),required:!0}),O.jsx(Wt,{label:"Confirmer le mot de passe",type:"password",fullWidth:!0,margin:"normal",value:r,onChange:d=>o(d.target.value),required:!0}),O.jsx(gt,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",sx:{mt:2},children:"S'inscrire"})]}),O.jsx($s,{sx:{my:3},children:"ou"}),O.jsx(gt,{variant:"outlined",fullWidth:!0,startIcon:O.jsx(Ks,{}),onClick:h,sx:{mb:2},children:"Continuer avec Google"}),O.jsx(rt,{sx:{mt:2,textAlign:"center"},children:O.jsxs(et,{variant:"body2",children:["Déjà inscrit ?"," ",O.jsx(Ys,{component:Ct,to:"/login",children:"Connectez-vous"})]})})]})})};class Ra{static async getCardPrice(t,e){try{const i=`pokemon ${e} ${t}`.toLowerCase(),r=await si.get(`${this.BASE_URL}`,{params:{t:i,format:"json"}});return r.data&&r.data.loose_price?{name:r.data.name,loose_price:r.data.loose_price,graded_price:r.data.graded_price,last_updated:r.data.last_updated}:null}catch(i){return console.error("Error fetching price from PriceCharting:",i),null}}static async comparePrice(t,e,i){const r=await this.getCardPrice(e,i);if(!r)return{tcgPrice:t,priceChartingPrice:null,difference:null,recommendation:"Prix PriceCharting non disponible"};const o=r.loose_price,s=t-o,a=s/o*100;let l="";return Math.abs(a)<=10?l="Prix compétitif (±10% du marché)":a>10?l="Prix au-dessus du marché":l="Prix en dessous du marché",{tcgPrice:t,priceChartingPrice:o,difference:s,recommendation:l}}}Ra.BASE_URL="https://www.pricecharting.com/api/product";const gf=({card:n})=>{var s,a;const[t,e]=J.useState(null),[i,r]=J.useState(!0);J.useEffect(()=>{(async()=>{var c,u;if((u=(c=n.cardmarket)==null?void 0:c.prices)!=null&&u.averageSellPrice){const f=await Ra.comparePrice(n.cardmarket.prices.averageSellPrice,n.name,n.set.name);e(f)}r(!1)})()},[n]);const o=l=>l==null?"N/A":`${l.toFixed(2)} €`;return O.jsx(oe,{elevation:3,children:O.jsxs(se,{children:[O.jsx(et,{variant:"h5",gutterBottom:!0,children:"Comparaison des prix"}),i?O.jsx(rt,{display:"flex",justifyContent:"center",my:2,children:O.jsx(rn,{})}):O.jsxs(O.Fragment,{children:[O.jsx(Hl,{component:Dt,variant:"outlined",children:O.jsxs(Wl,{children:[O.jsx(Ul,{children:O.jsxs(Fn,{children:[O.jsx(xe,{children:"Source"}),O.jsx(xe,{align:"right",children:"Prix"})]})}),O.jsxs(Vl,{children:[O.jsxs(Fn,{children:[O.jsx(xe,{children:"Pokemon TCG"}),O.jsx(xe,{align:"right",children:o((a=(s=n.cardmarket)==null?void 0:s.prices)==null?void 0:a.averageSellPrice)})]}),O.jsxs(Fn,{children:[O.jsx(xe,{children:"PriceCharting"}),O.jsx(xe,{align:"right",children:o(t==null?void 0:t.priceChartingPrice)})]}),(t==null?void 0:t.difference)&&O.jsxs(Fn,{children:[O.jsx(xe,{children:"Différence"}),O.jsx(xe,{align:"right",children:o(t.difference)})]})]})]})}),t&&O.jsx(rt,{mt:2,children:O.jsx(kn,{label:t.recommendation,color:t.recommendation.includes("compétitif")?"success":t.recommendation.includes("dessous")?"warning":"error",variant:"outlined"})}),O.jsxs(et,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"},children:["Les prix sont mis à jour régulièrement. Dernière mise à jour : ",new Date().toLocaleDateString()]})]})]})})},ai={apiKey:"AIzaSyDrqUfwjpKjyEwpuZGTCxbvfhKWdHAHAHX",authDomain:"pokemon-tcg-marketplace.firebaseapp.com",projectId:"pokemon-tcg-marketplace",storageBucket:"pokemon-tcg-marketplace.appspot.com",messagingSenderId:"433238130897",appId:"1:433238130897:web:0b3faf40c5d0b71d2985f0"};console.log("Firebase Config:",{apiKey:ai.apiKey?"Present":"Missing",authDomain:ai.authDomain?"Present":"Missing",projectId:ai.projectId?"Present":"Missing"});const La=ea(ai),mf=Ne(La),bt=na(La);mf.useDeviceLanguage();const yf=()=>{const{user:n}=Vt(),[t,e]=J.useState([]),[i,r]=J.useState(!0);return J.useEffect(()=>{if(!n){e([]),r(!1);return}(async()=>{try{const c=Be(ae(bt,"collections"),we("userId","==",n.uid)),f=(await Fe(c)).docs.map(h=>h.data().cardId);e(f)}catch(c){console.error("Error fetching collection:",c)}finally{r(!1)}})()},[n]),{userCollection:t,loading:i,addToCollection:async l=>{if(n)try{await ia(ae(bt,"collections"),{userId:n.uid,cardId:l,addedAt:new Date().toISOString()}),e(c=>[...c,l])}catch(c){throw console.error("Error adding to collection:",c),c}},removeFromCollection:async l=>{if(n)try{const c=Be(ae(bt,"collections"),we("userId","==",n.uid),we("cardId","==",l)),f=(await Fe(c)).docs[0];f&&(await ra(Nt(bt,"collections",f.id)),e(h=>h.filter(d=>d!==l)))}catch(c){throw console.error("Error removing from collection:",c),c}},isInCollection:l=>t.includes(l)}},vf=()=>{const{id:n}=sc(),[t,e]=J.useState(null),[i,r]=J.useState(!0),{user:o}=Vt(),{addToCollection:s}=yf(),{addToFavorites:a,favorites:l}=aa(),[c,u]=J.useState(null);J.useEffect(()=>{(async()=>{if(n)try{r(!0);const p=await Ma.getCard(n);e(p),u(null)}catch(p){console.error("Error fetching card:",p),u("Erreur lors du chargement de la carte")}finally{r(!1)}})()},[n]);const f=async()=>{if(!(!t||!o))try{await s(t)}catch(g){console.error("Error adding to collection:",g),u("Erreur lors de l'ajout à la collection")}},h=async()=>{if(!(!t||!o))try{await a(t)}catch(g){console.error("Error adding to favorites:",g),u("Erreur lors de l'ajout aux favoris")}};if(i)return O.jsx(rt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:O.jsx(rn,{})});if(c||!t)return O.jsx(Ut,{children:O.jsx(et,{color:"error",align:"center",children:c||"Carte non trouvée"})});const d=l.some(g=>g.id===t.id);return O.jsx(Ut,{maxWidth:"lg",sx:{mt:4,mb:4},children:O.jsxs(dt,{container:!0,spacing:4,children:[O.jsx(dt,{item:!0,xs:12,md:6,children:O.jsx(Dt,{elevation:3,sx:{p:2,textAlign:"center"},children:O.jsx("img",{src:t.images.large,alt:t.name,style:{maxWidth:"100%",height:"auto"}})})}),O.jsx(dt,{item:!0,xs:12,md:6,children:O.jsxs(Dt,{elevation:3,sx:{p:3},children:[O.jsx(et,{variant:"h4",gutterBottom:!0,children:t.name}),O.jsxs(et,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:["Set: ",t.set.name," (",t.set.series,")"]}),t.rarity&&O.jsxs(et,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Rareté: ",t.rarity]}),O.jsx(rt,{sx:{mt:3,mb:4},children:O.jsx(gf,{card:t})}),o&&O.jsxs(rt,{sx:{mt:3,display:"flex",gap:2},children:[O.jsx(gt,{variant:"contained",startIcon:O.jsx(br,{}),onClick:f,fullWidth:!0,children:"Ajouter à ma collection"}),O.jsx(gt,{variant:"outlined",startIcon:O.jsx(Ws,{}),onClick:h,color:d?"secondary":"primary",fullWidth:!0,children:d?"Retirer des favoris":"Ajouter aux favoris"})]})]})})]})})},bf=()=>{const[n,t]=J.useState([]),[e,i]=J.useState(null),[r,o]=J.useState(""),[s,a]=J.useState(!0),[l,c]=J.useState(null),[u,f]=J.useState(null),[h,d]=J.useState("keep"),[g,p]=J.useState("1"),{user:m}=Vt();J.useEffect(()=>{m?y():(t([]),a(!1))},[m]);const y=async()=>{if(m)try{a(!0),c(null);const b=Be(ae(bt,"collection"),we("userId","==",m.uid)),T=(await Fe(b)).docs.map(S=>({...S.data(),docId:S.id}));t(T)}catch(b){console.error("Erreur lors du chargement de la collection:",b),c("Impossible de charger votre collection. Veuillez réessayer plus tard.")}finally{a(!1)}},v=async()=>{if(!(!e||!m))try{const b=Nt(bt,"collection",e.docId);await Jt(b,{status:h,price:h==="sell"?parseFloat(r):null,quantity:parseInt(g)}),f("Carte mise à jour avec succès !"),y(),i(null)}catch(b){console.error("Erreur lors de la mise à jour de la carte:",b),c("Impossible de mettre à jour la carte. Veuillez réessayer.")}},_=async b=>{if(m)try{await ra(Nt(bt,"collection",b)),f("Carte supprimée avec succès !"),y()}catch(x){console.error("Erreur lors de la suppression de la carte:",x),c("Impossible de supprimer la carte. Veuillez réessayer.")}};return m?O.jsxs(Ut,{maxWidth:"lg",children:[O.jsxs(rt,{sx:{py:4},children:[O.jsx(et,{variant:"h4",component:"h1",gutterBottom:!0,children:"Ma Collection"}),l&&O.jsx(nn,{severity:"error",sx:{mb:2},children:l}),s?O.jsx(rt,{sx:{display:"flex",justifyContent:"center",py:4},children:O.jsx(rn,{})}):n.length===0?O.jsx(et,{variant:"body1",sx:{textAlign:"center",py:4},children:"Votre collection est vide. Ajoutez des cartes depuis le Marketplace !"}):O.jsx(dt,{container:!0,spacing:3,children:n.map(b=>O.jsx(dt,{item:!0,xs:12,sm:6,md:4,lg:3,children:O.jsxs(oe,{children:[O.jsx(vr,{component:"img",image:b.images.small,alt:b.name,sx:{objectFit:"contain",cursor:"pointer"},onClick:()=>i(b)}),O.jsxs(se,{children:[O.jsx(et,{variant:"h6",gutterBottom:!0,children:b.name}),O.jsxs(et,{variant:"body2",color:"text.secondary",children:["Status: ",b.status]}),O.jsxs(et,{variant:"body2",color:"text.secondary",children:["Quantité: ",b.quantity]}),b.status==="sell"&&b.price&&O.jsxs(et,{variant:"body2",color:"text.secondary",children:["Prix: ",b.price,"€"]}),O.jsxs(rt,{sx:{mt:2},children:[O.jsx(gt,{size:"small",variant:"outlined",onClick:()=>i(b),children:"Modifier"}),O.jsx(gt,{size:"small",color:"error",onClick:()=>_(b.docId),sx:{ml:1},children:"Supprimer"})]})]})]})},b.docId))})]}),O.jsxs(xr,{open:!!e,onClose:()=>i(null),children:[O.jsx(_r,{children:"Modifier la carte"}),O.jsx(wr,{children:O.jsxs(rt,{sx:{pt:2},children:[O.jsxs(Gs,{fullWidth:!0,sx:{mb:2},children:[O.jsx(Xs,{children:"Status"}),O.jsxs(Zs,{value:h,label:"Status",onChange:b=>d(b.target.value),children:[O.jsx(me,{value:"keep",children:"Garder"}),O.jsx(me,{value:"sell",children:"Vendre"}),O.jsx(me,{value:"trade",children:"Échanger"})]})]}),h==="sell"&&O.jsx(Wt,{label:"Prix (€)",type:"number",fullWidth:!0,value:r,onChange:b=>o(b.target.value),sx:{mb:2}}),O.jsx(Wt,{label:"Quantité",type:"number",fullWidth:!0,value:g,onChange:b=>p(b.target.value),inputProps:{min:1}})]})}),O.jsxs(Or,{children:[O.jsx(gt,{onClick:()=>i(null),children:"Annuler"}),O.jsx(gt,{onClick:v,variant:"contained",children:"Sauvegarder"})]})]}),O.jsx(Sr,{open:!!u,autoHideDuration:3e3,onClose:()=>f(null),message:u})]}):O.jsx(Ut,{maxWidth:"lg",children:O.jsx(rt,{sx:{py:4,textAlign:"center"},children:O.jsx(et,{variant:"h5",gutterBottom:!0,children:"Connectez-vous pour voir votre collection"})})})},Oe={async moderatePost(n,t,e){const i=Nt(bt,"posts",n),r=t==="approve"?"published":"rejected";await Jt(i,{status:r,moderationComment:e,...r==="published"&&{publishedAt:new Date}})},async reportComment(n,t,e){const i=Nt(bt,"posts",n),r=await fi(i);if(r.exists()){const s=r.data().comments.map(a=>a.id===t?{...a,isReported:!0,reportReason:e,moderationStatus:"pending"}:a);await Jt(i,{comments:s})}},async moderateComment(n,t,e){const i=Nt(bt,"posts",n),r=await fi(i);if(r.exists()){const s=r.data().comments.map(a=>a.id===t?{...a,moderationStatus:e}:a);await Jt(i,{comments:s})}},async getPendingPosts(){const n=Be(ae(bt,"posts"),we("status","==","pending"));return(await Fe(n)).docs.map(e=>({id:e.id,...e.data()}))},async getReportedComments(){const n=Be(ae(bt,"posts"),we("comments","array-contains",{isReported:!0})),t=await Fe(n),e=[];return t.docs.forEach(i=>{const r={id:i.id,...i.data()};r.comments.filter(o=>o.isReported).forEach(o=>{e.push({post:r,comment:o})})}),e},async saveDraft(n){const t=ae(bt,"posts"),e={...n,status:"draft",isDraft:!0,timestamp:new Date,lastModifiedAt:new Date,likes:[],comments:[]};return(await addDoc(t,e)).id},async publishDraft(n){const t=Nt(bt,"posts",n);await Jt(t,{status:"pending",isDraft:!1,lastModifiedAt:new Date})},async getDrafts(n){const t=Be(ae(bt,"posts"),we("authorId","==",n),we("isDraft","==",!0));return(await Fe(t)).docs.map(i=>({id:i.id,...i.data()}))}},Na=J.createContext(void 0),xf=({children:n})=>{const[t,e]=J.useState(null),[i,r]=J.useState(!1),o=J.useCallback(a=>{e(a),r(!0)},[]),s=()=>{r(!1)};return O.jsxs(Na.Provider,{value:{showNotification:o},children:[n,t&&O.jsx(Sr,{open:i,autoHideDuration:6e3,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:O.jsx(nn,{onClose:s,severity:t.type,variant:"filled",sx:{width:"100%"},children:t.message})})]})},Rr=()=>{const n=J.useContext(Na);if(n===void 0)throw new Error("useNotification must be used within a NotificationProvider");return n};function ko(n){const{children:t,value:e,index:i,...r}=n;return O.jsx("div",{role:"tabpanel",hidden:e!==i,id:`moderation-tabpanel-${i}`,"aria-labelledby":`moderation-tab-${i}`,...r,children:e===i&&O.jsx(rt,{sx:{p:3},children:t})})}const _f=()=>{const[n,t]=J.useState(0),[e,i]=J.useState([]),[r,o]=J.useState([]),[s,a]=J.useState({open:!1,type:"post",item:null}),[l,c]=J.useState(""),{showNotification:u}=Rr();J.useEffect(()=>{f()},[]);const f=async()=>{try{const g=await Oe.getPendingPosts(),p=await Oe.getReportedComments();i(g),o(p)}catch{u("Error loading moderation data","error")}},h=(g,p)=>{t(p)},d=async g=>{try{s.type==="post"&&s.item?await Oe.moderatePost(s.item.id,g,l):s.type==="comment"&&s.item&&s.postId&&await Oe.moderateComment(s.postId,s.item.id,g),u(`Successfully ${g}ed ${s.type}`,"success"),a({open:!1,type:"post",item:null}),c(""),f()}catch{u(`Error ${g}ing ${s.type}`,"error")}};return O.jsxs(Dt,{sx:{width:"100%",p:2},children:[O.jsx(et,{variant:"h5",gutterBottom:!0,children:"Moderation Dashboard"}),O.jsx(rt,{sx:{borderBottom:1,borderColor:"divider"},children:O.jsxs(Js,{value:n,onChange:h,children:[O.jsx(bn,{label:`Pending Posts (${e.length})`}),O.jsx(bn,{label:`Reported Comments (${r.length})`})]})}),O.jsx(ko,{value:n,index:0,children:O.jsx(eo,{children:e.map(g=>O.jsx(no,{secondaryAction:O.jsxs(rt,{children:[O.jsx(Ht,{color:"success",onClick:()=>a({open:!0,type:"post",item:g}),children:O.jsx(io,{})}),O.jsx(Ht,{color:"error",onClick:()=>a({open:!0,type:"post",item:g}),children:O.jsx(ro,{})})]}),children:O.jsx(oo,{primary:g.title,secondary:O.jsxs(O.Fragment,{children:[O.jsxs(et,{component:"span",variant:"body2",children:["By ",g.author," • ",new Date(g.timestamp).toLocaleDateString()]}),O.jsx("br",{}),O.jsx(kn,{size:"small",label:g.category}),g.tags.map(p=>O.jsx(kn,{size:"small",label:p,sx:{ml:1}},p))]})})},g.id))})}),O.jsx(ko,{value:n,index:1,children:O.jsx(eo,{children:r.map(({post:g,comment:p})=>O.jsx(no,{secondaryAction:O.jsxs(rt,{children:[O.jsx(Ht,{color:"success",onClick:()=>a({open:!0,type:"comment",item:p,postId:g.id}),children:O.jsx(io,{})}),O.jsx(Ht,{color:"error",onClick:()=>a({open:!0,type:"comment",item:p,postId:g.id}),children:O.jsx(ro,{})})]}),children:O.jsx(oo,{primary:O.jsxs(O.Fragment,{children:[O.jsx($l,{color:"error",sx:{mr:1,verticalAlign:"middle"}}),p.content]}),secondary:O.jsxs(O.Fragment,{children:[O.jsxs(et,{component:"span",variant:"body2",children:["By ",p.author," • ",new Date(p.timestamp).toLocaleDateString()]}),O.jsx("br",{}),O.jsxs(et,{component:"span",variant:"body2",color:"error",children:["Reported for: ",p.reportReason]}),O.jsx("br",{}),O.jsxs(et,{component:"span",variant:"body2",children:["On post: ",g.title]})]})})},p.id))})}),O.jsxs(xr,{open:s.open,onClose:()=>a({open:!1,type:"post",item:null}),children:[O.jsx(_r,{children:s.type==="post"?"Moderate Post":"Moderate Comment"}),O.jsx(wr,{children:O.jsx(Wt,{autoFocus:!0,margin:"dense",label:"Moderation Comment",fullWidth:!0,multiline:!0,rows:4,value:l,onChange:g=>c(g.target.value)})}),O.jsxs(Or,{children:[O.jsx(gt,{onClick:()=>d("reject"),color:"error",children:"Reject"}),O.jsx(gt,{onClick:()=>d("approve"),color:"success",children:"Approve"})]})]})]})},wf={async trackPageView(n,t,e){var a,l;const i=ae(bt,"postViews");await ia(i,{postId:n,userId:t,timestamp:new Date,sessionId:Of(),...e});const o=Nt(bt,"postStats",n),s=await getDoc(o);if(s.exists()){const c=s.data(),u={views:c.views+1,uniqueVisitors:t?c.uniqueVisitors:c.uniqueVisitors+1,deviceStats:{...c.deviceStats,[e.type]:(c.deviceStats[e.type]||0)+1}};e.country&&(u.demographicData={...c.demographicData,countries:{...(a=c.demographicData)==null?void 0:a.countries,[e.country]:(((l=c.demographicData)==null?void 0:l.countries[e.country])||0)+1}}),await Jt(o,u)}},async getPostStats(n){const t=Nt(bt,"postStats",n),e=await getDoc(t);return e.exists()?e.data():{views:0,readTime:0,shares:0,uniqueVisitors:0,deviceStats:{desktop:0,mobile:0,tablet:0},engagementMetrics:{averageTimeOnPage:0,bounceRate:0,commentRate:0}}},async updateEngagementMetrics(n,t){const e=Nt(bt,"postStats",n),i=await getDoc(e);if(i.exists()){const r=i.data(),o={...r.engagementMetrics};if(t.timeOnPage){const s=r.engagementMetrics.averageTimeOnPage*r.views;o.averageTimeOnPage=(s+t.timeOnPage)/(r.views+1)}if(t.bounced!==void 0){const s=r.engagementMetrics.bounceRate*r.views;o.bounceRate=(s+(t.bounced?1:0))/(r.views+1)}if(t.commented!==void 0){const s=r.engagementMetrics.commentRate*r.views;o.commentRate=(s+(t.commented?1:0))/(r.views+1)}await Jt(e,{engagementMetrics:o})}},async getPopularPosts(n=5){const t=Be(ae(bt,"postStats"),orderBy("views","desc"),n(n));return(await Fe(t)).docs.map(i=>({postId:i.id,stats:i.data()}))}};function Of(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Dn(n){return n+.5|0}const Se=(n,t,e)=>Math.max(Math.min(n,e),t);function pn(n){return Se(Dn(n*2.55),0,255)}function Ee(n){return Se(Dn(n*255),0,255)}function ge(n){return Se(Dn(n/2.55)/100,0,1)}function Eo(n){return Se(Dn(n*100),0,100)}const Gt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},cr=[..."0123456789ABCDEF"],Sf=n=>cr[n&15],kf=n=>cr[(n&240)>>4]+cr[n&15],zn=n=>(n&240)>>4===(n&15),Ef=n=>zn(n.r)&&zn(n.g)&&zn(n.b)&&zn(n.a);function Af(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Gt[n[1]]*17,g:255&Gt[n[2]]*17,b:255&Gt[n[3]]*17,a:t===5?Gt[n[4]]*17:255}:(t===7||t===9)&&(e={r:Gt[n[1]]<<4|Gt[n[2]],g:Gt[n[3]]<<4|Gt[n[4]],b:Gt[n[5]]<<4|Gt[n[6]],a:t===9?Gt[n[7]]<<4|Gt[n[8]]:255})),e}const Tf=(n,t)=>n<255?t(n):"";function Pf(n){var t=Ef(n)?Sf:kf;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Tf(n.a,t):void 0}const jf=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Da(n,t,e){const i=t*Math.min(e,1-e),r=(o,s=(o+n/30)%12)=>e-i*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function Cf(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function Mf(n,t,e){const i=Da(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function Rf(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function Lr(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),s=Math.min(e,i,r),a=(o+s)/2;let l,c,u;return o!==s&&(u=o-s,c=a>.5?u/(2-o-s):u/(o+s),l=Rf(e,i,r,u,o),l=l*60+.5),[l|0,c||0,a]}function Nr(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Ee)}function Dr(n,t,e){return Nr(Da,n,t,e)}function Lf(n,t,e){return Nr(Mf,n,t,e)}function Nf(n,t,e){return Nr(Cf,n,t,e)}function Ia(n){return(n%360+360)%360}function Df(n){const t=jf.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?pn(+t[5]):Ee(+t[5]));const r=Ia(+t[2]),o=+t[3]/100,s=+t[4]/100;return t[1]==="hwb"?i=Lf(r,o,s):t[1]==="hsv"?i=Nf(r,o,s):i=Dr(r,o,s),{r:i[0],g:i[1],b:i[2],a:e}}function If(n,t){var e=Lr(n);e[0]=Ia(e[0]+t),e=Dr(e),n.r=e[0],n.g=e[1],n.b=e[2]}function Bf(n){if(!n)return;const t=Lr(n),e=t[0],i=Eo(t[1]),r=Eo(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${ge(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const Ao={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},To={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ff(){const n={},t=Object.keys(To),e=Object.keys(Ao);let i,r,o,s,a;for(i=0;i<t.length;i++){for(s=a=t[i],r=0;r<e.length;r++)o=e[r],a=a.replace(o,Ao[o]);o=parseInt(To[s],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}let Hn;function qf(n){Hn||(Hn=Ff(),Hn.transparent=[0,0,0,0]);const t=Hn[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const zf=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Hf(n){const t=zf.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const s=+t[7];e=t[8]?pn(s):Se(s*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?pn(i):Se(i,0,255)),r=255&(t[4]?pn(r):Se(r,0,255)),o=255&(t[6]?pn(o):Se(o,0,255)),{r:i,g:r,b:o,a:e}}}function Wf(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ge(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const $i=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ve=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Uf(n,t,e){const i=Ve(ge(n.r)),r=Ve(ge(n.g)),o=Ve(ge(n.b));return{r:Ee($i(i+e*(Ve(ge(t.r))-i))),g:Ee($i(r+e*(Ve(ge(t.g))-r))),b:Ee($i(o+e*(Ve(ge(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Wn(n,t,e){if(n){let i=Lr(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Dr(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Ba(n,t){return n&&Object.assign(t||{},n)}function Po(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Ee(n[3]))):(t=Ba(n,{r:0,g:0,b:0,a:1}),t.a=Ee(t.a)),t}function Vf(n){return n.charAt(0)==="r"?Hf(n):Df(n)}class Tn{constructor(t){if(t instanceof Tn)return t;const e=typeof t;let i;e==="object"?i=Po(t):e==="string"&&(i=Af(t)||qf(t)||Vf(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Ba(this._rgb);return t&&(t.a=ge(t.a)),t}set rgb(t){this._rgb=Po(t)}rgbString(){return this._valid?Wf(this._rgb):void 0}hexString(){return this._valid?Pf(this._rgb):void 0}hslString(){return this._valid?Bf(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const s=e===o?.5:e,a=2*s-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,i.r=255&c*i.r+o*r.r+.5,i.g=255&c*i.g+o*r.g+.5,i.b=255&c*i.b+o*r.b+.5,i.a=s*i.a+(1-s)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Uf(this._rgb,t._rgb,e)),this}clone(){return new Tn(this.rgb)}alpha(t){return this._rgb.a=Ee(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Dn(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Wn(this._rgb,2,t),this}darken(t){return Wn(this._rgb,2,-t),this}saturate(t){return Wn(this._rgb,1,t),this}desaturate(t){return Wn(this._rgb,1,-t),this}rotate(t){return If(this._rgb,t),this}}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function he(){}const $f=(()=>{let n=0;return()=>n++})();function xt(n){return n===null||typeof n>"u"}function St(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Mt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function $t(n,t){return Mt(n)?n:t}function ft(n,t){return typeof n>"u"?t:n}const Kf=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,Fa=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function vt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function yt(n,t,e,i){let r,o,s;if(St(n))if(o=n.length,i)for(r=o-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<o;r++)t.call(e,n[r],r);else if(pt(n))for(s=Object.keys(n),o=s.length,r=0;r<o;r++)t.call(e,n[s[r]],s[r])}function gi(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function mi(n){if(St(n))return n.map(mi);if(pt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=mi(n[e[r]]);return t}return n}function qa(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Yf(n,t,e,i){if(!qa(n))return;const r=t[n],o=e[n];pt(r)&&pt(o)?Pn(r,o,i):t[n]=mi(o)}function Pn(n,t,e){const i=St(t)?t:[t],r=i.length;if(!pt(n))return n;e=e||{};const o=e.merger||Yf;let s;for(let a=0;a<r;++a){if(s=i[a],!pt(s))continue;const l=Object.keys(s);for(let c=0,u=l.length;c<u;++c)o(l[c],n,s,e)}return n}function xn(n,t){return Pn(n,t,{merger:Gf})}function Gf(n,t,e){if(!qa(n))return;const i=t[n],r=e[n];pt(i)&&pt(r)?xn(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=mi(r))}const jo={"":n=>n,x:n=>n.x,y:n=>n.y};function Xf(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Zf(n){const t=Xf(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function jn(n,t){return(jo[t]||(jo[t]=Zf(t)))(n)}function Ir(n){return n.charAt(0).toUpperCase()+n.slice(1)}const yi=n=>typeof n<"u",Ae=n=>typeof n=="function",Co=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Jf(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const wt=Math.PI,_t=2*wt,Qf=_t+wt,vi=Number.POSITIVE_INFINITY,th=wt/180,Et=wt/2,Pe=wt/4,Mo=wt*2/3,ke=Math.log10,Qe=Math.sign;function _n(n,t,e){return Math.abs(n-t)<e}function Ro(n){const t=Math.round(n);n=_n(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(ke(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function eh(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function Cn(n){return!isNaN(parseFloat(n))&&isFinite(n)}function nh(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function za(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function le(n){return n*(wt/180)}function Br(n){return n*(180/wt)}function Lo(n){if(!Mt(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Ha(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*wt&&(o+=_t),{angle:o,distance:r}}function ur(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function ih(n,t){return(n-t+Qf)%_t-wt}function Zt(n){return(n%_t+_t)%_t}function Mn(n,t,e,i){const r=Zt(n),o=Zt(t),s=Zt(e),a=Zt(o-r),l=Zt(s-r),c=Zt(r-o),u=Zt(r-s);return r===o||r===s||i&&o===s||a>l&&c<u}function Bt(n,t,e){return Math.max(t,Math.min(e,n))}function rh(n){return Bt(n,-32768,32767)}function Ke(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Fr(n,t,e){e=e||(s=>n[s]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const Ie=(n,t,e,i)=>Fr(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),oh=(n,t,e)=>Fr(n,e,i=>n[i][t]>=e);function sh(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const Wa=["push","pop","shift","splice","unshift"];function ah(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Wa.forEach(e=>{const i="_onData"+Ir(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const s=r.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...o)}),s}})})}function No(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(Wa.forEach(o=>{delete n[o]}),delete n._chartjs)}function lh(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Ua=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Va(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,Ua.call(window,()=>{i=!1,n.apply(t,e)}))}}function ch(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const qr=n=>n==="start"?"left":n==="end"?"right":"center",Rt=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,uh=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function fh(n,t,e){const i=t.length;let r=0,o=i;if(n._sorted){const{iScale:s,_parsed:a}=n,l=s.axis,{min:c,max:u,minDefined:f,maxDefined:h}=s.getUserBounds();f&&(r=Bt(Math.min(Ie(a,l,c).lo,e?i:Ie(t,l,s.getPixelForValue(c)).lo),0,i-1)),h?o=Bt(Math.max(Ie(a,s.axis,u,!0).hi+1,e?0:Ie(t,l,s.getPixelForValue(u),!0).hi+1),r,i)-r:o=i-r}return{start:r,count:o}}function hh(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),o}const Un=n=>n===0||n===1,Do=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*_t/e)),Io=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*_t/e)+1,wn={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Et)+1,easeOutSine:n=>Math.sin(n*Et),easeInOutSine:n=>-.5*(Math.cos(wt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Un(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Un(n)?n:Do(n,.075,.3),easeOutElastic:n=>Un(n)?n:Io(n,.075,.3),easeInOutElastic(n){return Un(n)?n:n<.5?.5*Do(n*2,.1125,.45):.5+.5*Io(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-wn.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?wn.easeInBounce(n*2)*.5:wn.easeOutBounce(n*2-1)*.5+.5};function zr(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Bo(n){return zr(n)?n:new Tn(n)}function Ki(n){return zr(n)?n:new Tn(n).saturate(.5).darken(.1).hexString()}const dh=["x","y","borderWidth","radius","tension"],ph=["color","borderColor","backgroundColor"];function gh(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:ph},numbers:{type:"number",properties:dh}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function mh(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Fo=new Map;function yh(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Fo.get(e);return i||(i=new Intl.NumberFormat(n,t),Fo.set(e,i)),i}function Di(n,t,e){return yh(t,e).format(n)}const $a={values(n){return St(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),o=vh(n,e)}const s=ke(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Di(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(ke(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?$a.numeric.call(this,n,t,e):""}};function vh(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Ii={formatters:$a};function bh(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ii.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const He=Object.create(null),fr=Object.create(null);function On(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Yi(n,t,e){return typeof t=="string"?Pn(On(n,t),e):Pn(On(n,""),t)}class xh{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Ki(r.backgroundColor),this.hoverBorderColor=(i,r)=>Ki(r.borderColor),this.hoverColor=(i,r)=>Ki(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Yi(this,t,e)}get(t){return On(this,t)}describe(t,e){return Yi(fr,t,e)}override(t,e){return Yi(He,t,e)}route(t,e,i,r){const o=On(this,t),s=On(this,i),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=s[r];return pt(l)?Object.assign({},c,l):ft(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var kt=new xh({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gh,mh,bh]);function _h(n){return!n||xt(n.size)||xt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function bi(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function wh(n,t,e,i){i=i||{};let r=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},o=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let s=0;const a=e.length;let l,c,u,f,h;for(l=0;l<a;l++)if(f=e[l],f!=null&&!St(f))s=bi(n,r,o,s,f);else if(St(f))for(c=0,u=f.length;c<u;c++)h=f[c],h!=null&&!St(h)&&(s=bi(n,r,o,s,h));n.restore();const d=o.length/2;if(d>e.length){for(l=0;l<d;l++)delete r[o[l]];o.splice(0,d)}return s}function je(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function qo(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function hr(n,t,e,i){Ka(n,t,e,i,null)}function Ka(n,t,e,i,r){let o,s,a,l,c,u,f,h;const d=t.pointStyle,g=t.rotation,p=t.radius;let m=(g||0)*th;if(d&&typeof d=="object"&&(o=d.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(m),n.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),d){default:r?n.ellipse(e,i,r/2,p,0,0,_t):n.arc(e,i,p,0,_t),n.closePath();break;case"triangle":u=r?r/2:p,n.moveTo(e+Math.sin(m)*u,i-Math.cos(m)*p),m+=Mo,n.lineTo(e+Math.sin(m)*u,i-Math.cos(m)*p),m+=Mo,n.lineTo(e+Math.sin(m)*u,i-Math.cos(m)*p),n.closePath();break;case"rectRounded":c=p*.516,l=p-c,s=Math.cos(m+Pe)*l,f=Math.cos(m+Pe)*(r?r/2-c:l),a=Math.sin(m+Pe)*l,h=Math.sin(m+Pe)*(r?r/2-c:l),n.arc(e-f,i-a,c,m-wt,m-Et),n.arc(e+h,i-s,c,m-Et,m),n.arc(e+f,i+a,c,m,m+Et),n.arc(e-h,i+s,c,m+Et,m+wt),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,u=r?r/2:l,n.rect(e-u,i-l,2*u,2*l);break}m+=Pe;case"rectRot":f=Math.cos(m)*(r?r/2:p),s=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(r?r/2:p),n.moveTo(e-f,i-a),n.lineTo(e+h,i-s),n.lineTo(e+f,i+a),n.lineTo(e-h,i+s),n.closePath();break;case"crossRot":m+=Pe;case"cross":f=Math.cos(m)*(r?r/2:p),s=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(r?r/2:p),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+h,i-s),n.lineTo(e-h,i+s);break;case"star":f=Math.cos(m)*(r?r/2:p),s=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(r?r/2:p),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+h,i-s),n.lineTo(e-h,i+s),m+=Pe,f=Math.cos(m)*(r?r/2:p),s=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(r?r/2:p),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+h,i-s),n.lineTo(e-h,i+s);break;case"line":s=r?r/2:Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(e-s,i-a),n.lineTo(e+s,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(m)*(r?r/2:p),i+Math.sin(m)*p);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ye(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Hr(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Wr(n){n.restore()}function Oh(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Sh(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function kh(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),xt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Eh(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),s=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,c=e+o.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(s,u),n.lineTo(a,u),n.stroke()}}function Ah(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function We(n,t,e,i,r,o={}){const s=St(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,kh(n,o),l=0;l<s.length;++l)c=s[l],o.backdrop&&Ah(n,o.backdrop),a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),xt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(c,e,i,o.maxWidth)),n.fillText(c,e,i,o.maxWidth),Eh(n,e,i,c,o),i+=Number(r.lineHeight);n.restore()}function xi(n,t){const{x:e,y:i,w:r,h:o,radius:s}=t;n.arc(e+s.topLeft,i+s.topLeft,s.topLeft,1.5*wt,wt,!0),n.lineTo(e,i+o-s.bottomLeft),n.arc(e+s.bottomLeft,i+o-s.bottomLeft,s.bottomLeft,wt,Et,!0),n.lineTo(e+r-s.bottomRight,i+o),n.arc(e+r-s.bottomRight,i+o-s.bottomRight,s.bottomRight,Et,0,!0),n.lineTo(e+r,i+s.topRight),n.arc(e+r-s.topRight,i+s.topRight,s.topRight,0,-Et,!0),n.lineTo(e+s.topLeft,i)}const Th=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ph=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function jh(n,t){const e=(""+n).match(Th);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Ch=n=>+n||0;function Ur(n,t){const e={},i=pt(t),r=i?Object.keys(t):t,o=pt(n)?i?s=>ft(n[s],n[t[s]]):s=>n[s]:()=>n;for(const s of r)e[s]=Ch(o(s));return e}function Mh(n){return Ur(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Xe(n){return Ur(n,["topLeft","topRight","bottomLeft","bottomRight"])}function It(n){const t=Mh(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function jt(n,t){n=n||{},t=t||kt.font;let e=ft(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=ft(n.style,t.style);i&&!(""+i).match(Ph)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ft(n.family,t.family),lineHeight:jh(ft(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:ft(n.weight,t.weight),string:""};return r.string=_h(r),r}function Vn(n,t,e,i){let r=!0,o,s,a;for(o=0,s=n.length;o<s;++o)if(a=n[o],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),e!==void 0&&St(a)&&(a=a[e%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function Rh(n,t,e){const{min:i,max:r}=n,o=Fa(t,(r-i)/2),s=(a,l)=>e&&a===0?0:a+l;return{min:s(i,-Math.abs(o)),max:s(r,o)}}function Te(n,t){return Object.assign(Object.create(n),t)}function Vr(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=Za("_fallback",n));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:a=>Vr([a,...n],t,o,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return Ga(a,l,()=>zh(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return Ho(a).includes(l)},ownKeys(a){return Ho(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function tn(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Ya(n,i),setContext:o=>tn(n,o,e,i),override:o=>tn(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,s){return delete o[s],delete n[s],!0},get(o,s,a){return Ga(o,s,()=>Nh(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(n,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,s)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,s){return Reflect.has(n,s)},ownKeys(){return Reflect.ownKeys(n)},set(o,s,a){return n[s]=a,delete o[s],!0}})}function Ya(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Ae(e)?e:()=>e,isIndexable:Ae(i)?i:()=>i}}const Lh=(n,t)=>n?n+Ir(t):t,$r=(n,t)=>pt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Ga(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function Nh(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:s}=n;let a=i[t];return Ae(a)&&s.isScriptable(t)&&(a=Dh(t,a,n,e)),St(a)&&a.length&&(a=Ih(t,a,n,s.isIndexable)),$r(t,a)&&(a=tn(a,r,o&&o[t],s)),a}function Dh(n,t,e,i){const{_proxy:r,_context:o,_subProxy:s,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(o,s||i);return a.delete(n),$r(n,l)&&(l=Kr(r._scopes,r,n,l)),l}function Ih(n,t,e,i){const{_proxy:r,_context:o,_subProxy:s,_descriptors:a}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(pt(t[0])){const l=t,c=r._scopes.filter(u=>u!==l);t=[];for(const u of l){const f=Kr(c,r,n,u);t.push(tn(f,o,s&&s[n],a))}}return t}function Xa(n,t,e){return Ae(n)?n(t,e):n}const Bh=(n,t)=>n===!0?t:typeof n=="string"?jn(t,n):void 0;function Fh(n,t,e,i,r){for(const o of t){const s=Bh(e,o);if(s){n.add(s);const a=Xa(s._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(s===!1&&typeof i<"u"&&e!==i)return null}return!1}function Kr(n,t,e,i){const r=t._rootScopes,o=Xa(t._fallback,e,i),s=[...n,...r],a=new Set;a.add(i);let l=zo(a,s,e,o||e,i);return l===null||typeof o<"u"&&o!==e&&(l=zo(a,s,o,l,i),l===null)?!1:Vr(Array.from(a),[""],r,o,()=>qh(t,e,i))}function zo(n,t,e,i,r){for(;e;)e=Fh(n,t,e,i,r);return e}function qh(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return St(r)&&pt(e)?e:r||{}}function zh(n,t,e,i){let r;for(const o of t)if(r=Za(Lh(o,n),e),typeof r<"u")return $r(n,r)?Kr(e,i,n,r):r}function Za(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function Ho(n){let t=n._keys;return t||(t=n._keys=Hh(n._scopes)),t}function Hh(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}const Wh=Number.EPSILON||1e-14,en=(n,t)=>t<n.length&&!n[t].skip&&n[t],Ja=n=>n==="x"?"y":"x";function Uh(n,t,e,i){const r=n.skip?t:n,o=t,s=e.skip?t:e,a=ur(o,r),l=ur(s,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=i*c,h=i*u;return{previous:{x:o.x-f*(s.x-r.x),y:o.y-f*(s.y-r.y)},next:{x:o.x+h*(s.x-r.x),y:o.y+h*(s.y-r.y)}}}function Vh(n,t,e){const i=n.length;let r,o,s,a,l,c=en(n,0);for(let u=0;u<i-1;++u)if(l=c,c=en(n,u+1),!(!l||!c)){if(_n(t[u],0,Wh)){e[u]=e[u+1]=0;continue}r=e[u]/t[u],o=e[u+1]/t[u],a=Math.pow(r,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),e[u]=r*s*t[u],e[u+1]=o*s*t[u])}}function $h(n,t,e="x"){const i=Ja(e),r=n.length;let o,s,a,l=en(n,0);for(let c=0;c<r;++c){if(s=a,a=l,l=en(n,c+1),!a)continue;const u=a[e],f=a[i];s&&(o=(u-s[e])/3,a[`cp1${e}`]=u-o,a[`cp1${i}`]=f-o*t[c]),l&&(o=(l[e]-u)/3,a[`cp2${e}`]=u+o,a[`cp2${i}`]=f+o*t[c])}}function Kh(n,t="x"){const e=Ja(t),i=n.length,r=Array(i).fill(0),o=Array(i);let s,a,l,c=en(n,0);for(s=0;s<i;++s)if(a=l,l=c,c=en(n,s+1),!!l){if(c){const u=c[t]-l[t];r[s]=u!==0?(c[e]-l[e])/u:0}o[s]=a?c?Qe(r[s-1])!==Qe(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}Vh(n,r,o),$h(n,o,t)}function $n(n,t,e){return Math.max(Math.min(n,e),t)}function Yh(n,t){let e,i,r,o,s,a=ye(n[0],t);for(e=0,i=n.length;e<i;++e)s=o,o=a,a=e<i-1&&ye(n[e+1],t),o&&(r=n[e],s&&(r.cp1x=$n(r.cp1x,t.left,t.right),r.cp1y=$n(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=$n(r.cp2x,t.left,t.right),r.cp2y=$n(r.cp2y,t.top,t.bottom)))}function Gh(n,t,e,i,r){let o,s,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")Kh(n,r);else{let c=i?n[n.length-1]:n[0];for(o=0,s=n.length;o<s;++o)a=n[o],l=Uh(c,a,n[Math.min(o+1,s-(i?0:1))%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&Yh(n,e)}function Yr(){return typeof window<"u"&&typeof document<"u"}function Gr(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function _i(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Bi=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Xh(n,t){return Bi(n).getPropertyValue(t)}const Zh=["top","right","bottom","left"];function qe(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=Zh[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Jh=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Qh(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let s=!1,a,l;if(Jh(r,o,n.target))a=r,l=o;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,s=!0}return{x:a,y:l,box:s}}function Re(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=Bi(e),o=r.boxSizing==="border-box",s=qe(r,"padding"),a=qe(r,"border","width"),{x:l,y:c,box:u}=Qh(n,e),f=s.left+(u&&a.left),h=s.top+(u&&a.top);let{width:d,height:g}=t;return o&&(d-=s.width+a.width,g-=s.height+a.height),{x:Math.round((l-f)/d*e.width/i),y:Math.round((c-h)/g*e.height/i)}}function td(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&Gr(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const s=o.getBoundingClientRect(),a=Bi(o),l=qe(a,"border","width"),c=qe(a,"padding");t=s.width-c.width-l.width,e=s.height-c.height-l.height,i=_i(a.maxWidth,o,"clientWidth"),r=_i(a.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||vi,maxHeight:r||vi}}const Kn=n=>Math.round(n*10)/10;function ed(n,t,e,i){const r=Bi(n),o=qe(r,"margin"),s=_i(r.maxWidth,n,"clientWidth")||vi,a=_i(r.maxHeight,n,"clientHeight")||vi,l=td(n,t,e);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const h=qe(r,"border","width"),d=qe(r,"padding");c-=d.width+h.width,u-=d.height+h.height}return c=Math.max(0,c-o.width),u=Math.max(0,i?c/i:u-o.height),c=Kn(Math.min(c,s,l.maxWidth)),u=Kn(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Kn(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Kn(Math.floor(u*i))),{width:c,height:u}}function Wo(n,t,e){const i=t||1,r=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const s=n.canvas;return s.style&&(e||!s.style.height&&!s.style.width)&&(s.style.height=`${n.height}px`,s.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||s.height!==r||s.width!==o?(n.currentDevicePixelRatio=i,s.height=r,s.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const nd=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Yr()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Uo(n,t){const e=Xh(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Le(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function id(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function rd(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},s=Le(n,r,e),a=Le(r,o,e),l=Le(o,t,e),c=Le(s,a,e),u=Le(a,l,e);return Le(c,u,e)}const od=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},sd=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Ze(n,t,e){return n?od(t,e):sd()}function Qa(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function tl(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function el(n){return n==="angle"?{between:Mn,compare:ih,normalize:Zt}:{between:Ke,compare:(t,e)=>t-e,normalize:t=>t}}function Vo({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function ad(n,t,e){const{property:i,start:r,end:o}=e,{between:s,normalize:a}=el(i),l=t.length;let{start:c,end:u,loop:f}=n,h,d;if(f){for(c+=l,u+=l,h=0,d=l;h<d&&s(a(t[c%l][i]),r,o);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:n.style}}function ld(n,t,e){if(!e)return[n];const{property:i,start:r,end:o}=e,s=t.length,{compare:a,between:l,normalize:c}=el(i),{start:u,end:f,loop:h,style:d}=ad(n,t,e),g=[];let p=!1,m=null,y,v,_;const b=()=>l(r,_,y)&&a(r,_)!==0,x=()=>a(o,y)===0||l(o,_,y),T=()=>p||b(),S=()=>!p||x();for(let k=u,P=u;k<=f;++k)v=t[k%s],!v.skip&&(y=c(v[i]),y!==_&&(p=l(y,r,o),m===null&&T()&&(m=a(y,r)===0?k:P),m!==null&&S()&&(g.push(Vo({start:m,end:k,loop:h,count:s,style:d})),m=null),P=k,_=y));return m!==null&&g.push(Vo({start:m,end:f,loop:h,count:s,style:d})),g}function cd(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const o=ld(i[r],n.points,t);o.length&&e.push(...o)}return e}function ud(n,t,e,i){let r=0,o=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(o+=r);o>r&&n[o%t].skip;)o--;return o%=t,{start:r,end:o}}function fd(n,t,e,i){const r=n.length,o=[];let s=t,a=n[t],l;for(l=t+1;l<=e;++l){const c=n[l%r];c.skip||c.stop?a.skip||(i=!1,o.push({start:t%r,end:(l-1)%r,loop:i}),t=s=c.stop?l:null):(s=l,a.skip&&(t=l)),a=c}return s!==null&&o.push({start:t%r,end:s%r,loop:i}),o}function hd(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const o=!!n._loop,{start:s,end:a}=ud(e,r,o,i);if(i===!0)return $o(n,[{start:s,end:a,loop:o}],e,t);const l=a<s?a+r:a,c=!!n._fullLoop&&s===0&&a===r-1;return $o(n,fd(e,s,l,c),e,t)}function $o(n,t,e,i){return!i||!i.setContext||!e?t:dd(n,t,e,i)}function dd(n,t,e,i){const r=n._chart.getContext(),o=Ko(n.options),{_datasetIndex:s,options:{spanGaps:a}}=n,l=e.length,c=[];let u=o,f=t[0].start,h=f;function d(g,p,m,y){const v=a?-1:1;if(g!==p){for(g+=l;e[g%l].skip;)g-=v;for(;e[p%l].skip;)p+=v;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:y}),u=y,f=p%l)}}for(const g of t){f=a?f:g.start;let p=e[f%l],m;for(h=f+1;h<=g.end;h++){const y=e[h%l];m=Ko(i.setContext(Te(r,{type:"segment",p0:p,p1:y,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),pd(m,u)&&d(f,h-1,g.loop,u),p=y,u=m}f<h-1&&d(f,h-1,g.loop,u)}return c}function Ko(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function pd(n,t){if(!t)return!1;const e=[],i=function(r,o){return zr(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class gd{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],s=e.duration;o.forEach(a=>a({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(i-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Ua.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let s=o.length-1,a=!1,l;for(;s>=0;--s)l=o[s],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(o[s]=o[o.length-1],o.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var de=new gd;const Yo="transparent",md={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Bo(n||Yo),r=i.valid&&Bo(t||Yo);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class yd{constructor(t,e,i,r){const o=e[i];r=Vn([t.to,r,o,t.from]);const s=Vn([t.from,o,r]);this._active=!0,this._fn=t.fn||md[t.type||typeof s],this._easing=wn[t.easing]||wn.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,s=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Vn([t.to,e,r,t.from]),this._from=Vn([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,s=this._loop,a=this._to;let l;if(this._active=o!==a&&(s||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=o;return}l=e/i%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class nl{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!pt(t))return;const e=Object.keys(kt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!pt(o))return;const s={};for(const a of e)s[a]=o[a];(St(o.properties)&&o.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,s)})})}_animateOptions(t,e){const i=e.options,r=bd(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&vd(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),s=Object.keys(e),a=Date.now();let l;for(l=s.length-1;l>=0;--l){const c=s[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,e));continue}const u=e[c];let f=o[c];const h=i.get(c);if(f)if(h&&f.active()){f.update(h,u,a);continue}else f.cancel();if(!h||!h.duration){t[c]=u;continue}o[c]=f=new yd(h,t,c,u),r.push(f)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return de.add(this._chart,i),!0}}function vd(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function bd(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Go(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function xd(n,t,e){if(e===!1)return!1;const i=Go(n,e),r=Go(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function _d(n){let t,e,i,r;return pt(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function il(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function Xo(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let s,a,l,c;if(t===null)return;let u=!1;for(s=0,a=r.length;s<a;++s){if(l=+r[s],l===e){if(u=!0,i.all)continue;break}c=n.values[l],Mt(c)&&(o||t===0||Qe(t)===Qe(c))&&(t+=c)}return!u&&!i.all?0:t}function wd(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",s=Object.keys(n),a=new Array(s.length);let l,c,u;for(l=0,c=s.length;l<c;++l)u=s[l],a[l]={[r]:u,[o]:n[u]};return a}function Gi(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Od(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Sd(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function kd(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Zo(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function Jo(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:s,index:a}=i,l=o.axis,c=s.axis,u=Od(o,s,i),f=t.length;let h;for(let d=0;d<f;++d){const g=t[d],{[l]:p,[c]:m}=g,y=g._stacks||(g._stacks={});h=y[c]=kd(r,u,p),h[a]=m,h._top=Zo(h,s,!0,i.type),h._bottom=Zo(h,s,!1,i.type);const v=h._visualValues||(h._visualValues={});v[a]=m}}function Xi(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Ed(n,t){return Te(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Ad(n,t,e){return Te(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ln(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Zi=n=>n==="reset"||n==="none",Qo=(n,t)=>t?n:Object.assign({},n),Td=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:il(e,!0),values:null};class Je{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Gi(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ln(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(f,h,d,g)=>f==="x"?h:f==="r"?g:d,o=e.xAxisID=ft(i.xAxisID,Xi(t,"x")),s=e.yAxisID=ft(i.yAxisID,Xi(t,"y")),a=e.rAxisID=ft(i.rAxisID,Xi(t,"r")),l=e.indexAxis,c=e.iAxisID=r(l,o,s,a),u=e.vAxisID=r(l,s,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&No(this._data,this),t._stacked&&ln(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(pt(e)){const r=this._cachedMeta;this._data=wd(e,r)}else if(i!==e){if(i){No(i,this);const r=this._cachedMeta;ln(r),r._parsed=[]}e&&Object.isExtensible(e)&&ah(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=Gi(e.vScale,e),e.stack!==i.stack&&(r=!0,ln(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(Jo(this,e._parsed),e._stacked=Gi(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:s}=i,a=o.axis;let l=t===0&&e===r.length?!0:i._sorted,c=t>0&&i._parsed[t-1],u,f,h;if(this._parsing===!1)i._parsed=r,i._sorted=!0,h=r;else{St(r[t])?h=this.parseArrayData(i,r,t,e):pt(r[t])?h=this.parseObjectData(i,r,t,e):h=this.parsePrimitiveData(i,r,t,e);const d=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<e;++u)i._parsed[u+t]=f=h[u],l&&(d()&&(l=!1),c=f);i._sorted=l}s&&Jo(this,h)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:s}=t,a=o.axis,l=s.axis,c=o.getLabels(),u=o===s,f=new Array(r);let h,d,g;for(h=0,d=r;h<d;++h)g=h+i,f[h]={[a]:u||o.parse(c[g],g),[l]:s.parse(e[g],g)};return f}parseArrayData(t,e,i,r){const{xScale:o,yScale:s}=t,a=new Array(r);let l,c,u,f;for(l=0,c=r;l<c;++l)u=l+i,f=e[u],a[l]={x:o.parse(f[0],u),y:s.parse(f[1],u)};return a}parseObjectData(t,e,i,r){const{xScale:o,yScale:s}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,f,h,d;for(u=0,f=r;u<f;++u)h=u+i,d=e[h],c[u]={x:o.parse(jn(d,a),h),y:s.parse(jn(d,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,s=e[t.axis],a={keys:il(r,!0),values:e._stacks[t.axis]._visualValues};return Xo(a,s,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let s=o===null?NaN:o;const a=r&&i._stacks[e.axis];r&&a&&(r.values=a,s=Xo(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,s=r.length,a=this._getOtherScale(t),l=Td(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=Sd(a);let h,d;function g(){d=r[h];const p=d[a.axis];return!Mt(d[t.axis])||u>p||f<p}for(h=0;h<s&&!(!g()&&(this.updateRangeFromParsed(c,t,d,l),o));++h);if(o){for(h=s-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,t,d,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,s;for(r=0,o=e.length;r<o;++r)s=e[r][t.axis],Mt(s)&&i.push(s);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=_d(ft(this.options.clip,xd(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,s=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(t,o,a,l),u=a;u<a+l;++u){const f=r[u];f.hidden||(f.active&&c?s.push(f):f.draw(t,o))}for(u=0;u<s.length;++u)s[u].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const s=this._cachedMeta.data[t];o=s.$context||(s.$context=Ad(this.getContext(),t,s)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=Ed(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,s=t+"-"+e,a=o[s],l=this.enableOptionSharing&&yi(i);if(a)return Qo(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),d=Object.keys(kt.elements[t]),g=()=>this.getContext(i,r,e),p=c.resolveNamedOptions(h,d,g,f);return p.$shared&&(p.$shared=l,o[s]=Object.freeze(Qo(p,l))),p}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,s=`animation-${e}`,a=o[s];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,e),h=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(h,this.getContext(t,i,e))}const c=new nl(r,l&&l.animations);return l&&l._cacheable&&(o[s]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Zi(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),s=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:s}}updateElement(t,e,i,r){Zi(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!Zi(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,o=e.length,s=Math.min(o,r);s&&this.parse(0,s),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,s=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=s;a--)c[a]=c[a-e]};for(l(o),a=t;a<s;++a)o[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&ln(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}it(Je,"defaults",{}),it(Je,"datasetElementType",null),it(Je,"dataElementType",null);function Pd(n,t,e){let i=1,r=1,o=0,s=0;if(t<_t){const a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),h=Math.sin(l),d=(_,b,x)=>Mn(_,a,l,!0)?1:Math.max(b,b*e,x,x*e),g=(_,b,x)=>Mn(_,a,l,!0)?-1:Math.min(b,b*e,x,x*e),p=d(0,c,f),m=d(Et,u,h),y=g(wt,c,f),v=g(wt+Et,u,h);i=(p-y)/2,r=(m-v)/2,o=-(p+y)/2,s=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:s}}class gn extends Je{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let o=l=>+i[l];if(pt(i[t])){const{key:l="value"}=this._parsing;o=c=>+jn(i[c],l)}let s,a;for(s=t,a=t+e;s<a;++s)r._parsed[s]=o(s)}}_getRotation(){return le(this.options.rotation-90)}_getCircumference(){return le(this.options.circumference)}_getRotationExtents(){let t=_t,e=-_t;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,o=r._getRotation(),s=r._getCircumference();t=Math.min(t,o),e=Math.max(e,o+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,o=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-s)/2,0),l=Math.min(Kf(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:g,offsetY:p}=Pd(f,u,l),m=(i.width-s)/h,y=(i.height-s)/d,v=Math.max(Math.min(m,y)/2,0),_=Fa(this.options.radius,v),b=Math.max(_*l,0),x=(_-b)/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=p*_,r.total=this.calculateTotal(),this.outerRadius=_-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/_t)}updateElements(t,e,i,r){const o=r==="reset",s=this.chart,a=s.chartArea,c=s.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,h=o&&c.animateScale,d=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(e,r);let y=this._getRotation(),v;for(v=0;v<e;++v)y+=this._circumference(v,o);for(v=e;v<e+i;++v){const _=this._circumference(v,o),b=t[v],x={x:u+this.offsetX,y:f+this.offsetY,startAngle:y,endAngle:y+_,circumference:_,outerRadius:g,innerRadius:d};m&&(x.options=p||this.resolveDataElementOptions(v,b.active?"active":r)),y+=_,this.updateElement(b,v,x,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const o=t._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?_t*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Di(e._parsed[t],i.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,o,s,a,l;if(!t){for(r=0,o=i.data.datasets.length;r<o;++r)if(i.isDatasetVisible(r)){s=i.getDatasetMeta(r),t=s.data,a=s.controller;break}}if(!t)return 0;for(r=0,o=t.length;r<o;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(ft(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}it(gn,"id","doughnut"),it(gn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),it(gn,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),it(gn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((o,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class li extends Je{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=e,s=this.chart._animationsDisabled;let{start:a,count:l}=fh(e,r,s);this._drawStart=a,this._drawCount=l,hh(e)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!s,options:c},t),this.updateElements(r,a,l,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:s,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(e,r),h=s.axis,d=a.axis,{spanGaps:g,segment:p}=this.options,m=Cn(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||r==="none",v=e+i,_=t.length;let b=e>0&&this.getParsed(e-1);for(let x=0;x<_;++x){const T=t[x],S=y?T:{};if(x<e||x>=v){S.skip=!0;continue}const k=this.getParsed(x),P=xt(k[d]),E=S[h]=s.getPixelForValue(k[h],x),w=S[d]=o||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,k,l):k[d],x);S.skip=isNaN(E)||isNaN(w)||P,S.stop=x>0&&Math.abs(k[h]-b[h])>m,p&&(S.parsed=k,S.raw=c.data[x]),f&&(S.options=u||this.resolveDataElementOptions(x,T.active?"active":r)),y||this.updateElement(T,x,S,r),b=k}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}it(li,"id","line"),it(li,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),it(li,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ce(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Xr{constructor(t){it(this,"options");this.options=t||{}}static override(t){Object.assign(Xr.prototype,t)}init(){}formats(){return Ce()}parse(){return Ce()}format(){return Ce()}add(){return Ce()}diff(){return Ce()}startOf(){return Ce()}endOf(){return Ce()}}var jd={_date:Xr};function Cd(n,t,e,i){const{controller:r,data:o,_sorted:s}=n,a=r._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&s&&o.length){const l=a._reversePixels?oh:Ie;if(i){if(r._sharedOptions){const c=o[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const f=l(o,t,e-u),h=l(o,t,e+u);return{lo:f.lo,hi:h.hi}}}}else return l(o,t,e)}return{lo:0,hi:o.length-1}}function In(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),s=e[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:f,hi:h}=Cd(o[a],t,s,r);for(let d=f;d<=h;++d){const g=u[d];g.skip||i(g,c,d)}}}function Md(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,s=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function Ji(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||In(n,e,t,function(a,l,c){!r&&!ye(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function Rd(n,t,e,i){let r=[];function o(s,a,l){const{startAngle:c,endAngle:u}=s.getProps(["startAngle","endAngle"],i),{angle:f}=Ha(s,{x:t.x,y:t.y});Mn(f,c,u)&&r.push({element:s,datasetIndex:a,index:l})}return In(n,e,t,o),r}function Ld(n,t,e,i,r,o){let s=[];const a=Md(e);let l=Number.POSITIVE_INFINITY;function c(u,f,h){const d=u.inRange(t.x,t.y,r);if(i&&!d)return;const g=u.getCenterPoint(r);if(!(!!o||n.isPointInArea(g))&&!d)return;const m=a(t,g);m<l?(s=[{element:u,datasetIndex:f,index:h}],l=m):m===l&&s.push({element:u,datasetIndex:f,index:h})}return In(n,e,t,c),s}function Qi(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?Rd(n,t,e,r):Ld(n,t,e,i,r,o)}function ts(n,t,e,i,r){const o=[],s=e==="x"?"inXRange":"inYRange";let a=!1;return In(n,e,t,(l,c,u)=>{l[s]&&l[s](t[e],r)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:o}var Nd={evaluateInteractionItems:In,modes:{index(n,t,e,i){const r=Re(t,n),o=e.axis||"x",s=e.includeInvisible||!1,a=e.intersect?Ji(n,r,o,i,s):Qi(n,r,o,!1,i,s),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){const r=Re(t,n),o=e.axis||"xy",s=e.includeInvisible||!1;let a=e.intersect?Ji(n,r,o,i,s):Qi(n,r,o,!1,i,s);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,i){const r=Re(t,n),o=e.axis||"xy",s=e.includeInvisible||!1;return Ji(n,r,o,i,s)},nearest(n,t,e,i){const r=Re(t,n),o=e.axis||"xy",s=e.includeInvisible||!1;return Qi(n,r,o,e.intersect,i,s)},x(n,t,e,i){const r=Re(t,n);return ts(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Re(t,n);return ts(n,r,"y",e.intersect,i)}}};const rl=["left","top","right","bottom"];function cn(n,t){return n.filter(e=>e.pos===t)}function es(n,t){return n.filter(e=>rl.indexOf(e.pos)===-1&&e.box.axis===t)}function un(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function Dd(n){const t=[];let e,i,r,o,s,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:s,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a});return t}function Id(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!rl.includes(r))continue;const s=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return t}function Bd(n,t){const e=Id(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,s,a;for(o=0,s=n.length;o<s;++o){a=n[o];const{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return e}function Fd(n){const t=Dd(n),e=un(t.filter(c=>c.box.fullSize),!0),i=un(cn(t,"left"),!0),r=un(cn(t,"right")),o=un(cn(t,"top"),!0),s=un(cn(t,"bottom")),a=es(t,"x"),l=es(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(l).concat(s).concat(a),chartArea:cn(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:o.concat(s).concat(a)}}function ns(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function ol(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function qd(n,t,e,i){const{pos:r,box:o}=e,s=n.maxPadding;if(!pt(r)){e.size&&(n[r]-=e.size);const f=i[e.stack]||{size:0,count:1};f.size=Math.max(f.size,e.horizontal?o.height:o.width),e.size=f.size/f.count,n[r]+=e.size}o.getPadding&&ol(s,o.getPadding());const a=Math.max(0,t.outerWidth-ns(s,n,"left","right")),l=Math.max(0,t.outerHeight-ns(s,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function zd(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Hd(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{o[s]=Math.max(t[s],e[s])}),o}return i(n?["left","right"]:["top","bottom"])}function mn(n,t,e,i){const r=[];let o,s,a,l,c,u;for(o=0,s=n.length,c=0;o<s;++o){a=n[o],l=a.box,l.update(a.width||t.w,a.height||t.h,Hd(a.horizontal,t));const{same:f,other:h}=qd(t,e,a,i);c|=f&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&mn(r,t,e,i)||u}function Yn(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function is(n,t,e,i){const r=e.padding;let{x:o,y:s}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*u,h=c.size||l.height;yi(c.start)&&(s=c.start),l.fullSize?Yn(l,r.left,s,e.outerWidth-r.right-r.left,h):Yn(l,t.left+c.placed,s,f,h),c.start=s,c.placed+=f,s=l.bottom}else{const f=t.h*u,h=c.size||l.width;yi(c.start)&&(o=c.start),l.fullSize?Yn(l,o,r.top,h,e.outerHeight-r.bottom-r.top):Yn(l,o,t.top+c.placed,h,f),c.start=o,c.placed+=f,o=l.right}}t.x=o,t.y=s}var Xt={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=It(n.options.layout.padding),o=Math.max(t-r.width,0),s=Math.max(e-r.height,0),a=Fd(n.boxes),l=a.vertical,c=a.horizontal;yt(n.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},r);ol(h,It(i));const d=Object.assign({maxPadding:h,w:o,h:s,x:r.left,y:r.top},r),g=Bd(l.concat(c),f);mn(a.fullSize,d,f,g),mn(l,d,f,g),mn(c,d,f,g)&&mn(l,d,f,g),zd(d),is(a.leftAndTop,d,f,g),d.x+=d.w,d.y+=d.h,is(a.rightAndBottom,d,f,g),n.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},yt(a.chartArea,p=>{const m=p.box;Object.assign(m,n.chartArea),m.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class sl{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class Wd extends sl{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ci="$chartjs",Ud={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rs=n=>n===null||n==="";function Vd(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[ci]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",rs(r)){const o=Uo(n,"width");o!==void 0&&(n.width=o)}if(rs(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=Uo(n,"height");o!==void 0&&(n.height=o)}return n}const al=nd?{passive:!0}:!1;function $d(n,t,e){n&&n.addEventListener(t,e,al)}function Kd(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,al)}function Yd(n,t){const e=Ud[n.type]||n.type,{x:i,y:r}=Re(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function wi(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Gd(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let s=!1;for(const a of o)s=s||wi(a.addedNodes,i),s=s&&!wi(a.removedNodes,i);s&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Xd(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let s=!1;for(const a of o)s=s||wi(a.removedNodes,i),s=s&&!wi(a.addedNodes,i);s&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Rn=new Map;let os=0;function ll(){const n=window.devicePixelRatio;n!==os&&(os=n,Rn.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Zd(n,t){Rn.size||window.addEventListener("resize",ll),Rn.set(n,t)}function Jd(n){Rn.delete(n),Rn.size||window.removeEventListener("resize",ll)}function Qd(n,t,e){const i=n.canvas,r=i&&Gr(i);if(!r)return;const o=Va((a,l)=>{const c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),s=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return s.observe(r),Zd(n,o),s}function tr(n,t,e){e&&e.disconnect(),t==="resize"&&Jd(n)}function tp(n,t,e){const i=n.canvas,r=Va(o=>{n.ctx!==null&&e(Yd(o,n))},n);return $d(i,t,r),r}class ep extends sl{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Vd(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[ci])return!1;const i=e[ci].initial;["height","width"].forEach(o=>{const s=i[o];xt(s)?e.removeAttribute(o):e.setAttribute(o,s)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[ci],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),s={attach:Gd,detach:Xd,resize:Qd}[e]||tp;r[e]=s(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:tr,detach:tr,resize:tr}[e]||Kd)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return ed(t,e,i,r)}isAttached(t){const e=t&&Gr(t);return!!(e&&e.isConnected)}}function np(n){return!Yr()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Wd:ep}class ce{constructor(){it(this,"x");it(this,"y");it(this,"active",!1);it(this,"options");it(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Cn(this.x)&&Cn(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}it(ce,"defaults",{}),it(ce,"defaultRoutes");function ip(n,t){const e=n.options.ticks,i=rp(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?sp(t):[],s=o.length,a=o[0],l=o[s-1],c=[];if(s>r)return ap(t,c,o,s/r),c;const u=op(o,t,r);if(s>0){let f,h;const d=s>1?Math.round((l-a)/(s-1)):null;for(Gn(t,c,u,xt(d)?0:a-d,a),f=0,h=s-1;f<h;f++)Gn(t,c,u,o[f],o[f+1]);return Gn(t,c,u,l,xt(d)?t.length:l+d),c}return Gn(t,c,u),c}function rp(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function op(n,t,e){const i=lp(n),r=t.length/e;if(!i)return Math.max(r,1);const o=eh(i);for(let s=0,a=o.length-1;s<a;s++){const l=o[s];if(l>r)return l}return Math.max(r,1)}function sp(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function ap(n,t,e,i){let r=0,o=e[0],s;for(i=Math.ceil(i),s=0;s<n.length;s++)s===o&&(t.push(n[s]),r++,o=e[r*i])}function Gn(n,t,e,i,r){const o=ft(i,0),s=Math.min(ft(r,n.length),n.length);let a=0,l,c,u;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),u=o;u<0;)a++,u=Math.round(o+a*e);for(c=Math.max(o,0);c<s;c++)c===u&&(t.push(n[c]),a++,u=Math.round(o+a*e))}function lp(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const cp=n=>n==="left"?"right":n==="right"?"left":n,ss=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,as=(n,t)=>Math.min(t||n,n);function ls(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function up(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,s=n._endPixel,a=1e-6;let l=n.getPixelForTick(r),c;if(!(e&&(i===1?c=Math.max(l-o,s-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<o-a||l>s+a)))return l}function fp(n,t){yt(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function fn(n){return n.drawTicks?n.tickLength:0}function cs(n,t){if(!n.display)return 0;const e=jt(n.font,t),i=It(n.padding);return(St(n.text)?n.text.length:1)*e.lineHeight+i.height}function hp(n,t){return Te(n,{scale:t,type:"scale"})}function dp(n,t,e){return Te(n,{tick:e,index:t,type:"tick"})}function pp(n,t,e){let i=qr(n);return(e&&t!=="right"||!e&&t==="right")&&(i=cp(i)),i}function gp(n,t,e,i){const{top:r,left:o,bottom:s,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let f=0,h,d,g;const p=s-r,m=a-o;if(n.isHorizontal()){if(d=Rt(i,o,a),pt(e)){const y=Object.keys(e)[0],v=e[y];g=u[y].getPixelForValue(v)+p-t}else e==="center"?g=(c.bottom+c.top)/2+p-t:g=ss(n,e,t);h=a-o}else{if(pt(e)){const y=Object.keys(e)[0],v=e[y];d=u[y].getPixelForValue(v)-m+t}else e==="center"?d=(c.left+c.right)/2-m+t:d=ss(n,e,t);g=Rt(i,s,r),f=e==="left"?-Et:Et}return{titleX:d,titleY:g,maxWidth:h,rotation:f}}class Ue extends ce{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=$t(t,Number.POSITIVE_INFINITY),e=$t(e,Number.NEGATIVE_INFINITY),i=$t(i,Number.POSITIVE_INFINITY),r=$t(r,Number.NEGATIVE_INFINITY),{min:$t(t,i),max:$t(e,r),minDefined:Mt(t),maxDefined:Mt(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),s;if(r&&o)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)s=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,s.min)),o||(i=Math.max(i,s.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:$t(e,$t(i,e)),max:$t(i,$t(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){vt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Rh(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ls(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=ip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){vt(this.options.afterUpdate,[this])}beforeSetDimensions(){vt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){vt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),vt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){vt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=vt(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){vt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){vt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=as(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let s=r,a,l,c;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),f=u.widest.width,h=u.highest.height,d=Bt(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/i:d/(i-1),f+6>a&&(a=d/(i-(t.offset?.5:1)),l=this.maxHeight-fn(t.grid)-e.padding-cs(t.title,this.chart.options.font),c=Math.sqrt(f*f+h*h),s=Br(Math.min(Math.asin(Bt((u.highest.height+6)/a,-1,1)),Math.asin(Bt(l/c,-1,1))-Math.asin(Bt(h/c,-1,1)))),s=Math.max(r,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){vt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){vt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const l=cs(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=fn(o)+l):(t.height=this.maxHeight,t.width=fn(o)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:h}=this._getLabelSizes(),d=i.padding*2,g=le(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const y=i.mirror?0:m*f.width+p*h.height;t.height=Math.min(this.maxHeight,t.height+y+d)}else{const y=i.mirror?0:p*f.width+m*h.height;t.width=Math.min(this.maxWidth,t.width+y+d)}this._calculatePadding(c,u,m,p)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:s},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;l?c?(h=r*t.width,d=i*e.height):(h=i*t.height,d=r*e.width):o==="start"?d=e.width:o==="end"?h=t.width:o!=="inner"&&(h=t.width/2,d=e.width/2),this.paddingLeft=Math.max((h-u+s)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-f+s)*this.width/(this.width-f),0)}else{let u=e.height/2,f=t.height/2;o==="start"?(u=0,f=t.height):o==="end"&&(u=e.height,f=0),this.paddingTop=u+s,this.paddingBottom=f+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){vt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)xt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=ls(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,s=[],a=[],l=Math.floor(e/as(e,i));let c=0,u=0,f,h,d,g,p,m,y,v,_,b,x;for(f=0;f<e;f+=l){if(g=t[f].label,p=this._resolveTickFontOptions(f),r.font=m=p.string,y=o[m]=o[m]||{data:{},gc:[]},v=p.lineHeight,_=b=0,!xt(g)&&!St(g))_=bi(r,y.data,y.gc,_,g),b=v;else if(St(g))for(h=0,d=g.length;h<d;++h)x=g[h],!xt(x)&&!St(x)&&(_=bi(r,y.data,y.gc,_,x),b+=v);s.push(_),a.push(b),c=Math.max(_,c),u=Math.max(b,u)}fp(o,e);const T=s.indexOf(c),S=a.indexOf(u),k=P=>({width:s[P]||0,height:a[P]||0});return{first:k(0),last:k(e-1),widest:k(T),highest:k(S),widths:s,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return rh(this._alignToPixels?je(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=dp(this.getContext(),t,i))}return this.$context||(this.$context=hp(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=le(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),s=t.autoSkipPadding||0,a=o?o.widest.width+s:0,l=o?o.highest.height+s:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:s,border:a}=r,l=o.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),h=fn(o),d=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,y=function(q){return je(i,q,p)};let v,_,b,x,T,S,k,P,E,w,A,j;if(s==="top")v=y(this.bottom),S=this.bottom-h,P=v-m,w=y(t.top)+m,j=t.bottom;else if(s==="bottom")v=y(this.top),w=t.top,j=y(t.bottom)-m,S=v+m,P=this.top+h;else if(s==="left")v=y(this.right),T=this.right-h,k=v-m,E=y(t.left)+m,A=t.right;else if(s==="right")v=y(this.left),E=t.left,A=y(t.right)-m,T=v+m,k=this.left+h;else if(e==="x"){if(s==="center")v=y((t.top+t.bottom)/2+.5);else if(pt(s)){const q=Object.keys(s)[0],z=s[q];v=y(this.chart.scales[q].getPixelForValue(z))}w=t.top,j=t.bottom,S=v+m,P=S+h}else if(e==="y"){if(s==="center")v=y((t.left+t.right)/2);else if(pt(s)){const q=Object.keys(s)[0],z=s[q];v=y(this.chart.scales[q].getPixelForValue(z))}T=v-m,k=T-h,E=t.left,A=t.right}const M=ft(r.ticks.maxTicksLimit,f),N=Math.max(1,Math.ceil(f/M));for(_=0;_<f;_+=N){const q=this.getContext(_),z=o.setContext(q),G=a.setContext(q),B=z.lineWidth,I=z.color,C=G.dash||[],L=G.dashOffset,D=z.tickWidth,W=z.tickColor,H=z.tickBorderDash||[],R=z.tickBorderDashOffset;b=up(this,_,l),b!==void 0&&(x=je(i,b,B),c?T=k=E=A=x:S=P=w=j=x,d.push({tx1:T,ty1:S,tx2:k,ty2:P,x1:E,y1:w,x2:A,y2:j,width:B,color:I,borderDash:C,borderDashOffset:L,tickWidth:D,tickColor:W,tickBorderDash:H,tickBorderDashOffset:R}))}return this._ticksLength=f,this._borderValue=v,d}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,s=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=o,h=fn(i.grid),d=h+u,g=f?-u:d,p=-le(this.labelRotation),m=[];let y,v,_,b,x,T,S,k,P,E,w,A,j="middle";if(r==="top")T=this.bottom-g,S=this._getXAxisLabelAlignment();else if(r==="bottom")T=this.top+g,S=this._getXAxisLabelAlignment();else if(r==="left"){const N=this._getYAxisLabelAlignment(h);S=N.textAlign,x=N.x}else if(r==="right"){const N=this._getYAxisLabelAlignment(h);S=N.textAlign,x=N.x}else if(e==="x"){if(r==="center")T=(t.top+t.bottom)/2+d;else if(pt(r)){const N=Object.keys(r)[0],q=r[N];T=this.chart.scales[N].getPixelForValue(q)+d}S=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")x=(t.left+t.right)/2-d;else if(pt(r)){const N=Object.keys(r)[0],q=r[N];x=this.chart.scales[N].getPixelForValue(q)}S=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const M=this._getLabelSizes();for(y=0,v=a.length;y<v;++y){_=a[y],b=_.label;const N=o.setContext(this.getContext(y));k=this.getPixelForTick(y)+o.labelOffset,P=this._resolveTickFontOptions(y),E=P.lineHeight,w=St(b)?b.length:1;const q=w/2,z=N.color,G=N.textStrokeColor,B=N.textStrokeWidth;let I=S;s?(x=k,S==="inner"&&(y===v-1?I=this.options.reverse?"left":"right":y===0?I=this.options.reverse?"right":"left":I="center"),r==="top"?c==="near"||p!==0?A=-w*E+E/2:c==="center"?A=-M.highest.height/2-q*E+E:A=-M.highest.height+E/2:c==="near"||p!==0?A=E/2:c==="center"?A=M.highest.height/2-q*E:A=M.highest.height-w*E,f&&(A*=-1),p!==0&&!N.showLabelBackdrop&&(x+=E/2*Math.sin(p))):(T=k,A=(1-w)*E/2);let C;if(N.showLabelBackdrop){const L=It(N.backdropPadding),D=M.heights[y],W=M.widths[y];let H=A-L.top,R=0-L.left;switch(j){case"middle":H-=D/2;break;case"bottom":H-=D;break}switch(S){case"center":R-=W/2;break;case"right":R-=W;break;case"inner":y===v-1?R-=W:y>0&&(R-=W/2);break}C={left:R,top:H,width:W+L.width,height:D+L.height,color:N.backdropColor}}m.push({label:b,font:P,textOffset:A,options:{rotation:p,color:z,strokeColor:G,strokeWidth:B,textAlign:I,textBaseline:j,translation:[x,T],backdrop:C}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-le(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,s=this._getLabelSizes(),a=t+o,l=s.widest.width;let c,u;return e==="left"?r?(u=this.right+o,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?r?(u=this.left+o,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,s;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(o=0,s=r.length;o<s;++o){const l=r[o];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),s=i.display?o.width:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,h;this.isHorizontal()?(c=je(t,this.left,s)-s/2,u=je(t,this.right,a)+a/2,f=h=l):(f=je(t,this.top,s)-s/2,h=je(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(c,f),e.lineTo(u,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Hr(i,r);const o=this.getLabelItems(t);for(const s of o){const a=s.options,l=s.font,c=s.label,u=s.textOffset;We(i,c,0,u,l,a)}r&&Wr(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=jt(i.font),s=It(i.padding),a=i.align;let l=o.lineHeight/2;e==="bottom"||e==="center"||pt(e)?(l+=s.bottom,St(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=s.top;const{titleX:c,titleY:u,maxWidth:f,rotation:h}=gp(this,l,e,a);We(t,i.text,0,0,o,{color:i.color,maxWidth:f,rotation:h,textAlign:pp(a,e,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=ft(t.grid&&t.grid.z,-1),r=ft(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ue.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,s;for(o=0,s=e.length;o<s;++o){const a=e[o];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return jt(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Xn{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;vp(e)&&(i=this.register(e));const r=this.items,o=t.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,mp(t,s,i),this.override&&kt.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in kt[r]&&(delete kt[r][i],this.override&&delete He[i])}}function mp(n,t,e){const i=Pn(Object.create(null),[e?kt.get(e):{},kt.get(t),n.defaults]);kt.set(t,i),n.defaultRoutes&&yp(t,n.defaultRoutes),n.descriptors&&kt.describe(t,n.descriptors)}function yp(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),s=t[e].split("."),a=s.pop(),l=s.join(".");kt.route(o,r,l,a)})}function vp(n){return"id"in n&&"defaults"in n}class bp{constructor(){this.controllers=new Xn(Je,"datasets",!0),this.elements=new Xn(ce,"elements"),this.plugins=new Xn(Object,"plugins"),this.scales=new Xn(Ue,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):yt(r,s=>{const a=i||this._getRegistryForType(s);this._exec(t,a,s)})})}_exec(t,e,i){const r=Ir(t);vt(i["before"+r],[],i),e[t](i),vt(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var re=new bp;class xp{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=r?this._descriptors(t).filter(r):this._descriptors(t),s=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,i,r){r=r||{};for(const o of t){const s=o.plugin,a=s[i],l=[e,r,o.options];if(vt(a,l,s)===!1&&r.cancelable)return!1}return!0}invalidate(){xt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=ft(i.options&&i.options.plugins,{}),o=_p(i);return r===!1&&!e?[]:Op(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,s)=>o.filter(a=>!s.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function _p(n){const t={},e=[],i=Object.keys(re.plugins.items);for(let o=0;o<i.length;o++)e.push(re.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const s=r[o];e.indexOf(s)===-1&&(e.push(s),t[s.id]=!0)}return{plugins:e,localIds:t}}function wp(n,t){return!t&&n===!1?null:n===!0?{}:n}function Op(n,{plugins:t,localIds:e},i,r){const o=[],s=n.getContext();for(const a of t){const l=a.id,c=wp(i[l],r);c!==null&&o.push({plugin:a,options:Sp(n.config,{plugin:a,local:e[l]},c,s)})}return o}function Sp(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),s=n.getOptionScopes(i,o);return e&&t.defaults&&s.push(t.defaults),n.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dr(n,t){const e=kt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function kp(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function Ep(n,t){return n===t?"_index_":"_value_"}function us(n){if(n==="x"||n==="y"||n==="r")return n}function Ap(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function pr(n,...t){if(us(n))return n;for(const e of t){const i=e.axis||Ap(e.position)||n.length>1&&us(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function fs(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function Tp(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return fs(n,"x",e[0])||fs(n,"y",e[0])}return{}}function Pp(n,t){const e=He[n.type]||{scales:{}},i=t.scales||{},r=dr(n.type,t),o=Object.create(null);return Object.keys(i).forEach(s=>{const a=i[s];if(!pt(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const l=pr(s,a,Tp(s,n),kt.scales[a.type]),c=Ep(l,r),u=e.scales||{};o[s]=xn(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(s=>{const a=s.type||n.type,l=s.indexAxis||dr(a,t),u=(He[a]||{}).scales||{};Object.keys(u).forEach(f=>{const h=kp(f,l),d=s[h+"AxisID"]||h;o[d]=o[d]||Object.create(null),xn(o[d],[{axis:h},i[d],u[f]])})}),Object.keys(o).forEach(s=>{const a=o[s];xn(a,[kt.scales[a.type],kt.scale])}),o}function cl(n){const t=n.options||(n.options={});t.plugins=ft(t.plugins,{}),t.scales=Pp(n,t)}function ul(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function jp(n){return n=n||{},n.data=ul(n.data),cl(n),n}const hs=new Map,fl=new Set;function Zn(n,t){let e=hs.get(n);return e||(e=t(),hs.set(n,e),fl.add(e)),e}const hn=(n,t,e)=>{const i=jn(t,e);i!==void 0&&n.add(i)};class Cp{constructor(t){this._config=jp(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ul(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),cl(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Zn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Zn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Zn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Zn(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,s=this._cachedScopes(t,i),a=s.get(e);if(a)return a;const l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(f=>hn(l,t,f))),u.forEach(f=>hn(l,r,f)),u.forEach(f=>hn(l,He[o]||{},f)),u.forEach(f=>hn(l,kt,f)),u.forEach(f=>hn(l,fr,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),fl.has(e)&&s.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,He[e]||{},kt.datasets[e]||{},{type:e},kt,fr]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:s,subPrefixes:a}=ds(this._resolverCache,t,r);let l=s;if(Rp(s,e)){o.$shared=!1,i=Ae(i)?i():i;const c=this.createResolver(t,i,a);l=tn(s,i,c)}for(const c of e)o[c]=l[c];return o}createResolver(t,e,i=[""],r){const{resolver:o}=ds(this._resolverCache,t,i);return pt(e)?tn(o,e,void 0,r):o}}function ds(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:Vr(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,o)),o}const Mp=n=>pt(n)&&Object.getOwnPropertyNames(n).some(t=>Ae(n[t]));function Rp(n,t){const{isScriptable:e,isIndexable:i}=Ya(n);for(const r of t){const o=e(r),s=i(r),a=(s||o)&&n[r];if(o&&(Ae(a)||Mp(a))||s&&St(a))return!0}return!1}var Lp="4.4.6";const Np=["top","bottom","left","right","chartArea"];function ps(n,t){return n==="top"||n==="bottom"||Np.indexOf(n)===-1&&t==="x"}function gs(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function ms(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),vt(e&&e.onComplete,[n],t)}function Dp(n){const t=n.chart,e=t.options.animation;vt(e&&e.onProgress,[n],t)}function hl(n){return Yr()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ui={},ys=n=>{const t=hl(n);return Object.values(ui).filter(e=>e.canvas===t).pop()};function Ip(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const s=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=s)}}}function Bp(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function Jn(n,t,e){return n.options.clip?n[e]:t[e]}function Fp(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Jn(e,t,"left"),right:Jn(e,t,"right"),top:Jn(i,t,"top"),bottom:Jn(i,t,"bottom")}:t}var _e;let Bn=(_e=class{static register(...t){re.add(...t),vs()}static unregister(...t){re.remove(...t),vs()}constructor(t,e){const i=this.config=new Cp(e),r=hl(t),o=ys(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const s=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||np(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,s.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=$f(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xp,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ch(f=>this.update(f),s.resizeDelay||0),this._dataChanges=[],ui[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}de.listen(this,"complete",ms),de.listen(this,"progress",Dp),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return xt(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return re}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Wo(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qo(this.canvas,this.ctx),this}stop(){return de.stop(this),this}resize(t,e){de.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,t,e,o),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Wo(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),vt(i.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};yt(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((s,a)=>(s[a]=!1,s),{});let o=[];e&&(o=o.concat(Object.keys(e).map(s=>{const a=e[s],l=pr(s,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),yt(o,s=>{const a=s.options,l=a.id,c=pr(l,a),u=ft(a.type,s.dtype);(a.position===void 0||ps(a.position,c)!==ps(s.dposition))&&(a.position=s.dposition),r[l]=!0;let f=null;if(l in i&&i[l].type===u)f=i[l];else{const h=re.getScale(u);f=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(a,t)}),yt(r,(s,a)=>{s||delete i[a]}),yt(i,s=>{Xt.configure(this,s,s.options),Xt.addBox(this,s)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(gs("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let s=this.getDatasetMeta(i);const a=o.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(i),s=this.getDatasetMeta(i)),s.type=a,s.indexAxis=o.indexAxis||dr(a,this.options),s.order=o.order||0,s.index=i,s.label=""+o.label,s.visible=this.isDatasetVisible(i),s.controller)s.controller.updateIndex(i),s.controller.linkScales();else{const l=re.getController(a),{datasetElementType:c,dataElementType:u}=kt.datasets[a];Object.assign(l,{dataElementType:re.getElement(u),datasetElementType:c&&re.getElement(c)}),s.controller=new l(this,i),t.push(s.controller)}}return this._updateMetasets(),t}_resetElements(){yt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),h=!r&&o.indexOf(f)===-1;f.buildOrUpdateElements(h),s=Math.max(+f.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),r||yt(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(gs("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){yt(this.scales,t=>{Xt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Co(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const s=i==="_removeElements"?-o:o;Ip(t,r,s)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(s=>s[0]===o).map((s,a)=>a+","+s.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!Co(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xt.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],yt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Ae(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(de.has(this)?this.attached&&!de.running(this)&&de.start(this):(this.draw(),ms({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const s=e[r];(!t||s.visible)&&i.push(s)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,r=!i.disabled,o=Fp(t,this.chartArea),s={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Hr(e,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),t.controller.draw(),r&&Wr(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return ye(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=Nd.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Te(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),s=o.controller._resolveAnimations(void 0,r);yi(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),s.update(o,{visible:i}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),de.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),qo(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete ui[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,s)=>{e.addEventListener(this,o,s),t[o]=s},r=(o,s,a)=>{o.offsetX=s,o.offsetY=a,this._eventHandler(o)};yt(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let s;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",o),i("detach",s)};s=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():s()}unbindEvents(){yt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},yt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,s,a,l;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){s=t[a];const c=s&&this.getDatasetMeta(s.datasetIndex).controller;c&&c[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:s})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[s],index:s}});!gi(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),s=o(e,t),a=i?t:o(t,e);s.length&&this.updateHoverStyle(s,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=s=>(s.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,s=e,a=this._getActiveElements(t,r,i,s),l=Jf(t),c=Bp(t,this._lastEvent,i,l);i&&(this._lastEvent=null,vt(o.onHover,[t,a,this],this),l&&vt(o.onClick,[t,a,this],this));const u=!gi(a,r);return(u||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=c,u}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}},it(_e,"defaults",kt),it(_e,"instances",ui),it(_e,"overrides",He),it(_e,"registry",re),it(_e,"version",Lp),it(_e,"getChart",ys),_e);function vs(){return yt(Bn.instances,n=>n._plugins.invalidate())}function qp(n,t,e){const{startAngle:i,pixelMargin:r,x:o,y:s,outerRadius:a,innerRadius:l}=t;let c=r/a;n.beginPath(),n.arc(o,s,a,i-c,e+c),l>r?(c=r/l,n.arc(o,s,l,e+c,i-c,!0)):n.arc(o,s,r,e+Et,i-Et),n.closePath(),n.clip()}function zp(n){return Ur(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Hp(n,t,e,i){const r=zp(n.options.borderRadius),o=(e-t)/2,s=Math.min(o,i*t/2),a=l=>{const c=(e-Math.min(o,l))*i/2;return Bt(l,0,Math.min(o,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Bt(r.innerStart,0,s),innerEnd:Bt(r.innerEnd,0,s)}}function $e(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Oi(n,t,e,i,r,o){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,f=Math.max(t.outerRadius+i+e-c,0),h=u>0?u+i+e+c:0;let d=0;const g=r-l;if(i){const N=u>0?u-i:0,q=f>0?f-i:0,z=(N+q)/2,G=z!==0?g*z/(z+i):g;d=(g-G)/2}const p=Math.max(.001,g*f-e/wt)/f,m=(g-p)/2,y=l+m+d,v=r-m-d,{outerStart:_,outerEnd:b,innerStart:x,innerEnd:T}=Hp(t,h,f,v-y),S=f-_,k=f-b,P=y+_/S,E=v-b/k,w=h+x,A=h+T,j=y+x/w,M=v-T/A;if(n.beginPath(),o){const N=(P+E)/2;if(n.arc(s,a,f,P,N),n.arc(s,a,f,N,E),b>0){const B=$e(k,E,s,a);n.arc(B.x,B.y,b,E,v+Et)}const q=$e(A,v,s,a);if(n.lineTo(q.x,q.y),T>0){const B=$e(A,M,s,a);n.arc(B.x,B.y,T,v+Et,M+Math.PI)}const z=(v-T/h+(y+x/h))/2;if(n.arc(s,a,h,v-T/h,z,!0),n.arc(s,a,h,z,y+x/h,!0),x>0){const B=$e(w,j,s,a);n.arc(B.x,B.y,x,j+Math.PI,y-Et)}const G=$e(S,y,s,a);if(n.lineTo(G.x,G.y),_>0){const B=$e(S,P,s,a);n.arc(B.x,B.y,_,y-Et,P)}}else{n.moveTo(s,a);const N=Math.cos(P)*f+s,q=Math.sin(P)*f+a;n.lineTo(N,q);const z=Math.cos(E)*f+s,G=Math.sin(E)*f+a;n.lineTo(z,G)}n.closePath()}function Wp(n,t,e,i,r){const{fullCircles:o,startAngle:s,circumference:a}=t;let l=t.endAngle;if(o){Oi(n,t,e,i,l,r);for(let c=0;c<o;++c)n.fill();isNaN(a)||(l=s+(a%_t||_t))}return Oi(n,t,e,i,l,r),n.fill(),l}function Up(n,t,e,i,r){const{fullCircles:o,startAngle:s,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:h}=l,d=l.borderAlign==="inner";if(!c)return;n.setLineDash(f||[]),n.lineDashOffset=h,d?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let g=t.endAngle;if(o){Oi(n,t,e,i,g,r);for(let p=0;p<o;++p)n.stroke();isNaN(a)||(g=s+(a%_t||_t))}d&&qp(n,t,g),o||(Oi(n,t,e,i,g,r),n.stroke())}class yn extends ce{constructor(e){super();it(this,"circumference");it(this,"endAngle");it(this,"fullCircles");it(this,"innerRadius");it(this,"outerRadius");it(this,"pixelMargin");it(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.getProps(["x","y"],r),{angle:s,distance:a}=Ha(o,{x:e,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:f,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),d=(this.options.spacing+this.options.borderWidth)/2,g=ft(h,c-l),p=Mn(s,l,c)&&l!==c,m=g>=_t||p,y=Ke(a,u+d,f+d);return m&&y}getCenterPoint(e){const{x:i,y:r,startAngle:o,endAngle:s,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:u}=this.options,f=(o+s)/2,h=(a+l+u+c)/2;return{x:i+Math.cos(f)*h,y:r+Math.sin(f)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,o=(i.offset||0)/4,s=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>_t?Math.floor(r/_t):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(wt,r||0)),u=o*c;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,Wp(e,this,u,s,a),Up(e,this,u,s,a),e.restore()}}it(yn,"id","arc"),it(yn,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),it(yn,"defaultRoutes",{backgroundColor:"backgroundColor"}),it(yn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function dl(n,t,e=t){n.lineCap=ft(e.borderCapStyle,t.borderCapStyle),n.setLineDash(ft(e.borderDash,t.borderDash)),n.lineDashOffset=ft(e.borderDashOffset,t.borderDashOffset),n.lineJoin=ft(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=ft(e.borderWidth,t.borderWidth),n.strokeStyle=ft(e.borderColor,t.borderColor)}function Vp(n,t,e){n.lineTo(e.x,e.y)}function $p(n){return n.stepped?Oh:n.tension||n.cubicInterpolationMode==="monotone"?Sh:Vp}function pl(n,t,e={}){const i=n.length,{start:r=0,end:o=i-1}=e,{start:s,end:a}=t,l=Math.max(r,s),c=Math.min(o,a),u=r<s&&o<s||r>a&&o>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function Kp(n,t,e,i){const{points:r,options:o}=t,{count:s,start:a,loop:l,ilen:c}=pl(r,e,i),u=$p(o);let{move:f=!0,reverse:h}=i||{},d,g,p;for(d=0;d<=c;++d)g=r[(a+(h?c-d:d))%s],!g.skip&&(f?(n.moveTo(g.x,g.y),f=!1):u(n,p,g,h,o.stepped),p=g);return l&&(g=r[(a+(h?c:0))%s],u(n,p,g,h,o.stepped)),!!l}function Yp(n,t,e,i){const r=t.points,{count:o,start:s,ilen:a}=pl(r,e,i),{move:l=!0,reverse:c}=i||{};let u=0,f=0,h,d,g,p,m,y;const v=b=>(s+(c?a-b:b))%o,_=()=>{p!==m&&(n.lineTo(u,m),n.lineTo(u,p),n.lineTo(u,y))};for(l&&(d=r[v(0)],n.moveTo(d.x,d.y)),h=0;h<=a;++h){if(d=r[v(h)],d.skip)continue;const b=d.x,x=d.y,T=b|0;T===g?(x<p?p=x:x>m&&(m=x),u=(f*u+b)/++f):(_(),n.lineTo(b,x),g=T,f=0,p=m=x),y=x}_()}function gr(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Yp:Kp}function Gp(n){return n.stepped?id:n.tension||n.cubicInterpolationMode==="monotone"?rd:Le}function Xp(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),dl(n,t.options),n.stroke(r)}function Zp(n,t,e,i){const{segments:r,options:o}=t,s=gr(t);for(const a of r)dl(n,o,a.style),n.beginPath(),s(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const Jp=typeof Path2D=="function";function Qp(n,t,e,i){Jp&&!t.options.segment?Xp(n,t,e,i):Zp(n,t,e,i)}class Ye extends ce{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Gh(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hd(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],o=this.points,s=cd(this,{property:e,start:r,end:r});if(!s.length)return;const a=[],l=Gp(i);let c,u;for(c=0,u=s.length;c<u;++c){const{start:f,end:h}=s[c],d=o[f],g=o[h];if(d===g){a.push(d);continue}const p=Math.abs((r-d[e])/(g[e]-d[e])),m=l(d,g,p,i.stepped);m[e]=t[e],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,e,i){return gr(this)(t,this,e,i)}path(t,e,i){const r=this.segments,o=gr(this);let s=this._loop;e=e||0,i=i||this.points.length-e;for(const a of r)s&=o(t,this,a,{start:e,end:e+i-1});return!!s}draw(t,e,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Qp(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}it(Ye,"id","line"),it(Ye,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),it(Ye,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),it(Ye,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function bs(n,t,e,i){const r=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<r.radius+r.hitRadius}class Sn extends ce{constructor(e){super();it(this,"parsed");it(this,"skip");it(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(i-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return bs(this,e,"x",i)}inYRange(e,i){return bs(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){const r=this.options;this.skip||r.radius<.1||!ye(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,hr(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}it(Sn,"id","point"),it(Sn,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),it(Sn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const xs=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},tg=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class _s extends ce{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=vt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=jt(i.font),o=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=xs(i,o);let c,u;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(s,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(s,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let f=t;o.textAlign="left",o.textBaseline="middle";let h=-1,d=-u;return this.legendItems.forEach((g,p)=>{const m=i+e/2+o.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>s)&&(f+=u,c[c.length-(p>0?0:1)]=0,d+=u,h++),l[p]={left:0,top:d,row:h,width:m,height:r},c[c.length-1]+=m+a}),f}_fitCols(t,e,i,r){const{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=s-t;let f=a,h=0,d=0,g=0,p=0;return this.legendItems.forEach((m,y)=>{const{itemWidth:v,itemHeight:_}=eg(i,e,o,m,r);y>0&&d+_+2*a>u&&(f+=h+a,c.push({width:h,height:d}),g+=h+a,p++,h=d=0),l[y]={left:g,top:d,col:p,width:v,height:_},h=Math.max(h,v),d+=_+a}),f+=h,c.push({width:h,height:d}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,s=Ze(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Rt(i,this.left+r,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=Rt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=s.leftForLtr(s.x(l),c.width),l+=c.width+r}else{let a=0,l=Rt(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=Rt(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=s.leftForLtr(s.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Hr(t,this),this._draw(),Wr(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:s}=t,a=kt.color,l=Ze(t.rtl,this.left,this.width),c=jt(s.font),{padding:u}=s,f=c.size,h=f/2;let d;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=xs(s,f),y=function(T,S,k){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;r.save();const P=ft(k.lineWidth,1);if(r.fillStyle=ft(k.fillStyle,a),r.lineCap=ft(k.lineCap,"butt"),r.lineDashOffset=ft(k.lineDashOffset,0),r.lineJoin=ft(k.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=ft(k.strokeStyle,a),r.setLineDash(ft(k.lineDash,[])),s.usePointStyle){const E={radius:p*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:P},w=l.xPlus(T,g/2),A=S+h;Ka(r,E,w,A,s.pointStyleWidth&&g)}else{const E=S+Math.max((f-p)/2,0),w=l.leftForLtr(T,g),A=Xe(k.borderRadius);r.beginPath(),Object.values(A).some(j=>j!==0)?xi(r,{x:w,y:E,w:g,h:p,radius:A}):r.rect(w,E,g,p),r.fill(),P!==0&&r.stroke()}r.restore()},v=function(T,S,k){We(r,k.text,T,S+m/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},_=this.isHorizontal(),b=this._computeTitleHeight();_?d={x:Rt(o,this.left+u,this.right-i[0]),y:this.top+u+b,line:0}:d={x:this.left+u,y:Rt(o,this.top+b+u,this.bottom-e[0].height),line:0},Qa(this.ctx,t.textDirection);const x=m+u;this.legendItems.forEach((T,S)=>{r.strokeStyle=T.fontColor,r.fillStyle=T.fontColor;const k=r.measureText(T.text).width,P=l.textAlign(T.textAlign||(T.textAlign=s.textAlign)),E=g+h+k;let w=d.x,A=d.y;l.setWidth(this.width),_?S>0&&w+E+u>this.right&&(A=d.y+=x,d.line++,w=d.x=Rt(o,this.left+u,this.right-i[d.line])):S>0&&A+x>this.bottom&&(w=d.x=w+e[d.line].width+u,d.line++,A=d.y=Rt(o,this.top+b+u,this.bottom-e[d.line].height));const j=l.x(w);if(y(j,A,T),w=uh(P,w+g+h,_?w+E:this.right,t.rtl),v(l.x(w),A,T),_)d.x+=E+u;else if(typeof T.text!="string"){const M=c.lineHeight;d.y+=gl(T,M)+u}else d.y+=x}),tl(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=jt(e.font),r=It(e.padding);if(!e.display)return;const o=Ze(t.rtl,this.left,this.width),s=this.ctx,a=e.position,l=i.size/2,c=r.top+l;let u,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,f=Rt(t.align,f,this.right-h);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);u=c+Rt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const d=Rt(a,f,f+h);s.textAlign=o.textAlign(qr(a)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=i.string,We(s,e.text,d,u,i)}_computeTitleHeight(){const t=this.options.title,e=jt(t.font),i=It(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(Ke(t,this.left,this.right)&&Ke(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Ke(t,r.left,r.left+r.width)&&Ke(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!rg(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=tg(r,i);r&&!o&&vt(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&vt(e.onHover,[t,i,this],this)}else i&&vt(e.onClick,[t,i,this],this)}}function eg(n,t,e,i,r){const o=ng(i,n,t,e),s=ig(r,i,t.lineHeight);return{itemWidth:o,itemHeight:s}}function ng(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,s)=>o.length>s.length?o:s)),t+e.size/2+i.measureText(r).width}function ig(n,t,e){let i=n;return typeof t.text!="string"&&(i=gl(t,e)),i}function gl(n,t){const e=n.text?n.text.length:0;return t*e}function rg(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var ml={id:"legend",_element:_s,start(n,t,e){const i=n.legend=new _s({ctx:n.ctx,options:e,chart:n});Xt.configure(n,i,e),Xt.addBox(n,i)},stop(n){Xt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Xt.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:s,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),u=It(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:s&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class yl extends ce{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=St(i.text)?i.text.length:1;this._padding=It(i.padding);const o=r*jt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:o,options:s}=this,a=s.align;let l=0,c,u,f;return this.isHorizontal()?(u=Rt(a,i,o),f=e+t,c=o-i):(s.position==="left"?(u=i+t,f=Rt(a,r,e),l=wt*-.5):(u=o-t,f=Rt(a,e,r),l=wt*.5),c=r-e),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=jt(e.font),o=i.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);We(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:qr(e.align),textBaseline:"middle",translation:[s,a]})}}function og(n,t){const e=new yl({ctx:n.ctx,options:t,chart:n});Xt.configure(n,e,t),Xt.addBox(n,e),n.titleBlock=e}var vl={id:"title",_element:yl,start(n,t,e){og(n,e)},stop(n){const t=n.titleBlock;Xt.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Xt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vn={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=n.length;o<s;++o){const l=n[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ur(t,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function ie(n,t){return t&&(St(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function pe(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function sg(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:s,value:a}=o.getLabelAndValue(r);return{chart:n,label:s,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function ws(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:s,boxHeight:a}=t,l=jt(t.bodyFont),c=jt(t.titleFont),u=jt(t.footerFont),f=o.length,h=r.length,d=i.length,g=It(t.padding);let p=g.height,m=0,y=i.reduce((b,x)=>b+x.before.length+x.lines.length+x.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,f&&(p+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),y){const b=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=d*b+(y-d)*l.lineHeight+(y-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const _=function(b){m=Math.max(m,e.measureText(b).width+v)};return e.save(),e.font=c.string,yt(n.title,_),e.font=l.string,yt(n.beforeBody.concat(n.afterBody),_),v=t.displayColors?s+2+t.boxPadding:0,yt(i,b=>{yt(b.before,_),yt(b.lines,_),yt(b.after,_)}),v=0,e.font=u.string,yt(n.footer,_),e.restore(),m+=g.width,{width:m,height:p}}function ag(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function lg(n,t,e,i){const{x:r,width:o}=i,s=e.caretSize+e.caretPadding;if(n==="left"&&r+o+s>t.width||n==="right"&&r-o-s<0)return!0}function cg(n,t,e,i){const{x:r,width:o}=e,{width:s,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=o/2?c="left":r>=s-o/2&&(c="right"),lg(c,n,t,e)&&(c="center"),c}function Os(n,t,e){const i=e.yAlign||t.yAlign||ag(n,e);return{xAlign:e.xAlign||t.xAlign||cg(n,t,e,i),yAlign:i}}function ug(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function fg(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function Ss(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:s}=n,{xAlign:a,yAlign:l}=e,c=r+o,{topLeft:u,topRight:f,bottomLeft:h,bottomRight:d}=Xe(s);let g=ug(t,a);const p=fg(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+r:a==="right"&&(g+=Math.max(f,d)+r),{x:Bt(g,0,i.width-t.width),y:Bt(p,0,i.height-t.height)}}function Qn(n,t,e){const i=It(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function ks(n){return ie([],pe(n))}function hg(n,t,e){return Te(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Es(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const bl={beforeTitle:he,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:he,beforeBody:he,beforeLabel:he,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return xt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:he,afterBody:he,beforeFooter:he,footer:he,afterFooter:he};function qt(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?bl[t].call(e,i):r}class mr extends ce{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new nl(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=hg(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=qt(i,"beforeTitle",this,t),o=qt(i,"title",this,t),s=qt(i,"afterTitle",this,t);let a=[];return a=ie(a,pe(r)),a=ie(a,pe(o)),a=ie(a,pe(s)),a}getBeforeBody(t,e){return ks(qt(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return yt(t,o=>{const s={before:[],lines:[],after:[]},a=Es(i,o);ie(s.before,pe(qt(a,"beforeLabel",this,o))),ie(s.lines,qt(a,"label",this,o)),ie(s.after,pe(qt(a,"afterLabel",this,o))),r.push(s)}),r}getAfterBody(t,e){return ks(qt(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=qt(i,"beforeFooter",this,t),o=qt(i,"footer",this,t),s=qt(i,"afterFooter",this,t);let a=[];return a=ie(a,pe(r)),a=ie(a,pe(o)),a=ie(a,pe(s)),a}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],s=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(sg(this.chart,e[l]));return t.filter&&(a=a.filter((u,f,h)=>t.filter(u,f,h,i))),t.itemSort&&(a=a.sort((u,f)=>t.itemSort(u,f,i))),yt(a,u=>{const f=Es(t.callbacks,u);r.push(qt(f,"labelColor",this,u)),o.push(qt(f,"labelPointStyle",this,u)),s.push(qt(f,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,s=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const a=vn[i.position].call(this,r,this._eventPosition);s=this._createItems(i),this.title=this.getTitle(s,i),this.beforeBody=this.getBeforeBody(s,i),this.body=this.getBody(s,i),this.afterBody=this.getAfterBody(s,i),this.footer=this.getFooter(s,i);const l=this._size=ws(this,i),c=Object.assign({},a,l),u=Os(this.chart,i,c),f=Ss(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=s,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:s,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=Xe(a),{x:h,y:d}=t,{width:g,height:p}=e;let m,y,v,_,b,x;return o==="center"?(b=d+p/2,r==="left"?(m=h,y=m-s,_=b+s,x=b-s):(m=h+g,y=m+s,_=b-s,x=b+s),v=m):(r==="left"?y=h+Math.max(l,u)+s:r==="right"?y=h+g-Math.max(c,f)-s:y=this.caretX,o==="top"?(_=d,b=_-s,m=y-s,v=y+s):(_=d+p,b=_+s,m=y+s,v=y-s),x=_),{x1:m,x2:y,x3:v,y1:_,y2:b,y3:x}}drawTitle(t,e,i){const r=this.title,o=r.length;let s,a,l;if(o){const c=Ze(i.rtl,this.x,this.width);for(t.x=Qn(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",s=jt(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=s.string,l=0;l<o;++l)e.fillText(r[l],c.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+a,l+1===o&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,r,o){const s=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=o,u=jt(o.bodyFont),f=Qn(this,"left",o),h=r.x(f),d=l<u.lineHeight?(u.lineHeight-l)/2:0,g=e.y+d;if(o.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=r.leftForLtr(h,c)+c/2,y=g+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,hr(t,p,m,y),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,hr(t,p,m,y)}else{t.lineWidth=pt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const p=r.leftForLtr(h,c),m=r.leftForLtr(r.xPlus(h,1),c-2),y=Xe(s.borderRadius);Object.values(y).some(v=>v!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,xi(t,{x:p,y:g,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),xi(t,{x:m,y:g+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(p,g,c,l),t.strokeRect(p,g,c,l),t.fillStyle=s.backgroundColor,t.fillRect(m,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:s,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,f=jt(i.bodyFont);let h=f.lineHeight,d=0;const g=Ze(i.rtl,this.x,this.width),p=function(k){e.fillText(k,g.x(t.x+d),t.y+h/2),t.y+=h+o},m=g.textAlign(s);let y,v,_,b,x,T,S;for(e.textAlign=s,e.textBaseline="middle",e.font=f.string,t.x=Qn(this,m,i),e.fillStyle=i.bodyColor,yt(this.beforeBody,p),d=a&&m!=="right"?s==="center"?c/2+u:c+2+u:0,b=0,T=r.length;b<T;++b){for(y=r[b],v=this.labelTextColors[b],e.fillStyle=v,yt(y.before,p),_=y.lines,a&&_.length&&(this._drawColorBox(e,t,b,g,i),h=Math.max(f.lineHeight,l)),x=0,S=_.length;x<S;++x)p(_[x]),h=f.lineHeight;yt(y.after,p)}d=0,h=f.lineHeight,yt(this.afterBody,p),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let s,a;if(o){const l=Ze(i.rtl,this.x,this.width);for(t.x=Qn(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",s=jt(i.footerFont),e.fillStyle=i.footerColor,e.font=s.string,a=0;a<o;++a)e.fillText(r[a],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:s}=this,{x:a,y:l}=t,{width:c,height:u}=i,{topLeft:f,topRight:h,bottomLeft:d,bottomRight:g}=Xe(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(a+f,l),s==="top"&&this.drawCaret(t,e,i,r),e.lineTo(a+c-h,l),e.quadraticCurveTo(a+c,l,a+c,l+h),s==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(a+c,l+u-g),e.quadraticCurveTo(a+c,l+u,a+c-g,l+u),s==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(a+d,l+u),e.quadraticCurveTo(a,l+u,a,l+u-d),s==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(a,l+f),e.quadraticCurveTo(a,l,a+f,l),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const s=vn[t.position].call(this,this._active,this._eventPosition);if(!s)return;const a=this._size=ws(this,t),l=Object.assign({},s,this._size),c=Os(e,t,l),u=Ss(t,l,c,e);(r._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const s=It(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),Qa(t,e.textDirection),o.y+=s.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),tl(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!gi(i,r),s=this._positionChanged(r,e);(o||s)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],s=this._getActiveElements(t,o,e,i),a=this._positionChanged(s,t),l=e||!gi(s,o)||a;return l&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const s=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,s=vn[o.position].call(this,t,e);return s!==!1&&(i!==s.x||r!==s.y)}}it(mr,"positioners",vn);var xl={id:"tooltip",_element:mr,positioners:vn,afterInit(n,t,e){e&&(n.tooltip=new mr({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bl},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const dg=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function pg(n,t,e,i){const r=n.indexOf(t);if(r===-1)return dg(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const gg=(n,t)=>n===null?null:Bt(Math.round(n),0,t);function As(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class Si extends Ue{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(xt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:pg(i,t,ft(e,t),this._addedLabels),gg(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let s=t;s<=e;s++)r.push({value:s});return r}getLabelForValue(t){return As.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}it(Si,"id","category"),it(Si,"defaults",{ticks:{callback:As}});function mg(n,t){const e=[],{bounds:r,step:o,min:s,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:h}=n,d=o||1,g=u-1,{min:p,max:m}=t,y=!xt(s),v=!xt(a),_=!xt(c),b=(m-p)/(f+1);let x=Ro((m-p)/g/d)*d,T,S,k,P;if(x<1e-14&&!y&&!v)return[{value:p},{value:m}];P=Math.ceil(m/x)-Math.floor(p/x),P>g&&(x=Ro(P*x/g/d)*d),xt(l)||(T=Math.pow(10,l),x=Math.ceil(x*T)/T),r==="ticks"?(S=Math.floor(p/x)*x,k=Math.ceil(m/x)*x):(S=p,k=m),y&&v&&o&&nh((a-s)/o,x/1e3)?(P=Math.round(Math.min((a-s)/x,u)),x=(a-s)/P,S=s,k=a):_?(S=y?s:S,k=v?a:k,P=c-1,x=(k-S)/P):(P=(k-S)/x,_n(P,Math.round(P),x/1e3)?P=Math.round(P):P=Math.ceil(P));const E=Math.max(Lo(x),Lo(S));T=Math.pow(10,xt(l)?E:l),S=Math.round(S*T)/T,k=Math.round(k*T)/T;let w=0;for(y&&(h&&S!==s?(e.push({value:s}),S<s&&w++,_n(Math.round((S+w*x)*T)/T,s,Ts(s,b,n))&&w++):S<s&&w++);w<P;++w){const A=Math.round((S+w*x)*T)/T;if(v&&A>a)break;e.push({value:A})}return v&&h&&k!==a?e.length&&_n(e[e.length-1].value,a,Ts(a,b,n))?e[e.length-1].value=a:e.push({value:a}):(!v||k===a)&&e.push({value:k}),e}function Ts(n,t,{horizontal:e,minRotation:i}){const r=le(i),o=(e?Math.sin(r):Math.cos(r))||.001,s=.75*t*(""+n).length;return Math.min(t/o,s)}class ki extends Ue{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return xt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const s=l=>r=e?r:l,a=l=>o=i?o:l;if(t){const l=Qe(r),c=Qe(o);l<0&&c<0?a(0):l>0&&c>0&&s(0)}if(r===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||s(r-l)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,s=mg(r,o);return t.bounds==="ticks"&&za(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Di(t,this.chart.options.locale,this.options.ticks.format)}}class Ei extends ki{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Mt(t)?t:0,this.max=Mt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=le(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}it(Ei,"id","linear"),it(Ei,"defaults",{ticks:{callback:Ii.formatters.numeric}});const Ln=n=>Math.floor(ke(n)),Me=(n,t)=>Math.pow(10,Ln(n)+t);function Ps(n){return n/Math.pow(10,Ln(n))===1}function js(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function yg(n,t){const e=t-n;let i=Ln(e);for(;js(n,t,i)>10;)i++;for(;js(n,t,i)<10;)i--;return Math.min(i,Ln(n))}function vg(n,{min:t,max:e}){t=$t(n.min,t);const i=[],r=Ln(t);let o=yg(t,e),s=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=r>o?Math.pow(10,r):0,c=Math.round((t-l)*s)/s,u=Math.floor((t-l)/a/10)*a*10;let f=Math.floor((c-u)/Math.pow(10,o)),h=$t(n.min,Math.round((l+u+f*Math.pow(10,o))*s)/s);for(;h<e;)i.push({value:h,major:Ps(h),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(o++,f=2,s=o>=0?1:s),h=Math.round((l+u+f*Math.pow(10,o))*s)/s;const d=$t(n.max,h);return i.push({value:d,major:Ps(d),significand:f}),i}class Cs extends Ue{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=ki.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Mt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Mt(t)?Math.max(0,t):null,this.max=Mt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Mt(this._userMin)&&(this.min=t===Me(this.min,0)?Me(this.min,-1):Me(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const o=a=>i=t?i:a,s=a=>r=e?r:a;i===r&&(i<=0?(o(1),s(10)):(o(Me(i,-1)),s(Me(r,1)))),i<=0&&o(Me(r,-1)),r<=0&&s(Me(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=vg(e,this);return t.bounds==="ticks"&&za(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Di(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ke(t),this._valueRange=ke(this.max)-ke(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ke(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}it(Cs,"id","logarithmic"),it(Cs,"defaults",{ticks:{callback:Ii.formatters.logarithmic,major:{enabled:!0}}});function yr(n){const t=n.ticks;if(t.display&&n.display){const e=It(t.backdropPadding);return ft(t.font&&t.font.size,kt.font.size)+e.height}return 0}function bg(n,t,e){return e=St(e)?e:[e],{w:wh(n,t.string,e),h:e.length*t.lineHeight}}function Ms(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function xg(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],o=n._pointLabels.length,s=n.options.pointLabels,a=s.centerPointLabels?wt/o:0;for(let l=0;l<o;l++){const c=s.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],a),f=jt(c.font),h=bg(n.ctx,f,n._pointLabels[l]);i[l]=h;const d=Zt(n.getIndexAngle(l)+a),g=Math.round(Br(d)),p=Ms(g,u.x,h.w,0,180),m=Ms(g,u.y,h.h,90,270);_g(e,t,d,p,m)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=Sg(n,i,r)}function _g(n,t,e,i,r){const o=Math.abs(Math.sin(e)),s=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/o,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/o,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/s,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/s,n.b=Math.max(n.b,t.b+l))}function wg(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:o,padding:s,size:a}=e,l=n.getPointPosition(t,i+r+s,o),c=Math.round(Br(Zt(l.angle+Et))),u=Ag(l.y,a.h,c),f=kg(c),h=Eg(l.x,a.w,f);return{visible:!0,x:l.x,y:u,textAlign:f,left:h,top:u,right:h+a.w,bottom:u+a.h}}function Og(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:o}=n;return!(ye({x:e,y:i},t)||ye({x:e,y:o},t)||ye({x:r,y:i},t)||ye({x:r,y:o},t))}function Sg(n,t,e){const i=[],r=n._pointLabels.length,o=n.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:yr(o)/2,additionalAngle:s?wt/r:0};let c;for(let u=0;u<r;u++){l.padding=e[u],l.size=t[u];const f=wg(n,u,l);i.push(f),a==="auto"&&(f.visible=Og(f,c),f.visible&&(c=f))}return i}function kg(n){return n===0||n===180?"center":n<180?"left":"right"}function Eg(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function Ag(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function Tg(n,t,e){const{left:i,top:r,right:o,bottom:s}=e,{backdropColor:a}=t;if(!xt(a)){const l=Xe(t.borderRadius),c=It(t.backdropPadding);n.fillStyle=a;const u=i-c.left,f=r-c.top,h=o-i+c.width,d=s-r+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),xi(n,{x:u,y:f,w:h,h:d,radius:l}),n.fill()):n.fillRect(u,f,h,d)}}function Pg(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const o=n._pointLabelItems[r];if(!o.visible)continue;const s=i.setContext(n.getPointLabelContext(r));Tg(e,s,o);const a=jt(s.font),{x:l,y:c,textAlign:u}=o;We(e,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:s.color,textAlign:u,textBaseline:"middle"})}}function _l(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,_t);else{let o=n.getPointPosition(0,t);r.moveTo(o.x,o.y);for(let s=1;s<i;s++)o=n.getPointPosition(s,t),r.lineTo(o.x,o.y)}}function jg(n,t,e,i,r){const o=n.ctx,s=t.circular,{color:a,lineWidth:l}=t;!s&&!i||!a||!l||e<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),_l(n,e,s,i),o.closePath(),o.stroke(),o.restore())}function Cg(n,t,e){return Te(n,{label:e,index:t,type:"pointLabel"})}class ti extends ki{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=It(yr(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Mt(t)&&!isNaN(t)?t:0,this.max=Mt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/yr(this.options))}generateTickLabels(t){ki.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=vt(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?xg(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=_t/(this._pointLabels.length||1),i=this.options.startAngle||0;return Zt(t*e+le(i))}getDistanceFromCenterForValue(t){if(xt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(xt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return Cg(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Et+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),_l(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:o}=e,s=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&Pg(this,s),r.display&&this.ticks.forEach((u,f)=>{if(f!==0||f===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(f),d=r.setContext(h),g=o.setContext(h);jg(this,d,l,s,g)}}),i.display){for(t.save(),a=s-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:h}=u;!h||!f||(t.lineWidth=h,t.strokeStyle=f,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let o,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),u=jt(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,s=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const f=It(c.backdropPadding);t.fillRect(-s/2-f.left,-o-u.size/2-f.top,s+f.width,u.size+f.height)}We(t,a.label,0,-o,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}it(ti,"id","radialLinear"),it(ti,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ii.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),it(ti,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),it(ti,"descriptors",{angleLines:{_fallback:"grid"}});const Fi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zt=Object.keys(Fi);function Rs(n,t){return n-t}function Ls(n,t){if(xt(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let s=t;return typeof i=="function"&&(s=i(s)),Mt(s)||(s=typeof i=="string"?e.parse(s,i):e.parse(s)),s===null?null:(r&&(s=r==="week"&&(Cn(o)||o===!0)?e.startOf(s,"isoWeek",o):e.startOf(s,r)),+s)}function Ns(n,t,e,i){const r=zt.length;for(let o=zt.indexOf(n);o<r-1;++o){const s=Fi[zt[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((e-t)/(a*s.size))<=i)return zt[o]}return zt[r-1]}function Mg(n,t,e,i,r){for(let o=zt.length-1;o>=zt.indexOf(e);o--){const s=zt[o];if(Fi[s].common&&n._adapter.diff(r,i,s)>=t-1)return s}return zt[e?zt.indexOf(e):0]}function Rg(n){for(let t=zt.indexOf(n)+1,e=zt.length;t<e;++t)if(Fi[zt[t]].common)return zt[t]}function Ds(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=Fr(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function Lg(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),s=t[t.length-1].value;let a,l;for(a=o;a<=s;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function Is(n,t,e){const i=[],r={},o=t.length;let s,a;for(s=0;s<o;++s)a=t[s],r[a]=s,i.push({value:a,major:!1});return o===0||!e?i:Lg(n,i,r,e)}class Ai extends Ue{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new jd._date(t.adapters.date);r.init(e),xn(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Ls(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:s,maxDefined:a}=this.getUserBounds();function l(c){!s&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!s||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Mt(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=Mt(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,s=this.max,a=sh(r,o,s);return this._unit=e.unit||(i.autoSkip?Ns(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):Mg(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Rg(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),Is(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;e=Bt(e,0,s),i=Bt(i,0,s),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,s=o.unit||Ns(o.minUnit,e,i,this._getLabelCapacity(e)),a=ft(r.ticks.stepSize,1),l=s==="week"?o.isoWeekday:!1,c=Cn(l)||l===!0,u={};let f=e,h,d;if(c&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,c?"day":s),t.diff(i,e,s)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+s);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(h=f,d=0;h<i;h=+t.add(h,a,s),d++)Ds(u,h,g);return(h===i||r.bounds==="ticks"||d===1)&&Ds(u,h,g),Object.keys(u).sort(Rs).map(p=>+p)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,s=e||r[o];return this._adapter.format(t,s)}_tickFormatFunction(t,e,i,r){const o=this.options,s=o.ticks.callback;if(s)return vt(s,[t,e,i],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],h=i[e],d=c&&f&&h&&h.major;return this._adapter.format(t,r||(d?f:u))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=le(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*o+a*s,h:i*s+a*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,Is(this,[t],this._majorUnit),r),s=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(Ls(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return lh(t.sort(Rs))}}it(Ai,"id","time"),it(Ai,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ei(n,t,e){let i=0,r=n.length-1,o,s,a,l;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Ie(n,"pos",t)),{pos:o,time:a}=n[i],{pos:s,time:l}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Ie(n,"time",t)),{time:o,pos:a}=n[i],{time:s,pos:l}=n[r]);const c=s-o;return c?a+(l-a)*(t-o)/c:a}class Bs extends Ai{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ei(e,this.min),this._tableRange=ei(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let s,a,l,c,u;for(s=0,a=t.length;s<a;++s)c=t[s],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(s=0,a=r.length;s<a;++s)u=r[s+1],l=r[s-1],c=r[s],Math.round((u+l)/2)!==c&&o.push({time:c,pos:s/(a-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ei(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return ei(this._table,i*this._tableRange+this._minPos,!0)}}it(Bs,"id","timeseries"),it(Bs,"defaults",Ai.defaults);const wl="label";function Fs(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function Ng(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function Ol(n,t){n.labels=t}function Sl(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wl;const i=[];n.datasets=t.map(r=>{const o=n.datasets.find(s=>s[e]===r[e]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function Dg(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wl;const e={labels:[],datasets:[]};return Ol(e,n.labels),Sl(e,n.datasets,t),e}function Ig(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:s,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:f,...h}=n,d=J.useRef(null),g=J.useRef(),p=()=>{d.current&&(g.current=new Bn(d.current,{type:s,data:Dg(a,o),options:l&&{...l},plugins:c}),Fs(t,g.current))},m=()=>{Fs(t,null),g.current&&(g.current.destroy(),g.current=null)};return J.useEffect(()=>{!r&&g.current&&l&&Ng(g.current,l)},[r,l]),J.useEffect(()=>{!r&&g.current&&Ol(g.current.config.data,a.labels)},[r,a.labels]),J.useEffect(()=>{!r&&g.current&&a.datasets&&Sl(g.current.config.data,a.datasets,o)},[r,a.datasets]),J.useEffect(()=>{g.current&&(r?(m(),setTimeout(p)):g.current.update(f))},[r,l,a.labels,a.datasets,f]),J.useEffect(()=>{g.current&&(m(),setTimeout(p))},[s]),J.useEffect(()=>(p(),()=>m()),[]),En.createElement("canvas",Object.assign({ref:d,role:"img",height:e,width:i},h),u)}const Bg=J.forwardRef(Ig);function kl(n,t){return Bn.register(t),J.forwardRef((e,i)=>En.createElement(Bg,Object.assign({},e,{ref:i,type:n})))}const El=kl("line",li),Fg=kl("doughnut",gn);Bn.register(Si,Ei,Sn,Ye,vl,xl,ml,yn);const qg=({postId:n})=>{var l;const[t,e]=J.useState(null),[i,r]=J.useState(!0);J.useEffect(()=>{o()},[n]);const o=async()=>{try{const c=await wf.getPostStats(n);e(c)}catch(c){console.error("Error loading blog stats:",c)}finally{r(!1)}};if(i)return O.jsx(Kl,{});if(!t)return O.jsx(et,{color:"error",children:"Error loading statistics"});const s={labels:["Desktop","Mobile","Tablet"],datasets:[{data:[t.deviceStats.desktop,t.deviceStats.mobile,t.deviceStats.tablet],backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(75, 192, 192, 0.8)"]}]},a=(l=t.demographicData)!=null&&l.countries?{labels:Object.keys(t.demographicData.countries),datasets:[{label:"Views by Country",data:Object.values(t.demographicData.countries),borderColor:"rgba(75, 192, 192, 1)",tension:.1}]}:null;return O.jsxs(Dt,{sx:{p:3},children:[O.jsx(et,{variant:"h6",gutterBottom:!0,children:"Post Statistics"}),O.jsxs(dt,{container:!0,spacing:3,children:[O.jsx(dt,{item:!0,xs:12,md:3,children:O.jsx(oe,{children:O.jsxs(se,{children:[O.jsxs(rt,{display:"flex",alignItems:"center",children:[O.jsx(Qs,{sx:{mr:1}}),O.jsx(et,{variant:"subtitle1",children:"Views"}),O.jsx(Vs,{title:"Total number of page views",children:O.jsx(Ht,{size:"small",children:O.jsx(Yl,{fontSize:"small"})})})]}),O.jsx(et,{variant:"h4",children:t.views}),O.jsxs(et,{variant:"body2",color:"textSecondary",children:[t.uniqueVisitors," unique visitors"]})]})})}),O.jsx(dt,{item:!0,xs:12,md:3,children:O.jsx(oe,{children:O.jsxs(se,{children:[O.jsxs(rt,{display:"flex",alignItems:"center",children:[O.jsx(Gl,{sx:{mr:1}}),O.jsx(et,{variant:"subtitle1",children:"Engagement"})]}),O.jsxs(et,{variant:"h4",children:[(t.engagementMetrics.commentRate*100).toFixed(1),"%"]}),O.jsx(et,{variant:"body2",color:"textSecondary",children:"Comment rate"})]})})}),O.jsx(dt,{item:!0,xs:12,md:3,children:O.jsx(oe,{children:O.jsxs(se,{children:[O.jsxs(rt,{display:"flex",alignItems:"center",children:[O.jsx(Xl,{sx:{mr:1}}),O.jsx(et,{variant:"subtitle1",children:"Avg. Time"})]}),O.jsxs(et,{variant:"h4",children:[Math.round(t.engagementMetrics.averageTimeOnPage),"s"]}),O.jsx(et,{variant:"body2",color:"textSecondary",children:"Time on page"})]})})}),O.jsx(dt,{item:!0,xs:12,md:3,children:O.jsx(oe,{children:O.jsxs(se,{children:[O.jsxs(rt,{display:"flex",alignItems:"center",children:[O.jsx(Zl,{sx:{mr:1}}),O.jsx(et,{variant:"subtitle1",children:"Bounce Rate"})]}),O.jsxs(et,{variant:"h4",children:[(t.engagementMetrics.bounceRate*100).toFixed(1),"%"]}),O.jsx(et,{variant:"body2",color:"textSecondary",children:"Single page sessions"})]})})}),O.jsx(dt,{item:!0,xs:12,md:6,children:O.jsx(oe,{children:O.jsxs(se,{children:[O.jsx(et,{variant:"subtitle1",gutterBottom:!0,children:"Device Distribution"}),O.jsx(rt,{height:300,children:O.jsx(Fg,{data:s,options:{responsive:!0,maintainAspectRatio:!1}})})]})})}),a&&O.jsx(dt,{item:!0,xs:12,md:6,children:O.jsx(oe,{children:O.jsxs(se,{children:[O.jsx(et,{variant:"subtitle1",gutterBottom:!0,children:"Geographic Distribution"}),O.jsx(rt,{height:300,children:O.jsx(El,{data:a,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})})]})})})]})]})};var Al={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(n,t){(function(i,r){n.exports=r()})(typeof self<"u"?self:ve,function(){return function(e){var i={};function r(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=i,r.d=function(o,s,a){r.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:a})},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=109)}([function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(17),s=r(18),a=r(19),l=r(45),c=r(46),u=r(47),f=r(48),h=r(49),d=r(12),g=r(32),p=r(33),m=r(31),y=r(1),v={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:o.default,Format:s.default,Leaf:a.default,Embed:f.default,Scroll:l.default,Block:u.default,Inline:c.default,Text:h.default,Attributor:{Attribute:d.default,Class:g.default,Style:p.default,Store:m.default}};i.default=v},function(e,i,r){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var _ in v)v.hasOwnProperty(_)&&(y[_]=v[_])};return function(y,v){m(y,v);function _(){this.constructor=y}y.prototype=v===null?Object.create(v):(_.prototype=v.prototype,new _)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=function(m){o(y,m);function y(v){var _=this;return v="[Parchment] "+v,_=m.call(this,v)||this,_.message=v,_.name=_.constructor.name,_}return y}(Error);i.ParchmentError=s;var a={},l={},c={},u={};i.DATA_KEY="__blot";var f;(function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"})(f=i.Scope||(i.Scope={}));function h(m,y){var v=g(m);if(v==null)throw new s("Unable to create "+m+" blot");var _=v,b=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:_.create(y);return new _(b,y)}i.create=h;function d(m,y){return y===void 0&&(y=!1),m==null?null:m[i.DATA_KEY]!=null?m[i.DATA_KEY].blot:y?d(m.parentNode,y):null}i.find=d;function g(m,y){y===void 0&&(y=f.ANY);var v;if(typeof m=="string")v=u[m]||a[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)v=u.text;else if(typeof m=="number")m&f.LEVEL&f.BLOCK?v=u.block:m&f.LEVEL&f.INLINE&&(v=u.inline);else if(m instanceof HTMLElement){var _=(m.getAttribute("class")||"").split(/\s+/);for(var b in _)if(v=l[_[b]],v)break;v=v||c[m.tagName]}return v==null?null:y&f.LEVEL&v.scope&&y&f.TYPE&v.scope?v:null}i.query=g;function p(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];if(m.length>1)return m.map(function(b){return p(b)});var v=m[0];if(typeof v.blotName!="string"&&typeof v.attrName!="string")throw new s("Invalid definition");if(v.blotName==="abstract")throw new s("Cannot register abstract class");if(u[v.blotName||v.attrName]=v,typeof v.keyName=="string")a[v.keyName]=v;else if(v.className!=null&&(l[v.className]=v),v.tagName!=null){Array.isArray(v.tagName)?v.tagName=v.tagName.map(function(b){return b.toUpperCase()}):v.tagName=v.tagName.toUpperCase();var _=Array.isArray(v.tagName)?v.tagName:[v.tagName];_.forEach(function(b){(c[b]==null||v.className==null)&&(c[b]=v)})}return v}i.register=p},function(e,i,r){var o=r(51),s=r(11),a=r(3),l=r(20),c=String.fromCharCode(0),u=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};u.prototype.insert=function(f,h){var d={};return f.length===0?this:(d.insert=f,h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(d.attributes=h),this.push(d))},u.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},u.prototype.retain=function(f,h){if(f<=0)return this;var d={retain:f};return h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(d.attributes=h),this.push(d)},u.prototype.push=function(f){var h=this.ops.length,d=this.ops[h-1];if(f=a(!0,{},f),typeof d=="object"){if(typeof f.delete=="number"&&typeof d.delete=="number")return this.ops[h-1]={delete:d.delete+f.delete},this;if(typeof d.delete=="number"&&f.insert!=null&&(h-=1,d=this.ops[h-1],typeof d!="object"))return this.ops.unshift(f),this;if(s(f.attributes,d.attributes)){if(typeof f.insert=="string"&&typeof d.insert=="string")return this.ops[h-1]={insert:d.insert+f.insert},typeof f.attributes=="object"&&(this.ops[h-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof d.retain=="number")return this.ops[h-1]={retain:d.retain+f.retain},typeof f.attributes=="object"&&(this.ops[h-1].attributes=f.attributes),this}}return h===this.ops.length?this.ops.push(f):this.ops.splice(h,0,f),this},u.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},u.prototype.filter=function(f){return this.ops.filter(f)},u.prototype.forEach=function(f){this.ops.forEach(f)},u.prototype.map=function(f){return this.ops.map(f)},u.prototype.partition=function(f){var h=[],d=[];return this.forEach(function(g){var p=f(g)?h:d;p.push(g)}),[h,d]},u.prototype.reduce=function(f,h){return this.ops.reduce(f,h)},u.prototype.changeLength=function(){return this.reduce(function(f,h){return h.insert?f+l.length(h):h.delete?f-h.delete:f},0)},u.prototype.length=function(){return this.reduce(function(f,h){return f+l.length(h)},0)},u.prototype.slice=function(f,h){f=f||0,typeof h!="number"&&(h=1/0);for(var d=[],g=l.iterator(this.ops),p=0;p<h&&g.hasNext();){var m;p<f?m=g.next(f-p):(m=g.next(h-p),d.push(m)),p+=l.length(m)}return new u(d)},u.prototype.compose=function(f){var h=l.iterator(this.ops),d=l.iterator(f.ops),g=[],p=d.peek();if(p!=null&&typeof p.retain=="number"&&p.attributes==null){for(var m=p.retain;h.peekType()==="insert"&&h.peekLength()<=m;)m-=h.peekLength(),g.push(h.next());p.retain-m>0&&d.next(p.retain-m)}for(var y=new u(g);h.hasNext()||d.hasNext();)if(d.peekType()==="insert")y.push(d.next());else if(h.peekType()==="delete")y.push(h.next());else{var v=Math.min(h.peekLength(),d.peekLength()),_=h.next(v),b=d.next(v);if(typeof b.retain=="number"){var x={};typeof _.retain=="number"?x.retain=v:x.insert=_.insert;var T=l.attributes.compose(_.attributes,b.attributes,typeof _.retain=="number");if(T&&(x.attributes=T),y.push(x),!d.hasNext()&&s(y.ops[y.ops.length-1],x)){var S=new u(h.rest());return y.concat(S).chop()}}else typeof b.delete=="number"&&typeof _.retain=="number"&&y.push(b)}return y.chop()},u.prototype.concat=function(f){var h=new u(this.ops.slice());return f.ops.length>0&&(h.push(f.ops[0]),h.ops=h.ops.concat(f.ops.slice(1))),h},u.prototype.diff=function(f,h){if(this.ops===f.ops)return new u;var d=[this,f].map(function(v){return v.map(function(_){if(_.insert!=null)return typeof _.insert=="string"?_.insert:c;var b=v===f?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),g=new u,p=o(d[0],d[1],h),m=l.iterator(this.ops),y=l.iterator(f.ops);return p.forEach(function(v){for(var _=v[1].length;_>0;){var b=0;switch(v[0]){case o.INSERT:b=Math.min(y.peekLength(),_),g.push(y.next(b));break;case o.DELETE:b=Math.min(_,m.peekLength()),m.next(b),g.delete(b);break;case o.EQUAL:b=Math.min(m.peekLength(),y.peekLength(),_);var x=m.next(b),T=y.next(b);s(x.insert,T.insert)?g.retain(b,l.attributes.diff(x.attributes,T.attributes)):g.push(T).delete(b);break}_-=b}}),g.chop()},u.prototype.eachLine=function(f,h){h=h||`
`;for(var d=l.iterator(this.ops),g=new u,p=0;d.hasNext();){if(d.peekType()!=="insert")return;var m=d.peek(),y=l.length(m)-d.peekLength(),v=typeof m.insert=="string"?m.insert.indexOf(h,y)-y:-1;if(v<0)g.push(d.next());else if(v>0)g.push(d.next(v));else{if(f(g,d.next(1).attributes||{},p)===!1)return;p+=1,g=new u}}g.length()>0&&f(g,{},p)},u.prototype.transform=function(f,h){if(h=!!h,typeof f=="number")return this.transformPosition(f,h);for(var d=l.iterator(this.ops),g=l.iterator(f.ops),p=new u;d.hasNext()||g.hasNext();)if(d.peekType()==="insert"&&(h||g.peekType()!=="insert"))p.retain(l.length(d.next()));else if(g.peekType()==="insert")p.push(g.next());else{var m=Math.min(d.peekLength(),g.peekLength()),y=d.next(m),v=g.next(m);if(y.delete)continue;v.delete?p.push(v):p.retain(m,l.attributes.transform(y.attributes,v.attributes,h))}return p.chop()},u.prototype.transformPosition=function(f,h){h=!!h;for(var d=l.iterator(this.ops),g=0;d.hasNext()&&g<=f;){var p=d.peekLength(),m=d.peekType();if(d.next(),m==="delete"){f-=Math.min(p,f-g);continue}else m==="insert"&&(g<f||!h)&&(f+=p);g+=p}return f},e.exports=u},function(e,i){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(d){return typeof Array.isArray=="function"?Array.isArray(d):o.call(d)==="[object Array]"},c=function(d){if(!d||o.call(d)!=="[object Object]")return!1;var g=r.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&r.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!g&&!p)return!1;var m;for(m in d);return typeof m>"u"||r.call(d,m)},u=function(d,g){s&&g.name==="__proto__"?s(d,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):d[g.name]=g.newValue},f=function(d,g){if(g==="__proto__")if(r.call(d,g)){if(a)return a(d,g).value}else return;return d[g]};e.exports=function h(){var d,g,p,m,y,v,_=arguments[0],b=1,x=arguments.length,T=!1;for(typeof _=="boolean"&&(T=_,_=arguments[1]||{},b=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});b<x;++b)if(d=arguments[b],d!=null)for(g in d)p=f(_,g),m=f(d,g),_!==m&&(T&&m&&(c(m)||(y=l(m)))?(y?(y=!1,v=p&&l(p)?p:[]):v=p&&c(p)?p:{},u(_,{name:g,newValue:h(T,v,m)})):typeof m<"u"&&u(_,{name:g,newValue:m}));return _}},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BlockEmbed=i.bubbleFormats=void 0;var o=function(){function w(A,j){for(var M=0;M<j.length;M++){var N=j[M];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(A,N.key,N)}}return function(A,j,M){return j&&w(A.prototype,j),M&&w(A,M),A}}(),s=function w(A,j,M){A===null&&(A=Function.prototype);var N=Object.getOwnPropertyDescriptor(A,j);if(N===void 0){var q=Object.getPrototypeOf(A);return q===null?void 0:w(q,j,M)}else{if("value"in N)return N.value;var z=N.get;return z===void 0?void 0:z.call(M)}},a=r(3),l=_(a),c=r(2),u=_(c),f=r(0),h=_(f),d=r(16),g=_(d),p=r(6),m=_(p),y=r(7),v=_(y);function _(w){return w&&w.__esModule?w:{default:w}}function b(w,A){if(!(w instanceof A))throw new TypeError("Cannot call a class as a function")}function x(w,A){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:w}function T(w,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);w.prototype=Object.create(A&&A.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(w,A):w.__proto__=A)}var S=1,k=function(w){T(A,w);function A(){return b(this,A),x(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"attach",value:function(){s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new h.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new u.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(M,N){var q=h.default.query(M,h.default.Scope.BLOCK_ATTRIBUTE);q!=null&&this.attributes.attribute(q,N)}},{key:"formatAt",value:function(M,N,q,z){this.format(q,z)}},{key:"insertAt",value:function(M,N,q){if(typeof N=="string"&&N.endsWith(`
`)){var z=h.default.create(P.blotName);this.parent.insertBefore(z,M===0?this:this.next),z.insertAt(0,N.slice(0,-1))}else s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,M,N,q)}}]),A}(h.default.Embed);k.scope=h.default.Scope.BLOCK_BLOT;var P=function(w){T(A,w);function A(j){b(this,A);var M=x(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,j));return M.cache={},M}return o(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(h.default.Leaf).reduce(function(M,N){return N.length()===0?M:M.insert(N.value(),E(N))},new u.default).insert(`
`,E(this))),this.cache.delta}},{key:"deleteAt",value:function(M,N){s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,M,N),this.cache={}}},{key:"formatAt",value:function(M,N,q,z){N<=0||(h.default.query(q,h.default.Scope.BLOCK)?M+N===this.length()&&this.format(q,z):s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,M,Math.min(N,this.length()-M-1),q,z),this.cache={})}},{key:"insertAt",value:function(M,N,q){if(q!=null)return s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,M,N,q);if(N.length!==0){var z=N.split(`
`),G=z.shift();G.length>0&&(M<this.length()-1||this.children.tail==null?s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(M,this.length()-1),G):this.children.tail.insertAt(this.children.tail.length(),G),this.cache={});var B=this;z.reduce(function(I,C){return B=B.split(I,!0),B.insertAt(0,C),C.length},M+G.length)}}},{key:"insertBefore",value:function(M,N){var q=this.children.head;s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,M,N),q instanceof g.default&&q.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(M,N){s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,M,N),this.cache={}}},{key:"optimize",value:function(M){s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,M),this.cache={}}},{key:"path",value:function(M){return s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,M,!0)}},{key:"removeChild",value:function(M){s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,M),this.cache={}}},{key:"split",value:function(M){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N&&(M===0||M>=this.length()-S)){var q=this.clone();return M===0?(this.parent.insertBefore(q,this),this):(this.parent.insertBefore(q,this.next),q)}else{var z=s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,M,N);return this.cache={},z}}}]),A}(h.default.Block);P.blotName="block",P.tagName="P",P.defaultChild="break",P.allowedChildren=[m.default,h.default.Embed,v.default];function E(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return w==null||(typeof w.formats=="function"&&(A=(0,l.default)(A,w.formats())),w.parent==null||w.parent.blotName=="scroll"||w.parent.statics.scope!==w.statics.scope)?A:E(w.parent,A)}i.bubbleFormats=E,i.BlockEmbed=k,i.default=P},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.overload=i.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},s=function(){function B(I,C){var L=[],D=!0,W=!1,H=void 0;try{for(var R=I[Symbol.iterator](),F;!(D=(F=R.next()).done)&&(L.push(F.value),!(C&&L.length===C));D=!0);}catch(U){W=!0,H=U}finally{try{!D&&R.return&&R.return()}finally{if(W)throw H}}return L}return function(I,C){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return B(I,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function B(I,C){for(var L=0;L<C.length;L++){var D=C[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(I,D.key,D)}}return function(I,C,L){return C&&B(I.prototype,C),L&&B(I,L),I}}();r(50);var l=r(2),c=E(l),u=r(14),f=E(u),h=r(8),d=E(h),g=r(9),p=E(g),m=r(0),y=E(m),v=r(15),_=E(v),b=r(3),x=E(b),T=r(10),S=E(T),k=r(34),P=E(k);function E(B){return B&&B.__esModule?B:{default:B}}function w(B,I,C){return I in B?Object.defineProperty(B,I,{value:C,enumerable:!0,configurable:!0,writable:!0}):B[I]=C,B}function A(B,I){if(!(B instanceof I))throw new TypeError("Cannot call a class as a function")}var j=(0,S.default)("quill"),M=function(){a(B,null,[{key:"debug",value:function(C){C===!0&&(C="log"),S.default.level(C)}},{key:"find",value:function(C){return C.__quill||y.default.find(C)}},{key:"import",value:function(C){return this.imports[C]==null&&j.error("Cannot import "+C+". Are you sure it was registered?"),this.imports[C]}},{key:"register",value:function(C,L){var D=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof C!="string"){var H=C.attrName||C.blotName;typeof H=="string"?this.register("formats/"+H,C,L):Object.keys(C).forEach(function(R){D.register(R,C[R],L)})}else this.imports[C]!=null&&!W&&j.warn("Overwriting "+C+" with",L),this.imports[C]=L,(C.startsWith("blots/")||C.startsWith("formats/"))&&L.blotName!=="abstract"?y.default.register(L):C.startsWith("modules")&&typeof L.register=="function"&&L.register()}}]);function B(I){var C=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,B),this.options=N(I,L),this.container=this.options.container,this.container==null)return j.error("Invalid Quill container",I);this.options.debug&&B.debug(this.options.debug);var D=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.default,this.scroll=y.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new _.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(d.default.events.EDITOR_CHANGE,function(H){H===d.default.events.TEXT_CHANGE&&C.root.classList.toggle("ql-blank",C.editor.isBlank())}),this.emitter.on(d.default.events.SCROLL_UPDATE,function(H,R){var F=C.selection.lastRange,U=F&&F.length===0?F.index:void 0;q.call(C,function(){return C.editor.update(null,R,U)},H)});var W=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+D+"<p><br></p></div>");this.setContents(W),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(B,[{key:"addContainer",value:function(C){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof C=="string"){var D=C;C=document.createElement("div"),C.classList.add(D)}return this.container.insertBefore(C,L),C}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(C,L,D){var W=this,H=z(C,L,D),R=s(H,4);return C=R[0],L=R[1],D=R[3],q.call(this,function(){return W.editor.deleteText(C,L)},D,C,-1*L)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(C),this.container.classList.toggle("ql-disabled",!C)}},{key:"focus",value:function(){var C=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=C,this.scrollIntoView()}},{key:"format",value:function(C,L){var D=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;return q.call(this,function(){var H=D.getSelection(!0),R=new c.default;if(H==null)return R;if(y.default.query(C,y.default.Scope.BLOCK))R=D.editor.formatLine(H.index,H.length,w({},C,L));else{if(H.length===0)return D.selection.format(C,L),R;R=D.editor.formatText(H.index,H.length,w({},C,L))}return D.setSelection(H,d.default.sources.SILENT),R},W)}},{key:"formatLine",value:function(C,L,D,W,H){var R=this,F=void 0,U=z(C,L,D,W,H),V=s(U,4);return C=V[0],L=V[1],F=V[2],H=V[3],q.call(this,function(){return R.editor.formatLine(C,L,F)},H,C,0)}},{key:"formatText",value:function(C,L,D,W,H){var R=this,F=void 0,U=z(C,L,D,W,H),V=s(U,4);return C=V[0],L=V[1],F=V[2],H=V[3],q.call(this,function(){return R.editor.formatText(C,L,F)},H,C,0)}},{key:"getBounds",value:function(C){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=void 0;typeof C=="number"?D=this.selection.getBounds(C,L):D=this.selection.getBounds(C.index,C.length);var W=this.container.getBoundingClientRect();return{bottom:D.bottom-W.top,height:D.height,left:D.left-W.left,right:D.right-W.left,top:D.top-W.top,width:D.width}}},{key:"getContents",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,D=z(C,L),W=s(D,2);return C=W[0],L=W[1],this.editor.getContents(C,L)}},{key:"getFormat",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof C=="number"?this.editor.getFormat(C,L):this.editor.getFormat(C.index,C.length)}},{key:"getIndex",value:function(C){return C.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(C){return this.scroll.leaf(C)}},{key:"getLine",value:function(C){return this.scroll.line(C)}},{key:"getLines",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof C!="number"?this.scroll.lines(C.index,C.length):this.scroll.lines(C,L)}},{key:"getModule",value:function(C){return this.theme.modules[C]}},{key:"getSelection",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return C&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,D=z(C,L),W=s(D,2);return C=W[0],L=W[1],this.editor.getText(C,L)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(C,L,D){var W=this,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:B.sources.API;return q.call(this,function(){return W.editor.insertEmbed(C,L,D)},H,C)}},{key:"insertText",value:function(C,L,D,W,H){var R=this,F=void 0,U=z(C,0,D,W,H),V=s(U,4);return C=V[0],F=V[2],H=V[3],q.call(this,function(){return R.editor.insertText(C,L,F)},H,C,L.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(C,L,D){this.clipboard.dangerouslyPasteHTML(C,L,D)}},{key:"removeFormat",value:function(C,L,D){var W=this,H=z(C,L,D),R=s(H,4);return C=R[0],L=R[1],D=R[3],q.call(this,function(){return W.editor.removeFormat(C,L)},D,C)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(C){var L=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return q.call(this,function(){C=new c.default(C);var W=L.getLength(),H=L.editor.deleteText(0,W),R=L.editor.applyDelta(C),F=R.ops[R.ops.length-1];F!=null&&typeof F.insert=="string"&&F.insert[F.insert.length-1]===`
`&&(L.editor.deleteText(L.getLength()-1,1),R.delete(1));var U=H.compose(R);return U},D)}},{key:"setSelection",value:function(C,L,D){if(C==null)this.selection.setRange(null,L||B.sources.API);else{var W=z(C,L,D),H=s(W,4);C=H[0],L=H[1],D=H[3],this.selection.setRange(new v.Range(C,L),D),D!==d.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(C){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API,D=new c.default().insert(C);return this.setContents(D,L)}},{key:"update",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,L=this.scroll.update(C);return this.selection.update(C),L}},{key:"updateContents",value:function(C){var L=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return q.call(this,function(){return C=new c.default(C),L.editor.applyDelta(C,D)},D,!0)}}]),B}();M.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},M.events=d.default.events,M.sources=d.default.sources,M.version="1.3.7",M.imports={delta:c.default,parchment:y.default,"core/module":p.default,"core/theme":P.default};function N(B,I){if(I=(0,x.default)(!0,{container:B,modules:{clipboard:!0,keyboard:!0,history:!0}},I),!I.theme||I.theme===M.DEFAULTS.theme)I.theme=P.default;else if(I.theme=M.import("themes/"+I.theme),I.theme==null)throw new Error("Invalid theme "+I.theme+". Did you register it?");var C=(0,x.default)(!0,{},I.theme.DEFAULTS);[C,I].forEach(function(W){W.modules=W.modules||{},Object.keys(W.modules).forEach(function(H){W.modules[H]===!0&&(W.modules[H]={})})});var L=Object.keys(C.modules).concat(Object.keys(I.modules)),D=L.reduce(function(W,H){var R=M.import("modules/"+H);return R==null?j.error("Cannot load "+H+" module. Are you sure you registered it?"):W[H]=R.DEFAULTS||{},W},{});return I.modules!=null&&I.modules.toolbar&&I.modules.toolbar.constructor!==Object&&(I.modules.toolbar={container:I.modules.toolbar}),I=(0,x.default)(!0,{},M.DEFAULTS,{modules:D},C,I),["bounds","container","scrollingContainer"].forEach(function(W){typeof I[W]=="string"&&(I[W]=document.querySelector(I[W]))}),I.modules=Object.keys(I.modules).reduce(function(W,H){return I.modules[H]&&(W[H]=I.modules[H]),W},{}),I}function q(B,I,C,L){if(this.options.strict&&!this.isEnabled()&&I===d.default.sources.USER)return new c.default;var D=C==null?null:this.getSelection(),W=this.editor.delta,H=B();if(D!=null&&(C===!0&&(C=D.index),L==null?D=G(D,H,I):L!==0&&(D=G(D,C,L,I)),this.setSelection(D,d.default.sources.SILENT)),H.length()>0){var R,F=[d.default.events.TEXT_CHANGE,H,W,I];if((R=this.emitter).emit.apply(R,[d.default.events.EDITOR_CHANGE].concat(F)),I!==d.default.sources.SILENT){var U;(U=this.emitter).emit.apply(U,F)}}return H}function z(B,I,C,L,D){var W={};return typeof B.index=="number"&&typeof B.length=="number"?typeof I!="number"?(D=L,L=C,C=I,I=B.length,B=B.index):(I=B.length,B=B.index):typeof I!="number"&&(D=L,L=C,C=I,I=0),(typeof C>"u"?"undefined":o(C))==="object"?(W=C,D=L):typeof C=="string"&&(L!=null?W[C]=L:D=C),D=D||d.default.sources.API,[B,I,W,D]}function G(B,I,C,L){if(B==null)return null;var D=void 0,W=void 0;if(I instanceof c.default){var H=[B.index,B.index+B.length].map(function(V){return I.transformPosition(V,L!==d.default.sources.USER)}),R=s(H,2);D=R[0],W=R[1]}else{var F=[B.index,B.index+B.length].map(function(V){return V<I||V===I&&L===d.default.sources.USER?V:C>=0?V+C:Math.max(I,V+C)}),U=s(F,2);D=U[0],W=U[1]}return new v.Range(D,W-D)}i.expandConfig=N,i.overload=z,i.default=M},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function m(y,v){for(var _=0;_<v.length;_++){var b=v[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,v,_){return v&&m(y.prototype,v),_&&m(y,_),y}}(),s=function m(y,v,_){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,v);if(b===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:m(x,v,_)}else{if("value"in b)return b.value;var T=b.get;return T===void 0?void 0:T.call(_)}},a=r(7),l=f(a),c=r(0),u=f(c);function f(m){return m&&m.__esModule?m:{default:m}}function h(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function d(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function g(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var p=function(m){g(y,m);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,[{key:"formatAt",value:function(_,b,x,T){if(y.compare(this.statics.blotName,x)<0&&u.default.query(x,u.default.Scope.BLOT)){var S=this.isolate(_,b);T&&S.wrap(x,T)}else s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"formatAt",this).call(this,_,b,x,T)}},{key:"optimize",value:function(_){if(s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,_),this.parent instanceof y&&y.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(_,b){var x=y.order.indexOf(_),T=y.order.indexOf(b);return x>=0||T>=0?x-T:_===b?0:_<b?-1:1}}]),y}(u.default.Inline);p.allowedChildren=[p,u.default.Embed,l.default],p.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],i.default=p},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(0),s=a(o);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}function c(h,d){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:h}function u(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);h.prototype=Object.create(d&&d.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(h,d):h.__proto__=d)}var f=function(h){u(d,h);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default.Text);i.default=f},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function v(_,b){for(var x=0;x<b.length;x++){var T=b[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(_,T.key,T)}}return function(_,b,x){return b&&v(_.prototype,b),x&&v(_,x),_}}(),s=function v(_,b,x){_===null&&(_=Function.prototype);var T=Object.getOwnPropertyDescriptor(_,b);if(T===void 0){var S=Object.getPrototypeOf(_);return S===null?void 0:v(S,b,x)}else{if("value"in T)return T.value;var k=T.get;return k===void 0?void 0:k.call(x)}},a=r(54),l=f(a),c=r(10),u=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function h(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function d(v,_){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:v}function g(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(v,_):v.__proto__=_)}var p=(0,u.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach(function(v){document.addEventListener(v,function(){for(var _=arguments.length,b=Array(_),x=0;x<_;x++)b[x]=arguments[x];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(T){if(T.__quill&&T.__quill.emitter){var S;(S=T.__quill.emitter).handleDOM.apply(S,b)}})})});var y=function(v){g(_,v);function _(){h(this,_);var b=d(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));return b.listeners={},b.on("error",p.error),b}return o(_,[{key:"emit",value:function(){p.log.apply(p,arguments),s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(x){for(var T=arguments.length,S=Array(T>1?T-1:0),k=1;k<T;k++)S[k-1]=arguments[k];(this.listeners[x.type]||[]).forEach(function(P){var E=P.node,w=P.handler;(x.target===E||E.contains(x.target))&&w.apply(void 0,[x].concat(S))})}},{key:"listenDOM",value:function(x,T,S){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push({node:T,handler:S})}}]),_}(l.default);y.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},y.sources={API:"api",SILENT:"silent",USER:"user"},i.default=y},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});function o(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,a),this.quill=l,this.options=c};s.DEFAULTS={},i.default=s},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function a(c){if(o.indexOf(c)<=o.indexOf(s)){for(var u,f=arguments.length,h=Array(f>1?f-1:0),d=1;d<f;d++)h[d-1]=arguments[d];(u=console)[c].apply(u,h)}}function l(c){return o.reduce(function(u,f){return u[f]=a.bind(console,f,c),u},{})}a.level=l.level=function(c){s=c},i.default=l},function(e,i,r){var o=Array.prototype.slice,s=r(52),a=r(53),l=e.exports=function(h,d,g){return g||(g={}),h===d?!0:h instanceof Date&&d instanceof Date?h.getTime()===d.getTime():!h||!d||typeof h!="object"&&typeof d!="object"?g.strict?h===d:h==d:f(h,d,g)};function c(h){return h==null}function u(h){return!(!h||typeof h!="object"||typeof h.length!="number"||typeof h.copy!="function"||typeof h.slice!="function"||h.length>0&&typeof h[0]!="number")}function f(h,d,g){var p,m;if(c(h)||c(d)||h.prototype!==d.prototype)return!1;if(a(h))return a(d)?(h=o.call(h),d=o.call(d),l(h,d,g)):!1;if(u(h)){if(!u(d)||h.length!==d.length)return!1;for(p=0;p<h.length;p++)if(h[p]!==d[p])return!1;return!0}try{var y=s(h),v=s(d)}catch{return!1}if(y.length!=v.length)return!1;for(y.sort(),v.sort(),p=y.length-1;p>=0;p--)if(y[p]!=v[p])return!1;for(p=y.length-1;p>=0;p--)if(m=y[p],!l(h[m],d[m],g))return!1;return typeof h==typeof d}},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(1),s=function(){function a(l,c,u){u===void 0&&(u={}),this.attrName=l,this.keyName=c;var f=o.Scope.TYPE&o.Scope.ATTRIBUTE;u.scope!=null?this.scope=u.scope&o.Scope.LEVEL|f:this.scope=o.Scope.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(c){return c.name})},a.prototype.add=function(l,c){return this.canAdd(l,c)?(l.setAttribute(this.keyName,c),!0):!1},a.prototype.canAdd=function(l,c){var u=o.query(l,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return u==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var c=l.getAttribute(this.keyName);return this.canAdd(l,c)&&c?c:""},a}();i.default=s},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.Code=void 0;var o=function(){function k(P,E){var w=[],A=!0,j=!1,M=void 0;try{for(var N=P[Symbol.iterator](),q;!(A=(q=N.next()).done)&&(w.push(q.value),!(E&&w.length===E));A=!0);}catch(z){j=!0,M=z}finally{try{!A&&N.return&&N.return()}finally{if(j)throw M}}return w}return function(P,E){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return k(P,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function k(P,E){for(var w=0;w<E.length;w++){var A=E[w];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(P,A.key,A)}}return function(P,E,w){return E&&k(P.prototype,E),w&&k(P,w),P}}(),a=function k(P,E,w){P===null&&(P=Function.prototype);var A=Object.getOwnPropertyDescriptor(P,E);if(A===void 0){var j=Object.getPrototypeOf(P);return j===null?void 0:k(j,E,w)}else{if("value"in A)return A.value;var M=A.get;return M===void 0?void 0:M.call(w)}},l=r(2),c=v(l),u=r(0),f=v(u),h=r(4),d=v(h),g=r(6),p=v(g),m=r(7),y=v(m);function v(k){return k&&k.__esModule?k:{default:k}}function _(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function b(k,P){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:k}function x(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(k,P):k.__proto__=P)}var T=function(k){x(P,k);function P(){return _(this,P),b(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return P}(p.default);T.blotName="code",T.tagName="CODE";var S=function(k){x(P,k);function P(){return _(this,P),b(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return s(P,[{key:"delta",value:function(){var w=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(j,M){return j.insert(M).insert(`
`,w.formats())},new c.default)}},{key:"format",value:function(w,A){if(!(w===this.statics.blotName&&A)){var j=this.descendant(y.default,this.length()-1),M=o(j,1),N=M[0];N!=null&&N.deleteAt(N.length()-1,1),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"format",this).call(this,w,A)}}},{key:"formatAt",value:function(w,A,j,M){if(A!==0&&!(f.default.query(j,f.default.Scope.BLOCK)==null||j===this.statics.blotName&&M===this.statics.formats(this.domNode))){var N=this.newlineIndex(w);if(!(N<0||N>=w+A)){var q=this.newlineIndex(w,!0)+1,z=N-q+1,G=this.isolate(q,z),B=G.next;G.format(j,M),B instanceof P&&B.formatAt(0,w-q+A-z,j,M)}}}},{key:"insertAt",value:function(w,A,j){if(j==null){var M=this.descendant(y.default,w),N=o(M,2),q=N[0],z=N[1];q.insertAt(z,A)}}},{key:"length",value:function(){var w=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?w:w+1}},{key:"newlineIndex",value:function(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,w).lastIndexOf(`
`);var j=this.domNode.textContent.slice(w).indexOf(`
`);return j>-1?w+j:-1}},{key:"optimize",value:function(w){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,w);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(w),A.moveChildren(this),A.remove())}},{key:"replace",value:function(w){a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replace",this).call(this,w),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var j=f.default.find(A);j==null?A.parentNode.removeChild(A):j instanceof f.default.Embed?j.remove():j.unwrap()})}}],[{key:"create",value:function(w){var A=a(P.__proto__||Object.getPrototypeOf(P),"create",this).call(this,w);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),P}(d.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",i.Code=T,i.default=S},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},s=function(){function B(I,C){var L=[],D=!0,W=!1,H=void 0;try{for(var R=I[Symbol.iterator](),F;!(D=(F=R.next()).done)&&(L.push(F.value),!(C&&L.length===C));D=!0);}catch(U){W=!0,H=U}finally{try{!D&&R.return&&R.return()}finally{if(W)throw H}}return L}return function(I,C){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return B(I,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function B(I,C){for(var L=0;L<C.length;L++){var D=C[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(I,D.key,D)}}return function(I,C,L){return C&&B(I.prototype,C),L&&B(I,L),I}}(),l=r(2),c=A(l),u=r(20),f=A(u),h=r(0),d=A(h),g=r(13),p=A(g),m=r(24),y=A(m),v=r(4),_=A(v),b=r(16),x=A(b),T=r(21),S=A(T),k=r(11),P=A(k),E=r(3),w=A(E);function A(B){return B&&B.__esModule?B:{default:B}}function j(B,I,C){return I in B?Object.defineProperty(B,I,{value:C,enumerable:!0,configurable:!0,writable:!0}):B[I]=C,B}function M(B,I){if(!(B instanceof I))throw new TypeError("Cannot call a class as a function")}var N=/^[ -~]*$/,q=function(){function B(I){M(this,B),this.scroll=I,this.delta=this.getDelta()}return a(B,[{key:"applyDelta",value:function(C){var L=this,D=!1;this.scroll.update();var W=this.scroll.length();return this.scroll.batchStart(),C=G(C),C.reduce(function(H,R){var F=R.retain||R.delete||R.insert.length||1,U=R.attributes||{};if(R.insert!=null){if(typeof R.insert=="string"){var V=R.insert;V.endsWith(`
`)&&D&&(D=!1,V=V.slice(0,-1)),H>=W&&!V.endsWith(`
`)&&(D=!0),L.scroll.insertAt(H,V);var X=L.scroll.line(H),nt=s(X,2),ot=nt[0],st=nt[1],ht=(0,w.default)({},(0,v.bubbleFormats)(ot));if(ot instanceof _.default){var mt=ot.descendant(d.default.Leaf,st),Ft=s(mt,1),Pt=Ft[0];ht=(0,w.default)(ht,(0,v.bubbleFormats)(Pt))}U=f.default.attributes.diff(ht,U)||{}}else if(o(R.insert)==="object"){var K=Object.keys(R.insert)[0];if(K==null)return H;L.scroll.insertAt(H,K,R.insert[K])}W+=F}return Object.keys(U).forEach(function(Y){L.scroll.formatAt(H,F,Y,U[Y])}),H+F},0),C.reduce(function(H,R){return typeof R.delete=="number"?(L.scroll.deleteAt(H,R.delete),H):H+(R.retain||R.insert.length||1)},0),this.scroll.batchEnd(),this.update(C)}},{key:"deleteText",value:function(C,L){return this.scroll.deleteAt(C,L),this.update(new c.default().retain(C).delete(L))}},{key:"formatLine",value:function(C,L){var D=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(W).forEach(function(H){if(!(D.scroll.whitelist!=null&&!D.scroll.whitelist[H])){var R=D.scroll.lines(C,Math.max(L,1)),F=L;R.forEach(function(U){var V=U.length();if(!(U instanceof p.default))U.format(H,W[H]);else{var X=C-U.offset(D.scroll),nt=U.newlineIndex(X+F)-X+1;U.formatAt(X,nt,H,W[H])}F-=V})}}),this.scroll.optimize(),this.update(new c.default().retain(C).retain(L,(0,S.default)(W)))}},{key:"formatText",value:function(C,L){var D=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(W).forEach(function(H){D.scroll.formatAt(C,L,H,W[H])}),this.update(new c.default().retain(C).retain(L,(0,S.default)(W)))}},{key:"getContents",value:function(C,L){return this.delta.slice(C,C+L)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(C,L){return C.concat(L.delta())},new c.default)}},{key:"getFormat",value:function(C){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=[],W=[];L===0?this.scroll.path(C).forEach(function(R){var F=s(R,1),U=F[0];U instanceof _.default?D.push(U):U instanceof d.default.Leaf&&W.push(U)}):(D=this.scroll.lines(C,L),W=this.scroll.descendants(d.default.Leaf,C,L));var H=[D,W].map(function(R){if(R.length===0)return{};for(var F=(0,v.bubbleFormats)(R.shift());Object.keys(F).length>0;){var U=R.shift();if(U==null)return F;F=z((0,v.bubbleFormats)(U),F)}return F});return w.default.apply(w.default,H)}},{key:"getText",value:function(C,L){return this.getContents(C,L).filter(function(D){return typeof D.insert=="string"}).map(function(D){return D.insert}).join("")}},{key:"insertEmbed",value:function(C,L,D){return this.scroll.insertAt(C,L,D),this.update(new c.default().retain(C).insert(j({},L,D)))}},{key:"insertText",value:function(C,L){var D=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(C,L),Object.keys(W).forEach(function(H){D.scroll.formatAt(C,L.length,H,W[H])}),this.update(new c.default().retain(C).insert(L,(0,S.default)(W)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var C=this.scroll.children.head;return C.statics.blotName!==_.default.blotName||C.children.length>1?!1:C.children.head instanceof x.default}},{key:"removeFormat",value:function(C,L){var D=this.getText(C,L),W=this.scroll.line(C+L),H=s(W,2),R=H[0],F=H[1],U=0,V=new c.default;R!=null&&(R instanceof p.default?U=R.newlineIndex(F)-F+1:U=R.length()-F,V=R.delta().slice(F,F+U-1).insert(`
`));var X=this.getContents(C,L+U),nt=X.diff(new c.default().insert(D).concat(V)),ot=new c.default().retain(C).concat(nt);return this.applyDelta(ot)}},{key:"update",value:function(C){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,W=this.delta;if(L.length===1&&L[0].type==="characterData"&&L[0].target.data.match(N)&&d.default.find(L[0].target)){var H=d.default.find(L[0].target),R=(0,v.bubbleFormats)(H),F=H.offset(this.scroll),U=L[0].oldValue.replace(y.default.CONTENTS,""),V=new c.default().insert(U),X=new c.default().insert(H.value()),nt=new c.default().retain(F).concat(V.diff(X,D));C=nt.reduce(function(ot,st){return st.insert?ot.insert(st.insert,R):ot.push(st)},new c.default),this.delta=W.compose(C)}else this.delta=this.getDelta(),(!C||!(0,P.default)(W.compose(C),this.delta))&&(C=W.diff(this.delta,D));return C}}]),B}();function z(B,I){return Object.keys(I).reduce(function(C,L){return B[L]==null||(I[L]===B[L]?C[L]=I[L]:Array.isArray(I[L])?I[L].indexOf(B[L])<0&&(C[L]=I[L].concat([B[L]])):C[L]=[I[L],B[L]]),C},{})}function G(B){return B.reduce(function(I,C){if(C.insert===1){var L=(0,S.default)(C.attributes);return delete L.image,I.insert({image:C.attributes.image},L)}if(C.attributes!=null&&(C.attributes.list===!0||C.attributes.bullet===!0)&&(C=(0,S.default)(C),C.attributes.list?C.attributes.list="ordered":(C.attributes.list="bullet",delete C.attributes.bullet)),typeof C.insert=="string"){var D=C.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return I.insert(D,C.attributes)}return I.push(C)},new c.default)}i.default=q},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.Range=void 0;var o=function(){function k(P,E){var w=[],A=!0,j=!1,M=void 0;try{for(var N=P[Symbol.iterator](),q;!(A=(q=N.next()).done)&&(w.push(q.value),!(E&&w.length===E));A=!0);}catch(z){j=!0,M=z}finally{try{!A&&N.return&&N.return()}finally{if(j)throw M}}return w}return function(P,E){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return k(P,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function k(P,E){for(var w=0;w<E.length;w++){var A=E[w];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(P,A.key,A)}}return function(P,E,w){return E&&k(P.prototype,E),w&&k(P,w),P}}(),a=r(0),l=y(a),c=r(21),u=y(c),f=r(11),h=y(f),d=r(8),g=y(d),p=r(10),m=y(p);function y(k){return k&&k.__esModule?k:{default:k}}function v(k){if(Array.isArray(k)){for(var P=0,E=Array(k.length);P<k.length;P++)E[P]=k[P];return E}else return Array.from(k)}function _(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}var b=(0,m.default)("quill:selection"),x=function k(P){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_(this,k),this.index=P,this.length=E},T=function(){function k(P,E){var w=this;_(this,k),this.emitter=E,this.scroll=P,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new x(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){w.mouseDown||setTimeout(w.update.bind(w,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(A,j){A===g.default.events.TEXT_CHANGE&&j.length()>0&&w.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(w.hasFocus()){var A=w.getNativeRange();A!=null&&A.start.node!==w.cursor.textNode&&w.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{w.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(A,j){if(j.range){var M=j.range,N=M.startNode,q=M.startOffset,z=M.endNode,G=M.endOffset;w.setNativeRange(N,q,z,G)}}),this.update(g.default.sources.SILENT)}return s(k,[{key:"handleComposition",value:function(){var E=this;this.root.addEventListener("compositionstart",function(){E.composing=!0}),this.root.addEventListener("compositionend",function(){if(E.composing=!1,E.cursor.parent){var w=E.cursor.restore();if(!w)return;setTimeout(function(){E.setNativeRange(w.startNode,w.startOffset,w.endNode,w.endOffset)},1)}})}},{key:"handleDragging",value:function(){var E=this;this.emitter.listenDOM("mousedown",document.body,function(){E.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){E.mouseDown=!1,E.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(E,w){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[E])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||l.default.query(E,l.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var j=l.default.find(A.start.node,!1);if(j==null)return;if(j instanceof l.default.Leaf){var M=j.split(A.start.offset);j.parent.insertBefore(this.cursor,M)}else j.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(E,w),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(E){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();E=Math.min(E,A-1),w=Math.min(E+w,A-1)-E;var j=void 0,M=this.scroll.leaf(E),N=o(M,2),q=N[0],z=N[1];if(q==null)return null;var G=q.position(z,!0),B=o(G,2);j=B[0],z=B[1];var I=document.createRange();if(w>0){I.setStart(j,z);var C=this.scroll.leaf(E+w),L=o(C,2);if(q=L[0],z=L[1],q==null)return null;var D=q.position(z,!0),W=o(D,2);return j=W[0],z=W[1],I.setEnd(j,z),I.getBoundingClientRect()}else{var H="left",R=void 0;return j instanceof Text?(z<j.data.length?(I.setStart(j,z),I.setEnd(j,z+1)):(I.setStart(j,z-1),I.setEnd(j,z),H="right"),R=I.getBoundingClientRect()):(R=q.domNode.getBoundingClientRect(),z>0&&(H="right")),{bottom:R.top+R.height,height:R.height,left:R[H],right:R[H],top:R.top,width:0}}}},{key:"getNativeRange",value:function(){var E=document.getSelection();if(E==null||E.rangeCount<=0)return null;var w=E.getRangeAt(0);if(w==null)return null;var A=this.normalizeNative(w);return b.info("getNativeRange",A),A}},{key:"getRange",value:function(){var E=this.getNativeRange();if(E==null)return[null,null];var w=this.normalizedToRange(E);return[w,E]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(E){var w=this,A=[[E.start.node,E.start.offset]];E.native.collapsed||A.push([E.end.node,E.end.offset]);var j=A.map(function(q){var z=o(q,2),G=z[0],B=z[1],I=l.default.find(G,!0),C=I.offset(w.scroll);return B===0?C:I instanceof l.default.Container?C+I.length():C+I.index(G,B)}),M=Math.min(Math.max.apply(Math,v(j)),this.scroll.length()-1),N=Math.min.apply(Math,[M].concat(v(j)));return new x(N,M-N)}},{key:"normalizeNative",value:function(E){if(!S(this.root,E.startContainer)||!E.collapsed&&!S(this.root,E.endContainer))return null;var w={start:{node:E.startContainer,offset:E.startOffset},end:{node:E.endContainer,offset:E.endOffset},native:E};return[w.start,w.end].forEach(function(A){for(var j=A.node,M=A.offset;!(j instanceof Text)&&j.childNodes.length>0;)if(j.childNodes.length>M)j=j.childNodes[M],M=0;else if(j.childNodes.length===M)j=j.lastChild,M=j instanceof Text?j.data.length:j.childNodes.length+1;else break;A.node=j,A.offset=M}),w}},{key:"rangeToNative",value:function(E){var w=this,A=E.collapsed?[E.index]:[E.index,E.index+E.length],j=[],M=this.scroll.length();return A.forEach(function(N,q){N=Math.min(M-1,N);var z=void 0,G=w.scroll.leaf(N),B=o(G,2),I=B[0],C=B[1],L=I.position(C,q!==0),D=o(L,2);z=D[0],C=D[1],j.push(z,C)}),j.length<2&&(j=j.concat(j)),j}},{key:"scrollIntoView",value:function(E){var w=this.lastRange;if(w!=null){var A=this.getBounds(w.index,w.length);if(A!=null){var j=this.scroll.length()-1,M=this.scroll.line(Math.min(w.index,j)),N=o(M,1),q=N[0],z=q;if(w.length>0){var G=this.scroll.line(Math.min(w.index+w.length,j)),B=o(G,1);z=B[0]}if(!(q==null||z==null)){var I=E.getBoundingClientRect();A.top<I.top?E.scrollTop-=I.top-A.top:A.bottom>I.bottom&&(E.scrollTop+=A.bottom-I.bottom)}}}}},{key:"setNativeRange",value:function(E,w){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E,j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:w,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",E,w,A,j),!(E!=null&&(this.root.parentNode==null||E.parentNode==null||A.parentNode==null))){var N=document.getSelection();if(N!=null)if(E!=null){this.hasFocus()||this.root.focus();var q=(this.getNativeRange()||{}).native;if(q==null||M||E!==q.startContainer||w!==q.startOffset||A!==q.endContainer||j!==q.endOffset){E.tagName=="BR"&&(w=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode),A.tagName=="BR"&&(j=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var z=document.createRange();z.setStart(E,w),z.setEnd(A,j),N.removeAllRanges(),N.addRange(z)}}else N.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(E){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof w=="string"&&(A=w,w=!1),b.info("setRange",E),E!=null){var j=this.rangeToNative(E);this.setNativeRange.apply(this,v(j).concat([w]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,w=this.lastRange,A=this.getRange(),j=o(A,2),M=j[0],N=j[1];if(this.lastRange=M,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,h.default)(w,this.lastRange)){var q;!this.composing&&N!=null&&N.native.collapsed&&N.start.node!==this.cursor.textNode&&this.cursor.restore();var z=[g.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(w),E];if((q=this.emitter).emit.apply(q,[g.default.events.EDITOR_CHANGE].concat(z)),E!==g.default.sources.SILENT){var G;(G=this.emitter).emit.apply(G,z)}}}}]),k}();function S(k,P){try{P.parentNode}catch{return!1}return P instanceof Text&&(P=P.parentNode),k.contains(P)}i.Range=x,i.default=T},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(p,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,y){return m&&g(p.prototype,m),y&&g(p,y),p}}(),s=function g(p,m,y){p===null&&(p=Function.prototype);var v=Object.getOwnPropertyDescriptor(p,m);if(v===void 0){var _=Object.getPrototypeOf(p);return _===null?void 0:g(_,m,y)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(y)}},a=r(0),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function u(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function f(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function h(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var d=function(g){h(p,g);function p(){return u(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return o(p,[{key:"insertInto",value:function(y,v){y.children.length===0?s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"insertInto",this).call(this,y,v):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),p}(l.default.Embed);d.blotName="break",d.tagName="BR",i.default=d},function(e,i,r){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var g in d)d.hasOwnProperty(g)&&(h[g]=d[g])};return function(h,d){f(h,d);function g(){this.constructor=h}h.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(44),a=r(30),l=r(1),c=function(f){o(h,f);function h(d){var g=f.call(this,d)||this;return g.build(),g}return h.prototype.appendChild=function(d){this.insertBefore(d)},h.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(d){d.attach()})},h.prototype.build=function(){var d=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(g){try{var p=u(g);d.insertBefore(p,d.children.head||void 0)}catch(m){if(m instanceof l.ParchmentError)return;throw m}})},h.prototype.deleteAt=function(d,g){if(d===0&&g===this.length())return this.remove();this.children.forEachAt(d,g,function(p,m,y){p.deleteAt(m,y)})},h.prototype.descendant=function(d,g){var p=this.children.find(g),m=p[0],y=p[1];return d.blotName==null&&d(m)||d.blotName!=null&&m instanceof d?[m,y]:m instanceof h?m.descendant(d,y):[null,-1]},h.prototype.descendants=function(d,g,p){g===void 0&&(g=0),p===void 0&&(p=Number.MAX_VALUE);var m=[],y=p;return this.children.forEachAt(g,p,function(v,_,b){(d.blotName==null&&d(v)||d.blotName!=null&&v instanceof d)&&m.push(v),v instanceof h&&(m=m.concat(v.descendants(d,_,y))),y-=b}),m},h.prototype.detach=function(){this.children.forEach(function(d){d.detach()}),f.prototype.detach.call(this)},h.prototype.formatAt=function(d,g,p,m){this.children.forEachAt(d,g,function(y,v,_){y.formatAt(v,_,p,m)})},h.prototype.insertAt=function(d,g,p){var m=this.children.find(d),y=m[0],v=m[1];if(y)y.insertAt(v,g,p);else{var _=p==null?l.create("text",g):l.create(g,p);this.appendChild(_)}},h.prototype.insertBefore=function(d,g){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(p){return d instanceof p}))throw new l.ParchmentError("Cannot insert "+d.statics.blotName+" into "+this.statics.blotName);d.insertInto(this,g)},h.prototype.length=function(){return this.children.reduce(function(d,g){return d+g.length()},0)},h.prototype.moveChildren=function(d,g){this.children.forEach(function(p){d.insertBefore(p,g)})},h.prototype.optimize=function(d){if(f.prototype.optimize.call(this,d),this.children.length===0)if(this.statics.defaultChild!=null){var g=l.create(this.statics.defaultChild);this.appendChild(g),g.optimize(d)}else this.remove()},h.prototype.path=function(d,g){g===void 0&&(g=!1);var p=this.children.find(d,g),m=p[0],y=p[1],v=[[this,d]];return m instanceof h?v.concat(m.path(y,g)):(m!=null&&v.push([m,y]),v)},h.prototype.removeChild=function(d){this.children.remove(d)},h.prototype.replace=function(d){d instanceof h&&d.moveChildren(this),f.prototype.replace.call(this,d)},h.prototype.split=function(d,g){if(g===void 0&&(g=!1),!g){if(d===0)return this;if(d===this.length())return this.next}var p=this.clone();return this.parent.insertBefore(p,this.next),this.children.forEachAt(d,this.length(),function(m,y,v){m=m.split(y,g),p.appendChild(m)}),p},h.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},h.prototype.update=function(d,g){var p=this,m=[],y=[];d.forEach(function(v){v.target===p.domNode&&v.type==="childList"&&(m.push.apply(m,v.addedNodes),y.push.apply(y,v.removedNodes))}),y.forEach(function(v){if(!(v.parentNode!=null&&v.tagName!=="IFRAME"&&document.body.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var _=l.find(v);_!=null&&(_.domNode.parentNode==null||_.domNode.parentNode===p.domNode)&&_.detach()}}),m.filter(function(v){return v.parentNode==p.domNode}).sort(function(v,_){return v===_?0:v.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(v){var _=null;v.nextSibling!=null&&(_=l.find(v.nextSibling));var b=u(v);(b.next!=_||b.next==null)&&(b.parent!=null&&b.parent.removeChild(p),p.insertBefore(b,_||void 0))})},h}(a.default);function u(f){var h=l.find(f);if(h==null)try{h=l.create(f)}catch{h=l.create(l.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(g){h.domNode.appendChild(g)}),f.parentNode&&f.parentNode.replaceChild(h.domNode,f),h.attach()}return h}i.default=c},function(e,i,r){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var g in d)d.hasOwnProperty(g)&&(h[g]=d[g])};return function(h,d){f(h,d);function g(){this.constructor=h}h.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(12),a=r(31),l=r(17),c=r(1),u=function(f){o(h,f);function h(d){var g=f.call(this,d)||this;return g.attributes=new a.default(g.domNode),g}return h.formats=function(d){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return d.tagName.toLowerCase()},h.prototype.format=function(d,g){var p=c.query(d);p instanceof s.default?this.attributes.attribute(p,g):g&&p!=null&&(d!==this.statics.blotName||this.formats()[d]!==g)&&this.replaceWith(d,g)},h.prototype.formats=function(){var d=this.attributes.values(),g=this.statics.formats(this.domNode);return g!=null&&(d[this.statics.blotName]=g),d},h.prototype.replaceWith=function(d,g){var p=f.prototype.replaceWith.call(this,d,g);return this.attributes.copy(p),p},h.prototype.update=function(d,g){var p=this;f.prototype.update.call(this,d,g),d.some(function(m){return m.target===p.domNode&&m.type==="attributes"})&&this.attributes.build()},h.prototype.wrap=function(d,g){var p=f.prototype.wrap.call(this,d,g);return p instanceof h&&p.statics.scope===this.statics.scope&&this.attributes.move(p),p},h}(l.default);i.default=u},function(e,i,r){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])};return function(u,f){c(u,f);function h(){this.constructor=u}u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(30),a=r(1),l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.value=function(f){return!0},u.prototype.index=function(f,h){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(h,1):-1},u.prototype.position=function(f,h){var d=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(d+=1),[this.parent.domNode,d]},u.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},u.scope=a.Scope.INLINE_BLOT,u}(s.default);i.default=l},function(e,i,r){var o=r(11),s=r(3),a={attributes:{compose:function(c,u,f){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});var h=s(!0,{},u);f||(h=Object.keys(h).reduce(function(g,p){return h[p]!=null&&(g[p]=h[p]),g},{}));for(var d in c)c[d]!==void 0&&u[d]===void 0&&(h[d]=c[d]);return Object.keys(h).length>0?h:void 0},diff:function(c,u){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});var f=Object.keys(c).concat(Object.keys(u)).reduce(function(h,d){return o(c[d],u[d])||(h[d]=u[d]===void 0?null:u[d]),h},{});return Object.keys(f).length>0?f:void 0},transform:function(c,u,f){if(typeof c!="object")return u;if(typeof u=="object"){if(!f)return u;var h=Object.keys(u).reduce(function(d,g){return c[g]===void 0&&(d[g]=u[g]),d},{});return Object.keys(h).length>0?h:void 0}}},iterator:function(c){return new l(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function l(c){this.ops=c,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(c){c||(c=1/0);var u=this.ops[this.index];if(u){var f=this.offset,h=a.length(u);if(c>=h-f?(c=h-f,this.index+=1,this.offset=0):this.offset+=c,typeof u.delete=="number")return{delete:c};var d={};return u.attributes&&(d.attributes=u.attributes),typeof u.retain=="number"?d.retain=c:typeof u.insert=="string"?d.insert=u.insert.substr(f,c):d.insert=u.insert,d}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,u=this.index,f=this.next(),h=this.ops.slice(this.index);return this.offset=c,this.index=u,[f].concat(h)}else return[]},e.exports=a},function(e,i){var r=function(){function o(p,m){return m!=null&&p instanceof m}var s;try{s=Map}catch{s=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function c(p,m,y,v,_){typeof m=="object"&&(y=m.depth,v=m.prototype,_=m.includeNonEnumerable,m=m.circular);var b=[],x=[],T=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof y>"u"&&(y=1/0);function S(k,P){if(k===null)return null;if(P===0)return k;var E,w;if(typeof k!="object")return k;if(o(k,s))E=new s;else if(o(k,a))E=new a;else if(o(k,l))E=new l(function(I,C){k.then(function(L){I(S(L,P-1))},function(L){C(S(L,P-1))})});else if(c.__isArray(k))E=[];else if(c.__isRegExp(k))E=new RegExp(k.source,g(k)),k.lastIndex&&(E.lastIndex=k.lastIndex);else if(c.__isDate(k))E=new Date(k.getTime());else{if(T&&Buffer.isBuffer(k))return Buffer.allocUnsafe?E=Buffer.allocUnsafe(k.length):E=new Buffer(k.length),k.copy(E),E;o(k,Error)?E=Object.create(k):typeof v>"u"?(w=Object.getPrototypeOf(k),E=Object.create(w)):(E=Object.create(v),w=v)}if(m){var A=b.indexOf(k);if(A!=-1)return x[A];b.push(k),x.push(E)}o(k,s)&&k.forEach(function(I,C){var L=S(C,P-1),D=S(I,P-1);E.set(L,D)}),o(k,a)&&k.forEach(function(I){var C=S(I,P-1);E.add(C)});for(var j in k){var M;w&&(M=Object.getOwnPropertyDescriptor(w,j)),!(M&&M.set==null)&&(E[j]=S(k[j],P-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(k),j=0;j<N.length;j++){var q=N[j],z=Object.getOwnPropertyDescriptor(k,q);z&&!z.enumerable&&!_||(E[q]=S(k[q],P-1),z.enumerable||Object.defineProperty(E,q,{enumerable:!1}))}if(_)for(var G=Object.getOwnPropertyNames(k),j=0;j<G.length;j++){var B=G[j],z=Object.getOwnPropertyDescriptor(k,B);z&&z.enumerable||(E[B]=S(k[B],P-1),Object.defineProperty(E,B,{enumerable:!1}))}return E}return S(p,y)}c.clonePrototype=function(m){if(m===null)return null;var y=function(){};return y.prototype=m,new y};function u(p){return Object.prototype.toString.call(p)}c.__objToStr=u;function f(p){return typeof p=="object"&&u(p)==="[object Date]"}c.__isDate=f;function h(p){return typeof p=="object"&&u(p)==="[object Array]"}c.__isArray=h;function d(p){return typeof p=="object"&&u(p)==="[object RegExp]"}c.__isRegExp=d;function g(p){var m="";return p.global&&(m+="g"),p.ignoreCase&&(m+="i"),p.multiline&&(m+="m"),m}return c.__getRegExpFlags=g,c}();typeof e=="object"&&e.exports&&(e.exports=r)},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function E(w,A){var j=[],M=!0,N=!1,q=void 0;try{for(var z=w[Symbol.iterator](),G;!(M=(G=z.next()).done)&&(j.push(G.value),!(A&&j.length===A));M=!0);}catch(B){N=!0,q=B}finally{try{!M&&z.return&&z.return()}finally{if(N)throw q}}return j}return function(w,A){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return E(w,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(w,A){for(var j=0;j<A.length;j++){var M=A[j];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,M.key,M)}}return function(w,A,j){return A&&E(w.prototype,A),j&&E(w,j),w}}(),a=function E(w,A,j){w===null&&(w=Function.prototype);var M=Object.getOwnPropertyDescriptor(w,A);if(M===void 0){var N=Object.getPrototypeOf(w);return N===null?void 0:E(N,A,j)}else{if("value"in M)return M.value;var q=M.get;return q===void 0?void 0:q.call(j)}},l=r(0),c=b(l),u=r(8),f=b(u),h=r(4),d=b(h),g=r(16),p=b(g),m=r(13),y=b(m),v=r(25),_=b(v);function b(E){return E&&E.__esModule?E:{default:E}}function x(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function T(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function S(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}function k(E){return E instanceof d.default||E instanceof h.BlockEmbed}var P=function(E){S(w,E);function w(A,j){x(this,w);var M=T(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,A));return M.emitter=j.emitter,Array.isArray(j.whitelist)&&(M.whitelist=j.whitelist.reduce(function(N,q){return N[q]=!0,N},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return s(w,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(j,M){var N=this.line(j),q=o(N,2),z=q[0],G=q[1],B=this.line(j+M),I=o(B,1),C=I[0];if(a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"deleteAt",this).call(this,j,M),C!=null&&z!==C&&G>0){if(z instanceof h.BlockEmbed||C instanceof h.BlockEmbed){this.optimize();return}if(z instanceof y.default){var L=z.newlineIndex(z.length(),!0);if(L>-1&&(z=z.split(L+1),z===C)){this.optimize();return}}else if(C instanceof y.default){var D=C.newlineIndex(0);D>-1&&C.split(D+1)}var W=C.children.head instanceof p.default?null:C.children.head;z.moveChildren(C,W),z.remove()}this.optimize()}},{key:"enable",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",j)}},{key:"formatAt",value:function(j,M,N,q){this.whitelist!=null&&!this.whitelist[N]||(a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"formatAt",this).call(this,j,M,N,q),this.optimize())}},{key:"insertAt",value:function(j,M,N){if(!(N!=null&&this.whitelist!=null&&!this.whitelist[M])){if(j>=this.length())if(N==null||c.default.query(M,c.default.Scope.BLOCK)==null){var q=c.default.create(this.statics.defaultChild);this.appendChild(q),N==null&&M.endsWith(`
`)&&(M=M.slice(0,-1)),q.insertAt(0,M,N)}else{var z=c.default.create(M,N);this.appendChild(z)}else a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertAt",this).call(this,j,M,N);this.optimize()}}},{key:"insertBefore",value:function(j,M){if(j.statics.scope===c.default.Scope.INLINE_BLOT){var N=c.default.create(this.statics.defaultChild);N.appendChild(j),j=N}a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertBefore",this).call(this,j,M)}},{key:"leaf",value:function(j){return this.path(j).pop()||[null,-1]}},{key:"line",value:function(j){return j===this.length()?this.line(j-1):this.descendant(k,j)}},{key:"lines",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,N=function q(z,G,B){var I=[],C=B;return z.children.forEachAt(G,B,function(L,D,W){k(L)?I.push(L):L instanceof c.default.Container&&(I=I.concat(q(L,D,C))),C-=W}),I};return N(this,j,M)}},{key:"optimize",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,j,M),j.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,j,M))}},{key:"path",value:function(j){return a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"path",this).call(this,j).slice(1)}},{key:"update",value:function(j){if(this.batch!==!0){var M=f.default.sources.USER;typeof j=="string"&&(M=j),Array.isArray(j)||(j=this.observer.takeRecords()),j.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,M,j),a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"update",this).call(this,j.concat([])),j.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,M,j)}}}]),w}(c.default.Scroll);P.blotName="scroll",P.className="ql-editor",P.tagName="DIV",P.defaultChild="block",P.allowedChildren=[d.default,h.BlockEmbed,_.default],i.default=P},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.SHORTKEY=i.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},s=function(){function R(F,U){var V=[],X=!0,nt=!1,ot=void 0;try{for(var st=F[Symbol.iterator](),ht;!(X=(ht=st.next()).done)&&(V.push(ht.value),!(U&&V.length===U));X=!0);}catch(mt){nt=!0,ot=mt}finally{try{!X&&st.return&&st.return()}finally{if(nt)throw ot}}return V}return function(F,U){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return R(F,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function R(F,U){for(var V=0;V<U.length;V++){var X=U[V];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(F,X.key,X)}}return function(F,U,V){return U&&R(F.prototype,U),V&&R(F,V),F}}(),l=r(21),c=E(l),u=r(11),f=E(u),h=r(3),d=E(h),g=r(2),p=E(g),m=r(20),y=E(m),v=r(0),_=E(v),b=r(5),x=E(b),T=r(10),S=E(T),k=r(9),P=E(k);function E(R){return R&&R.__esModule?R:{default:R}}function w(R,F,U){return F in R?Object.defineProperty(R,F,{value:U,enumerable:!0,configurable:!0,writable:!0}):R[F]=U,R}function A(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")}function j(R,F){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:R}function M(R,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);R.prototype=Object.create(F&&F.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(R,F):R.__proto__=F)}var N=(0,S.default)("quill:keyboard"),q=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",z=function(R){M(F,R),a(F,null,[{key:"match",value:function(V,X){return X=H(X),["altKey","ctrlKey","metaKey","shiftKey"].some(function(nt){return!!X[nt]!==V[nt]&&X[nt]!==null})?!1:X.key===(V.which||V.keyCode)}}]);function F(U,V){A(this,F);var X=j(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,U,V));return X.bindings={},Object.keys(X.options.bindings).forEach(function(nt){nt==="list autofill"&&U.scroll.whitelist!=null&&!U.scroll.whitelist.list||X.options.bindings[nt]&&X.addBinding(X.options.bindings[nt])}),X.addBinding({key:F.keys.ENTER,shiftKey:null},L),X.addBinding({key:F.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(X.addBinding({key:F.keys.BACKSPACE},{collapsed:!0},B),X.addBinding({key:F.keys.DELETE},{collapsed:!0},I)):(X.addBinding({key:F.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},B),X.addBinding({key:F.keys.DELETE},{collapsed:!0,suffix:/^.?$/},I)),X.addBinding({key:F.keys.BACKSPACE},{collapsed:!1},C),X.addBinding({key:F.keys.DELETE},{collapsed:!1},C),X.addBinding({key:F.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},B),X.listen(),X}return a(F,[{key:"addBinding",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ot=H(V);if(ot==null||ot.key==null)return N.warn("Attempted to add invalid keyboard binding",ot);typeof X=="function"&&(X={handler:X}),typeof nt=="function"&&(nt={handler:nt}),ot=(0,d.default)(ot,X,nt),this.bindings[ot.key]=this.bindings[ot.key]||[],this.bindings[ot.key].push(ot)}},{key:"listen",value:function(){var V=this;this.quill.root.addEventListener("keydown",function(X){if(!X.defaultPrevented){var nt=X.which||X.keyCode,ot=(V.bindings[nt]||[]).filter(function(At){return F.match(X,At)});if(ot.length!==0){var st=V.quill.getSelection();if(!(st==null||!V.quill.hasFocus())){var ht=V.quill.getLine(st.index),mt=s(ht,2),Ft=mt[0],Pt=mt[1],K=V.quill.getLeaf(st.index),Y=s(K,2),Q=Y[0],tt=Y[1],Z=st.length===0?[Q,tt]:V.quill.getLeaf(st.index+st.length),lt=s(Z,2),ct=lt[0],ut=lt[1],Yt=Q instanceof _.default.Text?Q.value().slice(0,tt):"",ue=ct instanceof _.default.Text?ct.value().slice(ut):"",Ot={collapsed:st.length===0,empty:st.length===0&&Ft.length()<=1,format:V.quill.getFormat(st),offset:Pt,prefix:Yt,suffix:ue},Tl=ot.some(function(At){if(At.collapsed!=null&&At.collapsed!==Ot.collapsed||At.empty!=null&&At.empty!==Ot.empty||At.offset!=null&&At.offset!==Ot.offset)return!1;if(Array.isArray(At.format)){if(At.format.every(function(be){return Ot.format[be]==null}))return!1}else if(o(At.format)==="object"&&!Object.keys(At.format).every(function(be){return At.format[be]===!0?Ot.format[be]!=null:At.format[be]===!1?Ot.format[be]==null:(0,f.default)(At.format[be],Ot.format[be])}))return!1;return At.prefix!=null&&!At.prefix.test(Ot.prefix)||At.suffix!=null&&!At.suffix.test(Ot.suffix)?!1:At.handler.call(V,st,Ot)!==!0});Tl&&X.preventDefault()}}}})}}]),F}(P.default);z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},z.DEFAULTS={bindings:{bold:W("bold"),italic:W("italic"),underline:W("underline"),indent:{key:z.keys.TAB,format:["blockquote","indent","list"],handler:function(F,U){if(U.collapsed&&U.offset!==0)return!0;this.quill.format("indent","+1",x.default.sources.USER)}},outdent:{key:z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(F,U){if(U.collapsed&&U.offset!==0)return!0;this.quill.format("indent","-1",x.default.sources.USER)}},"outdent backspace":{key:z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(F,U){U.format.indent!=null?this.quill.format("indent","-1",x.default.sources.USER):U.format.list!=null&&this.quill.format("list",!1,x.default.sources.USER)}},"indent code-block":D(!0),"outdent code-block":D(!1),"remove tab":{key:z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(F){this.quill.deleteText(F.index-1,1,x.default.sources.USER)}},tab:{key:z.keys.TAB,handler:function(F){this.quill.history.cutoff();var U=new p.default().retain(F.index).delete(F.length).insert("	");this.quill.updateContents(U,x.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(F.index+1,x.default.sources.SILENT)}},"list empty enter":{key:z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(F,U){this.quill.format("list",!1,x.default.sources.USER),U.format.indent&&this.quill.format("indent",!1,x.default.sources.USER)}},"checklist enter":{key:z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(F){var U=this.quill.getLine(F.index),V=s(U,2),X=V[0],nt=V[1],ot=(0,d.default)({},X.formats(),{list:"checked"}),st=new p.default().retain(F.index).insert(`
`,ot).retain(X.length()-nt-1).retain(1,{list:"unchecked"});this.quill.updateContents(st,x.default.sources.USER),this.quill.setSelection(F.index+1,x.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(F,U){var V=this.quill.getLine(F.index),X=s(V,2),nt=X[0],ot=X[1],st=new p.default().retain(F.index).insert(`
`,U.format).retain(nt.length()-ot-1).retain(1,{header:null});this.quill.updateContents(st,x.default.sources.USER),this.quill.setSelection(F.index+1,x.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(F,U){var V=U.prefix.length,X=this.quill.getLine(F.index),nt=s(X,2),ot=nt[0],st=nt[1];if(st>V)return!0;var ht=void 0;switch(U.prefix.trim()){case"[]":case"[ ]":ht="unchecked";break;case"[x]":ht="checked";break;case"-":case"*":ht="bullet";break;default:ht="ordered"}this.quill.insertText(F.index," ",x.default.sources.USER),this.quill.history.cutoff();var mt=new p.default().retain(F.index-st).delete(V+1).retain(ot.length()-2-st).retain(1,{list:ht});this.quill.updateContents(mt,x.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(F.index-V,x.default.sources.SILENT)}},"code exit":{key:z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(F){var U=this.quill.getLine(F.index),V=s(U,2),X=V[0],nt=V[1],ot=new p.default().retain(F.index+X.length()-nt-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ot,x.default.sources.USER)}},"embed left":G(z.keys.LEFT,!1),"embed left shift":G(z.keys.LEFT,!0),"embed right":G(z.keys.RIGHT,!1),"embed right shift":G(z.keys.RIGHT,!0)}};function G(R,F){var U,V=R===z.keys.LEFT?"prefix":"suffix";return U={key:R,shiftKey:F,altKey:null},w(U,V,/^$/),w(U,"handler",function(nt){var ot=nt.index;R===z.keys.RIGHT&&(ot+=nt.length+1);var st=this.quill.getLeaf(ot),ht=s(st,1),mt=ht[0];return mt instanceof _.default.Embed?(R===z.keys.LEFT?F?this.quill.setSelection(nt.index-1,nt.length+1,x.default.sources.USER):this.quill.setSelection(nt.index-1,x.default.sources.USER):F?this.quill.setSelection(nt.index,nt.length+1,x.default.sources.USER):this.quill.setSelection(nt.index+nt.length+1,x.default.sources.USER),!1):!0}),U}function B(R,F){if(!(R.index===0||this.quill.getLength()<=1)){var U=this.quill.getLine(R.index),V=s(U,1),X=V[0],nt={};if(F.offset===0){var ot=this.quill.getLine(R.index-1),st=s(ot,1),ht=st[0];if(ht!=null&&ht.length()>1){var mt=X.formats(),Ft=this.quill.getFormat(R.index-1,1);nt=y.default.attributes.diff(mt,Ft)||{}}}var Pt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(F.prefix)?2:1;this.quill.deleteText(R.index-Pt,Pt,x.default.sources.USER),Object.keys(nt).length>0&&this.quill.formatLine(R.index-Pt,Pt,nt,x.default.sources.USER),this.quill.focus()}}function I(R,F){var U=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(F.suffix)?2:1;if(!(R.index>=this.quill.getLength()-U)){var V={},X=0,nt=this.quill.getLine(R.index),ot=s(nt,1),st=ot[0];if(F.offset>=st.length()-1){var ht=this.quill.getLine(R.index+1),mt=s(ht,1),Ft=mt[0];if(Ft){var Pt=st.formats(),K=this.quill.getFormat(R.index,1);V=y.default.attributes.diff(Pt,K)||{},X=Ft.length()}}this.quill.deleteText(R.index,U,x.default.sources.USER),Object.keys(V).length>0&&this.quill.formatLine(R.index+X-1,U,V,x.default.sources.USER)}}function C(R){var F=this.quill.getLines(R),U={};if(F.length>1){var V=F[0].formats(),X=F[F.length-1].formats();U=y.default.attributes.diff(X,V)||{}}this.quill.deleteText(R,x.default.sources.USER),Object.keys(U).length>0&&this.quill.formatLine(R.index,1,U,x.default.sources.USER),this.quill.setSelection(R.index,x.default.sources.SILENT),this.quill.focus()}function L(R,F){var U=this;R.length>0&&this.quill.scroll.deleteAt(R.index,R.length);var V=Object.keys(F.format).reduce(function(X,nt){return _.default.query(nt,_.default.Scope.BLOCK)&&!Array.isArray(F.format[nt])&&(X[nt]=F.format[nt]),X},{});this.quill.insertText(R.index,`
`,V,x.default.sources.USER),this.quill.setSelection(R.index+1,x.default.sources.SILENT),this.quill.focus(),Object.keys(F.format).forEach(function(X){V[X]==null&&(Array.isArray(F.format[X])||X!=="link"&&U.quill.format(X,F.format[X],x.default.sources.USER))})}function D(R){return{key:z.keys.TAB,shiftKey:!R,format:{"code-block":!0},handler:function(U){var V=_.default.query("code-block"),X=U.index,nt=U.length,ot=this.quill.scroll.descendant(V,X),st=s(ot,2),ht=st[0],mt=st[1];if(ht!=null){var Ft=this.quill.getIndex(ht),Pt=ht.newlineIndex(mt,!0)+1,K=ht.newlineIndex(Ft+mt+nt),Y=ht.domNode.textContent.slice(Pt,K).split(`
`);mt=0,Y.forEach(function(Q,tt){R?(ht.insertAt(Pt+mt,V.TAB),mt+=V.TAB.length,tt===0?X+=V.TAB.length:nt+=V.TAB.length):Q.startsWith(V.TAB)&&(ht.deleteAt(Pt+mt,V.TAB.length),mt-=V.TAB.length,tt===0?X-=V.TAB.length:nt-=V.TAB.length),mt+=Q.length+1}),this.quill.update(x.default.sources.USER),this.quill.setSelection(X,nt,x.default.sources.SILENT)}}}}function W(R){return{key:R[0].toUpperCase(),shortKey:!0,handler:function(U,V){this.quill.format(R,!V.format[R],x.default.sources.USER)}}}function H(R){if(typeof R=="string"||typeof R=="number")return H({key:R});if((typeof R>"u"?"undefined":o(R))==="object"&&(R=(0,c.default)(R,!1)),typeof R.key=="string")if(z.keys[R.key.toUpperCase()]!=null)R.key=z.keys[R.key.toUpperCase()];else if(R.key.length===1)R.key=R.key.toUpperCase().charCodeAt(0);else return null;return R.shortKey&&(R[q]=R.shortKey,delete R.shortKey),R}i.default=z,i.SHORTKEY=q},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function y(v,_){var b=[],x=!0,T=!1,S=void 0;try{for(var k=v[Symbol.iterator](),P;!(x=(P=k.next()).done)&&(b.push(P.value),!(_&&b.length===_));x=!0);}catch(E){T=!0,S=E}finally{try{!x&&k.return&&k.return()}finally{if(T)throw S}}return b}return function(v,_){if(Array.isArray(v))return v;if(Symbol.iterator in Object(v))return y(v,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function y(v,_,b){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,_);if(x===void 0){var T=Object.getPrototypeOf(v);return T===null?void 0:y(T,_,b)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(b)}},a=function(){function y(v,_){for(var b=0;b<_.length;b++){var x=_[b];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,_,b){return _&&y(v.prototype,_),b&&y(v,b),v}}(),l=r(0),c=h(l),u=r(7),f=h(u);function h(y){return y&&y.__esModule?y:{default:y}}function d(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function g(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function p(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var m=function(y){p(v,y),a(v,null,[{key:"value",value:function(){}}]);function v(_,b){d(this,v);var x=g(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,_));return x.selection=b,x.textNode=document.createTextNode(v.CONTENTS),x.domNode.appendChild(x.textNode),x._length=0,x}return a(v,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,x){if(this._length!==0)return s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,b,x);for(var T=this,S=0;T!=null&&T.statics.scope!==c.default.Scope.BLOCK_BLOT;)S+=T.offset(T.parent),T=T.parent;T!=null&&(this._length=v.CONTENTS.length,T.optimize(),T.formatAt(S,v.CONTENTS.length,b,x),this._length=0)}},{key:"index",value:function(b,x){return b===this.textNode?0:s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,b,x)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,x=this.selection.getNativeRange(),T=void 0,S=void 0,k=void 0;if(x!=null&&x.start.node===b&&x.end.node===b){var P=[b,x.start.offset,x.end.offset];T=P[0],S=P[1],k=P[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==v.CONTENTS){var E=this.textNode.data.split(v.CONTENTS).join("");this.next instanceof f.default?(T=this.next.domNode,this.next.insertAt(0,E),this.textNode.data=v.CONTENTS):(this.textNode.data=E,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(v.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var w=[S,k].map(function(j){return Math.max(0,Math.min(T.data.length,j-1))}),A=o(w,2);return S=A[0],k=A[1],{startNode:T,startOffset:S,endNode:T,endOffset:k}}}}},{key:"update",value:function(b,x){var T=this;if(b.some(function(k){return k.type==="characterData"&&k.target===T.textNode})){var S=this.restore();S&&(x.range=S)}}},{key:"value",value:function(){return""}}]),v}(c.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\uFEFF",i.default=m},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(0),s=c(o),a=r(4),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function u(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function f(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function h(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var d=function(g){h(p,g);function p(){return u(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default.Container);d.allowedChildren=[l.default,a.BlockEmbed,d],i.default=d},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.ColorStyle=i.ColorClass=i.ColorAttributor=void 0;var o=function(){function m(y,v){for(var _=0;_<v.length;_++){var b=v[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,v,_){return v&&m(y.prototype,v),_&&m(y,_),y}}(),s=function m(y,v,_){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,v);if(b===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:m(x,v,_)}else{if("value"in b)return b.value;var T=b.get;return T===void 0?void 0:T.call(_)}},a=r(0),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function f(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function h(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var d=function(m){h(y,m);function y(){return u(this,y),f(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,[{key:"value",value:function(_){var b=s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,_);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(x){return("00"+parseInt(x).toString(16)).slice(-2)}).join("")):b}}]),y}(l.default.Attributor.Style),g=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),p=new d("color","color",{scope:l.default.Scope.INLINE});i.ColorAttributor=d,i.ColorClass=g,i.ColorStyle=p},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.sanitize=i.default=void 0;var o=function(){function p(m,y){for(var v=0;v<y.length;v++){var _=y[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,y,v){return y&&p(m.prototype,y),v&&p(m,v),m}}(),s=function p(m,y,v){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,y);if(_===void 0){var b=Object.getPrototypeOf(m);return b===null?void 0:p(b,y,v)}else{if("value"in _)return _.value;var x=_.get;return x===void 0?void 0:x.call(v)}},a=r(6),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function u(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function f(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function h(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){h(m,p);function m(){return u(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(v,_){if(v!==this.statics.blotName||!_)return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,v,_);_=this.constructor.sanitize(_),this.domNode.setAttribute("href",_)}}],[{key:"create",value:function(v){var _=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,v);return v=this.sanitize(v),_.setAttribute("href",v),_.setAttribute("rel","noopener noreferrer"),_.setAttribute("target","_blank"),_}},{key:"formats",value:function(v){return v.getAttribute("href")}},{key:"sanitize",value:function(v){return g(v,this.PROTOCOL_WHITELIST)?v:this.SANITIZED_URL}}]),m}(l.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function g(p,m){var y=document.createElement("a");y.href=p;var v=y.href.slice(0,y.href.indexOf(":"));return m.indexOf(v)>-1}i.default=d,i.sanitize=g},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},s=function(){function m(y,v){for(var _=0;_<v.length;_++){var b=v[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,v,_){return v&&m(y.prototype,v),_&&m(y,_),y}}(),a=r(23),l=f(a),c=r(107),u=f(c);function f(m){return m&&m.__esModule?m:{default:m}}function h(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}var d=0;function g(m,y){m.setAttribute(y,m.getAttribute(y)!=="true")}var p=function(){function m(y){var v=this;h(this,m),this.select=y,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){v.togglePicker()}),this.label.addEventListener("keydown",function(_){switch(_.keyCode){case l.default.keys.ENTER:v.togglePicker();break;case l.default.keys.ESCAPE:v.escape(),_.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),g(this.label,"aria-expanded"),g(this.options,"aria-hidden")}},{key:"buildItem",value:function(v){var _=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),v.hasAttribute("value")&&b.setAttribute("data-value",v.getAttribute("value")),v.textContent&&b.setAttribute("data-label",v.textContent),b.addEventListener("click",function(){_.selectItem(b,!0)}),b.addEventListener("keydown",function(x){switch(x.keyCode){case l.default.keys.ENTER:_.selectItem(b,!0),x.preventDefault();break;case l.default.keys.ESCAPE:_.escape(),x.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var v=document.createElement("span");return v.classList.add("ql-picker-label"),v.innerHTML=u.default,v.tabIndex="0",v.setAttribute("role","button"),v.setAttribute("aria-expanded","false"),this.container.appendChild(v),v}},{key:"buildOptions",value:function(){var v=this,_=document.createElement("span");_.classList.add("ql-picker-options"),_.setAttribute("aria-hidden","true"),_.tabIndex="-1",_.id="ql-picker-options-"+d,d+=1,this.label.setAttribute("aria-controls",_.id),this.options=_,[].slice.call(this.select.options).forEach(function(b){var x=v.buildItem(b);_.appendChild(x),b.selected===!0&&v.selectItem(x)}),this.container.appendChild(_)}},{key:"buildPicker",value:function(){var v=this;[].slice.call(this.select.attributes).forEach(function(_){v.container.setAttribute(_.name,_.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var v=this;this.close(),setTimeout(function(){return v.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(v){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(v!==b&&(b!=null&&b.classList.remove("ql-selected"),v!=null&&(v.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(v.parentNode.children,v),v.hasAttribute("data-value")?this.label.setAttribute("data-value",v.getAttribute("data-value")):this.label.removeAttribute("data-value"),v.hasAttribute("data-label")?this.label.setAttribute("data-label",v.getAttribute("data-label")):this.label.removeAttribute("data-label"),_))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var x=document.createEvent("Event");x.initEvent("change",!0,!0),this.select.dispatchEvent(x)}this.close()}}},{key:"update",value:function(){var v=void 0;if(this.select.selectedIndex>-1){var _=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];v=this.select.options[this.select.selectedIndex],this.selectItem(_)}else this.selectItem(null);var b=v!=null&&v!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),m}();i.default=p},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(0),s=N(o),a=r(5),l=N(a),c=r(4),u=N(c),f=r(16),h=N(f),d=r(25),g=N(d),p=r(24),m=N(p),y=r(35),v=N(y),_=r(6),b=N(_),x=r(22),T=N(x),S=r(7),k=N(S),P=r(55),E=N(P),w=r(42),A=N(w),j=r(23),M=N(j);function N(q){return q&&q.__esModule?q:{default:q}}l.default.register({"blots/block":u.default,"blots/block/embed":c.BlockEmbed,"blots/break":h.default,"blots/container":g.default,"blots/cursor":m.default,"blots/embed":v.default,"blots/inline":b.default,"blots/scroll":T.default,"blots/text":k.default,"modules/clipboard":E.default,"modules/history":A.default,"modules/keyboard":M.default}),s.default.register(u.default,h.default,m.default,b.default,T.default,k.default),i.default=l.default},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(1),s=function(){function a(l){this.domNode=l,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?c=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?c=document.createElement(l):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return o.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},a.prototype.deleteAt=function(l,c){var u=this.isolate(l,c);u.remove()},a.prototype.formatAt=function(l,c,u,f){var h=this.isolate(l,c);if(o.query(u,o.Scope.BLOT)!=null&&f)h.wrap(u,f);else if(o.query(u,o.Scope.ATTRIBUTE)!=null){var d=o.create(this.statics.scope);h.wrap(d),d.format(u,f)}},a.prototype.insertAt=function(l,c,u){var f=u==null?o.create("text",c):o.create(c,u),h=this.split(l);this.parent.insertBefore(f,h)},a.prototype.insertInto=function(l,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var u=null;l.children.insertBefore(this,c),c!=null&&(u=c.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=u)&&l.domNode.insertBefore(this.domNode,u),this.parent=l,this.attach()},a.prototype.isolate=function(l,c){var u=this.split(l);return u.split(c),u},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,c){var u=typeof l=="string"?o.create(l,c):l;return u.replace(this),u},a.prototype.split=function(l,c){return l===0?this:this.next},a.prototype.update=function(l,c){},a.prototype.wrap=function(l,c){var u=typeof l=="string"?o.create(l,c):l;return this.parent!=null&&this.parent.insertBefore(u,this.next),u.appendChild(this),u},a.blotName="abstract",a}();i.default=s},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(12),s=r(32),a=r(33),l=r(1),c=function(){function u(f){this.attributes={},this.domNode=f,this.build()}return u.prototype.attribute=function(f,h){h?f.add(this.domNode,h)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},u.prototype.build=function(){var f=this;this.attributes={};var h=o.default.keys(this.domNode),d=s.default.keys(this.domNode),g=a.default.keys(this.domNode);h.concat(d).concat(g).forEach(function(p){var m=l.query(p,l.Scope.ATTRIBUTE);m instanceof o.default&&(f.attributes[m.attrName]=m)})},u.prototype.copy=function(f){var h=this;Object.keys(this.attributes).forEach(function(d){var g=h.attributes[d].value(h.domNode);f.format(d,g)})},u.prototype.move=function(f){var h=this;this.copy(f),Object.keys(this.attributes).forEach(function(d){h.attributes[d].remove(h.domNode)}),this.attributes={}},u.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(h,d){return h[d]=f.attributes[d].value(f.domNode),h},{})},u}();i.default=c},function(e,i,r){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])};return function(u,f){c(u,f);function h(){this.constructor=u}u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(12);function a(c,u){var f=c.getAttribute("class")||"";return f.split(/\s+/).filter(function(h){return h.indexOf(u+"-")===0})}var l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(h){return h.split("-").slice(0,-1).join("-")})},u.prototype.add=function(f,h){return this.canAdd(f,h)?(this.remove(f),f.classList.add(this.keyName+"-"+h),!0):!1},u.prototype.remove=function(f){var h=a(f,this.keyName);h.forEach(function(d){f.classList.remove(d)}),f.classList.length===0&&f.removeAttribute("class")},u.prototype.value=function(f){var h=a(f,this.keyName)[0]||"",d=h.slice(this.keyName.length+1);return this.canAdd(f,d)?d:""},u}(s.default);i.default=l},function(e,i,r){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])};return function(u,f){c(u,f);function h(){this.constructor=u}u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(12);function a(c){var u=c.split("-"),f=u.slice(1).map(function(h){return h[0].toUpperCase()+h.slice(1)}).join("");return u[0]+f}var l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(h){var d=h.split(":");return d[0].trim()})},u.prototype.add=function(f,h){return this.canAdd(f,h)?(f.style[a(this.keyName)]=h,!0):!1},u.prototype.remove=function(f){f.style[a(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},u.prototype.value=function(f){var h=f.style[a(this.keyName)];return this.canAdd(f,h)?h:""},u}(s.default);i.default=l},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function l(c,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,h.key,h)}}return function(c,u,f){return u&&l(c.prototype,u),f&&l(c,f),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,u){s(this,l),this.quill=c,this.options=u,this.modules={}}return o(l,[{key:"init",value:function(){var u=this;Object.keys(this.options.modules).forEach(function(f){u.modules[f]==null&&u.addModule(f)})}},{key:"addModule",value:function(u){var f=this.quill.constructor.import("modules/"+u);return this.modules[u]=new f(this.quill,this.options.modules[u]||{}),this.modules[u]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},i.default=a},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function y(v,_){for(var b=0;b<_.length;b++){var x=_[b];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,_,b){return _&&y(v.prototype,_),b&&y(v,b),v}}(),s=function y(v,_,b){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,_);if(x===void 0){var T=Object.getPrototypeOf(v);return T===null?void 0:y(T,_,b)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(b)}},a=r(0),l=f(a),c=r(7),u=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function h(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function g(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p="\uFEFF",m=function(y){g(v,y);function v(_){h(this,v);var b=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,_));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(x){b.contentNode.appendChild(x)}),b.leftGuard=document.createTextNode(p),b.rightGuard=document.createTextNode(p),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return o(v,[{key:"index",value:function(b,x){return b===this.leftGuard?0:b===this.rightGuard?1:s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,b,x)}},{key:"restore",value:function(b){var x=void 0,T=void 0,S=b.data.split(p).join("");if(b===this.leftGuard)if(this.prev instanceof u.default){var k=this.prev.length();this.prev.insertAt(k,S),x={startNode:this.prev.domNode,startOffset:k+S.length}}else T=document.createTextNode(S),this.parent.insertBefore(l.default.create(T),this),x={startNode:T,startOffset:S.length};else b===this.rightGuard&&(this.next instanceof u.default?(this.next.insertAt(0,S),x={startNode:this.next.domNode,startOffset:S.length}):(T=document.createTextNode(S),this.parent.insertBefore(l.default.create(T),this.next),x={startNode:T,startOffset:S.length}));return b.data=p,x}},{key:"update",value:function(b,x){var T=this;b.forEach(function(S){if(S.type==="characterData"&&(S.target===T.leftGuard||S.target===T.rightGuard)){var k=T.restore(S.target);k&&(x.range=k)}})}}]),v}(l.default.Embed);i.default=m},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.AlignStyle=i.AlignClass=i.AlignAttribute=void 0;var o=r(0),s=a(o);function a(h){return h&&h.__esModule?h:{default:h}}var l={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new s.default.Attributor.Attribute("align","align",l),u=new s.default.Attributor.Class("align","ql-align",l),f=new s.default.Attributor.Style("align","text-align",l);i.AlignAttribute=c,i.AlignClass=u,i.AlignStyle=f},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.BackgroundStyle=i.BackgroundClass=void 0;var o=r(0),s=l(o),a=r(26);function l(f){return f&&f.__esModule?f:{default:f}}var c=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),u=new a.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});i.BackgroundClass=c,i.BackgroundStyle=u},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.DirectionStyle=i.DirectionClass=i.DirectionAttribute=void 0;var o=r(0),s=a(o);function a(h){return h&&h.__esModule?h:{default:h}}var l={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},c=new s.default.Attributor.Attribute("direction","dir",l),u=new s.default.Attributor.Class("direction","ql-direction",l),f=new s.default.Attributor.Style("direction","direction",l);i.DirectionAttribute=c,i.DirectionClass=u,i.DirectionStyle=f},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.FontClass=i.FontStyle=void 0;var o=function(){function y(v,_){for(var b=0;b<_.length;b++){var x=_[b];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,_,b){return _&&y(v.prototype,_),b&&y(v,b),v}}(),s=function y(v,_,b){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,_);if(x===void 0){var T=Object.getPrototypeOf(v);return T===null?void 0:y(T,_,b)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(b)}},a=r(0),l=c(a);function c(y){return y&&y.__esModule?y:{default:y}}function u(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function h(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var d={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},g=new l.default.Attributor.Class("font","ql-font",d),p=function(y){h(v,y);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"value",value:function(b){return s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),v}(l.default.Attributor.Style),m=new p("font","font-family",d);i.FontStyle=m,i.FontClass=g},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.SizeStyle=i.SizeClass=void 0;var o=r(0),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}var l=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});i.SizeClass=l,i.SizeStyle=c},function(e,i,r){e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.getLastChangeIndex=i.default=void 0;var o=function(){function _(b,x){for(var T=0;T<x.length;T++){var S=x[T];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,x,T){return x&&_(b.prototype,x),T&&_(b,T),b}}(),s=r(0),a=h(s),l=r(5),c=h(l),u=r(9),f=h(u);function h(_){return _&&_.__esModule?_:{default:_}}function d(_,b){if(!(_ instanceof b))throw new TypeError("Cannot call a class as a function")}function g(_,b){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:_}function p(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);_.prototype=Object.create(b&&b.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(_,b):_.__proto__=b)}var m=function(_){p(b,_);function b(x,T){d(this,b);var S=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,x,T));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(c.default.events.EDITOR_CHANGE,function(k,P,E,w){k!==c.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||w===c.default.sources.USER?S.record(P,E):S.transform(P))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return o(b,[{key:"change",value:function(T,S){if(this.stack[T].length!==0){var k=this.stack[T].pop();this.stack[S].push(k),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(k[T],c.default.sources.USER),this.ignoreChange=!1;var P=v(k[T]);this.quill.setSelection(P)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(T,S){if(T.ops.length!==0){this.stack.redo=[];var k=this.quill.getContents().diff(S),P=Date.now();if(this.lastRecorded+this.options.delay>P&&this.stack.undo.length>0){var E=this.stack.undo.pop();k=k.compose(E.undo),T=E.redo.compose(T)}else this.lastRecorded=P;this.stack.undo.push({redo:T,undo:k}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(T){this.stack.undo.forEach(function(S){S.undo=T.transform(S.undo,!0),S.redo=T.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=T.transform(S.undo,!0),S.redo=T.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(f.default);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function y(_){var b=_.ops[_.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(x){return a.default.query(x,a.default.Scope.BLOCK)!=null}):!1}function v(_){var b=_.reduce(function(T,S){return T+=S.delete||0,T},0),x=_.length()-b;return y(_)&&(x-=1),x}i.default=m,i.getLastChangeIndex=v},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BaseTooltip=void 0;var o=function(){function L(D,W){for(var H=0;H<W.length;H++){var R=W[H];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(D,R.key,R)}}return function(D,W,H){return W&&L(D.prototype,W),H&&L(D,H),D}}(),s=function L(D,W,H){D===null&&(D=Function.prototype);var R=Object.getOwnPropertyDescriptor(D,W);if(R===void 0){var F=Object.getPrototypeOf(D);return F===null?void 0:L(F,W,H)}else{if("value"in R)return R.value;var U=R.get;return U===void 0?void 0:U.call(H)}},a=r(3),l=P(a),c=r(2),u=P(c),f=r(8),h=P(f),d=r(23),g=P(d),p=r(34),m=P(p),y=r(59),v=P(y),_=r(60),b=P(_),x=r(28),T=P(x),S=r(61),k=P(S);function P(L){return L&&L.__esModule?L:{default:L}}function E(L,D){if(!(L instanceof D))throw new TypeError("Cannot call a class as a function")}function w(L,D){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:L}function A(L,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);L.prototype=Object.create(D&&D.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(L,D):L.__proto__=D)}var j=[!1,"center","right","justify"],M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],N=[!1,"serif","monospace"],q=["1","2","3",!1],z=["small",!1,"large","huge"],G=function(L){A(D,L);function D(W,H){E(this,D);var R=w(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,W,H)),F=function U(V){if(!document.body.contains(W.root))return document.body.removeEventListener("click",U);R.tooltip!=null&&!R.tooltip.root.contains(V.target)&&document.activeElement!==R.tooltip.textbox&&!R.quill.hasFocus()&&R.tooltip.hide(),R.pickers!=null&&R.pickers.forEach(function(X){X.container.contains(V.target)||X.close()})};return W.emitter.listenDOM("click",document.body,F),R}return o(D,[{key:"addModule",value:function(H){var R=s(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"addModule",this).call(this,H);return H==="toolbar"&&this.extendToolbar(R),R}},{key:"buildButtons",value:function(H,R){H.forEach(function(F){var U=F.getAttribute("class")||"";U.split(/\s+/).forEach(function(V){if(V.startsWith("ql-")&&(V=V.slice(3),R[V]!=null))if(V==="direction")F.innerHTML=R[V][""]+R[V].rtl;else if(typeof R[V]=="string")F.innerHTML=R[V];else{var X=F.value||"";X!=null&&R[V][X]&&(F.innerHTML=R[V][X])}})})}},{key:"buildPickers",value:function(H,R){var F=this;this.pickers=H.map(function(V){if(V.classList.contains("ql-align"))return V.querySelector("option")==null&&C(V,j),new b.default(V,R.align);if(V.classList.contains("ql-background")||V.classList.contains("ql-color")){var X=V.classList.contains("ql-background")?"background":"color";return V.querySelector("option")==null&&C(V,M,X==="background"?"#ffffff":"#000000"),new v.default(V,R[X])}else return V.querySelector("option")==null&&(V.classList.contains("ql-font")?C(V,N):V.classList.contains("ql-header")?C(V,q):V.classList.contains("ql-size")&&C(V,z)),new T.default(V)});var U=function(){F.pickers.forEach(function(X){X.update()})};this.quill.on(h.default.events.EDITOR_CHANGE,U)}}]),D}(m.default);G.DEFAULTS=(0,l.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var D=this,W=this.container.querySelector("input.ql-image[type=file]");W==null&&(W=document.createElement("input"),W.setAttribute("type","file"),W.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),W.classList.add("ql-image"),W.addEventListener("change",function(){if(W.files!=null&&W.files[0]!=null){var H=new FileReader;H.onload=function(R){var F=D.quill.getSelection(!0);D.quill.updateContents(new u.default().retain(F.index).delete(F.length).insert({image:R.target.result}),h.default.sources.USER),D.quill.setSelection(F.index+1,h.default.sources.SILENT),W.value=""},H.readAsDataURL(W.files[0])}}),this.container.appendChild(W)),W.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var B=function(L){A(D,L);function D(W,H){E(this,D);var R=w(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,W,H));return R.textbox=R.root.querySelector('input[type="text"]'),R.listen(),R}return o(D,[{key:"listen",value:function(){var H=this;this.textbox.addEventListener("keydown",function(R){g.default.match(R,"enter")?(H.save(),R.preventDefault()):g.default.match(R,"escape")&&(H.cancel(),R.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),R!=null?this.textbox.value=R:H!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+H)||""),this.root.setAttribute("data-mode",H)}},{key:"restoreFocus",value:function(){var H=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=H}},{key:"save",value:function(){var H=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var R=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",H,h.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",H,h.default.sources.USER)),this.quill.root.scrollTop=R;break}case"video":H=I(H);case"formula":{if(!H)break;var F=this.quill.getSelection(!0);if(F!=null){var U=F.index+F.length;this.quill.insertEmbed(U,this.root.getAttribute("data-mode"),H,h.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(U+1," ",h.default.sources.USER),this.quill.setSelection(U+2,h.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),D}(k.default);function I(L){var D=L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return D?(D[1]||"https")+"://www.youtube.com/embed/"+D[2]+"?showinfo=0":(D=L.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(D[1]||"https")+"://player.vimeo.com/video/"+D[2]+"/":L}function C(L,D){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;D.forEach(function(H){var R=document.createElement("option");H===W?R.setAttribute("selected","selected"):R.setAttribute("value",H),L.appendChild(R)})}i.BaseTooltip=B,i.default=G},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},s.prototype.contains=function(a){for(var l,c=this.iterator();l=c();)if(l===a)return!0;return!1},s.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},s.prototype.offset=function(a){for(var l=0,c=this.head;c!=null;){if(c===a)return l;l+=c.length(),c=c.next}return-1},s.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},s.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},s.prototype.find=function(a,l){l===void 0&&(l=!1);for(var c,u=this.iterator();c=u();){var f=c.length();if(a<f||l&&a===f&&(c.next==null||c.next.length()!==0))return[c,a];a-=f}return[null,0]},s.prototype.forEach=function(a){for(var l,c=this.iterator();l=c();)a(l)},s.prototype.forEachAt=function(a,l,c){if(!(l<=0))for(var u=this.find(a),f=u[0],h=u[1],d,g=a-h,p=this.iterator(f);(d=p())&&g<a+l;){var m=d.length();a>g?c(d,a-g,Math.min(l,g+m-a)):c(d,0,Math.min(m,a+l-g)),g+=m}},s.prototype.map=function(a){return this.reduce(function(l,c){return l.push(a(c)),l},[])},s.prototype.reduce=function(a,l){for(var c,u=this.iterator();c=u();)l=a(l,c);return l},s}();i.default=o},function(e,i,r){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var g in d)d.hasOwnProperty(g)&&(h[g]=d[g])};return function(h,d){f(h,d);function g(){this.constructor=h}h.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(17),a=r(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,u=function(f){o(h,f);function h(d){var g=f.call(this,d)||this;return g.scroll=g,g.observer=new MutationObserver(function(p){g.update(p)}),g.observer.observe(g.domNode,l),g.attach(),g}return h.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},h.prototype.deleteAt=function(d,g){this.update(),d===0&&g===this.length()?this.children.forEach(function(p){p.remove()}):f.prototype.deleteAt.call(this,d,g)},h.prototype.formatAt=function(d,g,p,m){this.update(),f.prototype.formatAt.call(this,d,g,p,m)},h.prototype.insertAt=function(d,g,p){this.update(),f.prototype.insertAt.call(this,d,g,p)},h.prototype.optimize=function(d,g){var p=this;d===void 0&&(d=[]),g===void 0&&(g={}),f.prototype.optimize.call(this,g);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)d.push(m.pop());for(var y=function(x,T){T===void 0&&(T=!0),!(x==null||x===p)&&x.domNode.parentNode!=null&&(x.domNode[a.DATA_KEY].mutations==null&&(x.domNode[a.DATA_KEY].mutations=[]),T&&y(x.parent))},v=function(x){x.domNode[a.DATA_KEY]==null||x.domNode[a.DATA_KEY].mutations==null||(x instanceof s.default&&x.children.forEach(v),x.optimize(g))},_=d,b=0;_.length>0;b+=1){if(b>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(_.forEach(function(x){var T=a.find(x.target,!0);T!=null&&(T.domNode===x.target&&(x.type==="childList"?(y(a.find(x.previousSibling,!1)),[].forEach.call(x.addedNodes,function(S){var k=a.find(S,!1);y(k,!1),k instanceof s.default&&k.children.forEach(function(P){y(P,!1)})})):x.type==="attributes"&&y(T.prev)),y(T))}),this.children.forEach(v),_=[].slice.call(this.observer.takeRecords()),m=_.slice();m.length>0;)d.push(m.pop())}},h.prototype.update=function(d,g){var p=this;g===void 0&&(g={}),d=d||this.observer.takeRecords(),d.map(function(m){var y=a.find(m.target,!0);return y==null?null:y.domNode[a.DATA_KEY].mutations==null?(y.domNode[a.DATA_KEY].mutations=[m],y):(y.domNode[a.DATA_KEY].mutations.push(m),null)}).forEach(function(m){m==null||m===p||m.domNode[a.DATA_KEY]==null||m.update(m.domNode[a.DATA_KEY].mutations||[],g)}),this.domNode[a.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,g),this.optimize(d,g)},h.blotName="scroll",h.defaultChild="block",h.scope=a.Scope.BLOCK_BLOT,h.tagName="DIV",h}(s.default);i.default=u},function(e,i,r){var o=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)h.hasOwnProperty(d)&&(f[d]=h[d])};return function(f,h){u(f,h);function d(){this.constructor=f}f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(18),a=r(1);function l(u,f){if(Object.keys(u).length!==Object.keys(f).length)return!1;for(var h in u)if(u[h]!==f[h])return!1;return!0}var c=function(u){o(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(h){if(h.tagName!==f.tagName)return u.formats.call(this,h)},f.prototype.format=function(h,d){var g=this;h===this.statics.blotName&&!d?(this.children.forEach(function(p){p instanceof s.default||(p=p.wrap(f.blotName,!0)),g.attributes.copy(p)}),this.unwrap()):u.prototype.format.call(this,h,d)},f.prototype.formatAt=function(h,d,g,p){if(this.formats()[g]!=null||a.query(g,a.Scope.ATTRIBUTE)){var m=this.isolate(h,d);m.format(g,p)}else u.prototype.formatAt.call(this,h,d,g,p)},f.prototype.optimize=function(h){u.prototype.optimize.call(this,h);var d=this.formats();if(Object.keys(d).length===0)return this.unwrap();var g=this.next;g instanceof f&&g.prev===this&&l(d,g.formats())&&(g.moveChildren(this),g.remove())},f.blotName="inline",f.scope=a.Scope.INLINE_BLOT,f.tagName="SPAN",f}(s.default);i.default=c},function(e,i,r){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])};return function(u,f){c(u,f);function h(){this.constructor=u}u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(18),a=r(1),l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(f){var h=a.query(u.blotName).tagName;if(f.tagName!==h)return c.formats.call(this,f)},u.prototype.format=function(f,h){a.query(f,a.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!h?this.replaceWith(u.blotName):c.prototype.format.call(this,f,h))},u.prototype.formatAt=function(f,h,d,g){a.query(d,a.Scope.BLOCK)!=null?this.format(d,g):c.prototype.formatAt.call(this,f,h,d,g)},u.prototype.insertAt=function(f,h,d){if(d==null||a.query(h,a.Scope.INLINE)!=null)c.prototype.insertAt.call(this,f,h,d);else{var g=this.split(f),p=a.create(h,d);g.parent.insertBefore(p,g)}},u.prototype.update=function(f,h){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,f,h)},u.blotName="block",u.scope=a.Scope.BLOCK_BLOT,u.tagName="P",u}(s.default);i.default=l},function(e,i,r){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)u.hasOwnProperty(f)&&(c[f]=u[f])};return function(c,u){l(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(19),a=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.formats=function(u){},c.prototype.format=function(u,f){l.prototype.formatAt.call(this,0,this.length(),u,f)},c.prototype.formatAt=function(u,f,h,d){u===0&&f===this.length()?this.format(h,d):l.prototype.formatAt.call(this,u,f,h,d)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(s.default);i.default=a},function(e,i,r){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])};return function(u,f){c(u,f);function h(){this.constructor=u}u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var s=r(19),a=r(1),l=function(c){o(u,c);function u(f){var h=c.call(this,f)||this;return h.text=h.statics.value(h.domNode),h}return u.create=function(f){return document.createTextNode(f)},u.value=function(f){var h=f.data;return h.normalize&&(h=h.normalize()),h},u.prototype.deleteAt=function(f,h){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+h)},u.prototype.index=function(f,h){return this.domNode===f?h:-1},u.prototype.insertAt=function(f,h,d){d==null?(this.text=this.text.slice(0,f)+h+this.text.slice(f),this.domNode.data=this.text):c.prototype.insertAt.call(this,f,h,d)},u.prototype.length=function(){return this.text.length},u.prototype.optimize=function(f){c.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof u&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},u.prototype.position=function(f,h){return[this.domNode,f]},u.prototype.split=function(f,h){if(h===void 0&&(h=!1),!h){if(f===0)return this;if(f===this.length())return this.next}var d=a.create(this.domNode.splitText(f));return this.parent.insertBefore(d,this.next),this.text=this.statics.value(this.domNode),d},u.prototype.update=function(f,h){var d=this;f.some(function(g){return g.type==="characterData"&&g.target===d.domNode})&&(this.text=this.statics.value(this.domNode))},u.prototype.value=function(){return this.text},u.blotName="text",u.scope=a.Scope.INLINE_BLOT,u}(s.default);i.default=l},function(e,i,r){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:s.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var c=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>c.length)&&(l=c.length),l-=a.length;var u=c.indexOf(a,l);return u!==-1&&u===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),u=c.length>>>0,f=arguments[1],h,d=0;d<u;d++)if(h=c[d],l.call(f,h,d,c))return h}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,i){var r=-1,o=1,s=0;function a(b,x,T){if(b==x)return b?[[s,b]]:[];(T<0||b.length<T)&&(T=null);var S=f(b,x),k=b.substring(0,S);b=b.substring(S),x=x.substring(S),S=h(b,x);var P=b.substring(b.length-S);b=b.substring(0,b.length-S),x=x.substring(0,x.length-S);var E=l(b,x);return k&&E.unshift([s,k]),P&&E.push([s,P]),g(E),T!=null&&(E=y(E,T)),E=v(E),E}function l(b,x){var T;if(!b)return[[o,x]];if(!x)return[[r,b]];var S=b.length>x.length?b:x,k=b.length>x.length?x:b,P=S.indexOf(k);if(P!=-1)return T=[[o,S.substring(0,P)],[s,k],[o,S.substring(P+k.length)]],b.length>x.length&&(T[0][0]=T[2][0]=r),T;if(k.length==1)return[[r,b],[o,x]];var E=d(b,x);if(E){var w=E[0],A=E[1],j=E[2],M=E[3],N=E[4],q=a(w,j),z=a(A,M);return q.concat([[s,N]],z)}return c(b,x)}function c(b,x){for(var T=b.length,S=x.length,k=Math.ceil((T+S)/2),P=k,E=2*k,w=new Array(E),A=new Array(E),j=0;j<E;j++)w[j]=-1,A[j]=-1;w[P+1]=0,A[P+1]=0;for(var M=T-S,N=M%2!=0,q=0,z=0,G=0,B=0,I=0;I<k;I++){for(var C=-I+q;C<=I-z;C+=2){var L=P+C,D;C==-I||C!=I&&w[L-1]<w[L+1]?D=w[L+1]:D=w[L-1]+1;for(var W=D-C;D<T&&W<S&&b.charAt(D)==x.charAt(W);)D++,W++;if(w[L]=D,D>T)z+=2;else if(W>S)q+=2;else if(N){var H=P+M-C;if(H>=0&&H<E&&A[H]!=-1){var R=T-A[H];if(D>=R)return u(b,x,D,W)}}}for(var F=-I+G;F<=I-B;F+=2){var H=P+F,R;F==-I||F!=I&&A[H-1]<A[H+1]?R=A[H+1]:R=A[H-1]+1;for(var U=R-F;R<T&&U<S&&b.charAt(T-R-1)==x.charAt(S-U-1);)R++,U++;if(A[H]=R,R>T)B+=2;else if(U>S)G+=2;else if(!N){var L=P+M-F;if(L>=0&&L<E&&w[L]!=-1){var D=w[L],W=P+D-L;if(R=T-R,D>=R)return u(b,x,D,W)}}}}return[[r,b],[o,x]]}function u(b,x,T,S){var k=b.substring(0,T),P=x.substring(0,S),E=b.substring(T),w=x.substring(S),A=a(k,P),j=a(E,w);return A.concat(j)}function f(b,x){if(!b||!x||b.charAt(0)!=x.charAt(0))return 0;for(var T=0,S=Math.min(b.length,x.length),k=S,P=0;T<k;)b.substring(P,k)==x.substring(P,k)?(T=k,P=T):S=k,k=Math.floor((S-T)/2+T);return k}function h(b,x){if(!b||!x||b.charAt(b.length-1)!=x.charAt(x.length-1))return 0;for(var T=0,S=Math.min(b.length,x.length),k=S,P=0;T<k;)b.substring(b.length-k,b.length-P)==x.substring(x.length-k,x.length-P)?(T=k,P=T):S=k,k=Math.floor((S-T)/2+T);return k}function d(b,x){var T=b.length>x.length?b:x,S=b.length>x.length?x:b;if(T.length<4||S.length*2<T.length)return null;function k(z,G,B){for(var I=z.substring(B,B+Math.floor(z.length/4)),C=-1,L="",D,W,H,R;(C=G.indexOf(I,C+1))!=-1;){var F=f(z.substring(B),G.substring(C)),U=h(z.substring(0,B),G.substring(0,C));L.length<U+F&&(L=G.substring(C-U,C)+G.substring(C,C+F),D=z.substring(0,B-U),W=z.substring(B+F),H=G.substring(0,C-U),R=G.substring(C+F))}return L.length*2>=z.length?[D,W,H,R,L]:null}var P=k(T,S,Math.ceil(T.length/4)),E=k(T,S,Math.ceil(T.length/2)),w;if(!P&&!E)return null;E?P?w=P[4].length>E[4].length?P:E:w=E:w=P;var A,j,M,N;b.length>x.length?(A=w[0],j=w[1],M=w[2],N=w[3]):(M=w[0],N=w[1],A=w[2],j=w[3]);var q=w[4];return[A,j,M,N,q]}function g(b){b.push([s,""]);for(var x=0,T=0,S=0,k="",P="",E;x<b.length;)switch(b[x][0]){case o:S++,P+=b[x][1],x++;break;case r:T++,k+=b[x][1],x++;break;case s:T+S>1?(T!==0&&S!==0&&(E=f(P,k),E!==0&&(x-T-S>0&&b[x-T-S-1][0]==s?b[x-T-S-1][1]+=P.substring(0,E):(b.splice(0,0,[s,P.substring(0,E)]),x++),P=P.substring(E),k=k.substring(E)),E=h(P,k),E!==0&&(b[x][1]=P.substring(P.length-E)+b[x][1],P=P.substring(0,P.length-E),k=k.substring(0,k.length-E))),T===0?b.splice(x-S,T+S,[o,P]):S===0?b.splice(x-T,T+S,[r,k]):b.splice(x-T-S,T+S,[r,k],[o,P]),x=x-T-S+(T?1:0)+(S?1:0)+1):x!==0&&b[x-1][0]==s?(b[x-1][1]+=b[x][1],b.splice(x,1)):x++,S=0,T=0,k="",P="";break}b[b.length-1][1]===""&&b.pop();var w=!1;for(x=1;x<b.length-1;)b[x-1][0]==s&&b[x+1][0]==s&&(b[x][1].substring(b[x][1].length-b[x-1][1].length)==b[x-1][1]?(b[x][1]=b[x-1][1]+b[x][1].substring(0,b[x][1].length-b[x-1][1].length),b[x+1][1]=b[x-1][1]+b[x+1][1],b.splice(x-1,1),w=!0):b[x][1].substring(0,b[x+1][1].length)==b[x+1][1]&&(b[x-1][1]+=b[x+1][1],b[x][1]=b[x][1].substring(b[x+1][1].length)+b[x+1][1],b.splice(x+1,1),w=!0)),x++;w&&g(b)}var p=a;p.INSERT=o,p.DELETE=r,p.EQUAL=s,e.exports=p;function m(b,x){if(x===0)return[s,b];for(var T=0,S=0;S<b.length;S++){var k=b[S];if(k[0]===r||k[0]===s){var P=T+k[1].length;if(x===P)return[S+1,b];if(x<P){b=b.slice();var E=x-T,w=[k[0],k[1].slice(0,E)],A=[k[0],k[1].slice(E)];return b.splice(S,1,w,A),[S+1,b]}else T=P}}throw new Error("cursor_pos is out of bounds!")}function y(b,x){var T=m(b,x),S=T[1],k=T[0],P=S[k],E=S[k+1];if(P==null)return b;if(P[0]!==s)return b;if(E!=null&&P[1]+E[1]===E[1]+P[1])return S.splice(k,2,E,P),_(S,k,2);if(E!=null&&E[1].indexOf(P[1])===0){S.splice(k,2,[E[0],P[1]],[0,P[1]]);var w=E[1].slice(P[1].length);return w.length>0&&S.splice(k+2,0,[E[0],w]),_(S,k,3)}else return b}function v(b){for(var x=!1,T=function(E){return E.charCodeAt(0)>=56320&&E.charCodeAt(0)<=57343},S=function(E){return E.charCodeAt(E.length-1)>=55296&&E.charCodeAt(E.length-1)<=56319},k=2;k<b.length;k+=1)b[k-2][0]===s&&S(b[k-2][1])&&b[k-1][0]===r&&T(b[k-1][1])&&b[k][0]===o&&T(b[k][1])&&(x=!0,b[k-1][1]=b[k-2][1].slice(-1)+b[k-1][1],b[k][1]=b[k-2][1].slice(-1)+b[k][1],b[k-2][1]=b[k-2][1].slice(0,-1));if(!x)return b;for(var P=[],k=0;k<b.length;k+=1)b[k][1].length>0&&P.push(b[k]);return P}function _(b,x,T){for(var S=x+T-1;S>=0&&S>=x-1;S--)if(S+1<b.length){var k=b[S],P=b[S+1];k[0]===P[1]&&b.splice(S,2,[k[0],k[1]+P[1]])}return b}},function(e,i){i=e.exports=typeof Object.keys=="function"?Object.keys:r,i.shim=r;function r(o){var s=[];for(var a in o)s.push(a);return s}},function(e,i){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";i=e.exports=r?o:s,i.supported=o;function o(a){return Object.prototype.toString.call(a)=="[object Arguments]"}i.unsupported=s;function s(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(e,i){var r=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)r.call(f,h)&&u.push(o?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u,f){var h=o?o+u:u,d=this._events[h];if(f)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var g=0,p=d.length,m=new Array(p);g<p;g++)m[g]=d[g].fn;return m},l.prototype.emit=function(u,f,h,d,g,p){var m=o?o+u:u;if(!this._events[m])return!1;var y=this._events[m],v=arguments.length,_,b;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,h),!0;case 4:return y.fn.call(y.context,f,h,d),!0;case 5:return y.fn.call(y.context,f,h,d,g),!0;case 6:return y.fn.call(y.context,f,h,d,g,p),!0}for(b=1,_=new Array(v-1);b<v;b++)_[b-1]=arguments[b];y.fn.apply(y.context,_)}else{var x=y.length,T;for(b=0;b<x;b++)switch(y[b].once&&this.removeListener(u,y[b].fn,void 0,!0),v){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,f);break;case 3:y[b].fn.call(y[b].context,f,h);break;case 4:y[b].fn.call(y[b].context,f,h,d);break;default:if(!_)for(T=1,_=new Array(v-1);T<v;T++)_[T-1]=arguments[T];y[b].fn.apply(y[b].context,_)}}return!0},l.prototype.on=function(u,f,h){var d=new a(f,h||this),g=o?o+u:u;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],d]:this._events[g].push(d):(this._events[g]=d,this._eventsCount++),this},l.prototype.once=function(u,f,h){var d=new a(f,h||this,!0),g=o?o+u:u;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],d]:this._events[g].push(d):(this._events[g]=d,this._eventsCount++),this},l.prototype.removeListener=function(u,f,h,d){var g=o?o+u:u;if(!this._events[g])return this;if(!f)return--this._eventsCount===0?this._events=new s:delete this._events[g],this;var p=this._events[g];if(p.fn)p.fn===f&&(!d||p.once)&&(!h||p.context===h)&&(--this._eventsCount===0?this._events=new s:delete this._events[g]);else{for(var m=0,y=[],v=p.length;m<v;m++)(p[m].fn!==f||d&&!p[m].once||h&&p[m].context!==h)&&y.push(p[m]);y.length?this._events[g]=y.length===1?y[0]:y:--this._eventsCount===0?this._events=new s:delete this._events[g]}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=o?o+u:u,this._events[f]&&(--this._eventsCount===0?this._events=new s:delete this._events[f])):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=o,l.EventEmitter=l,typeof e<"u"&&(e.exports=l)},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.matchText=i.matchSpacing=i.matchNewline=i.matchBlot=i.matchAttributor=i.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},s=function(){function K(Y,Q){var tt=[],Z=!0,lt=!1,ct=void 0;try{for(var ut=Y[Symbol.iterator](),Yt;!(Z=(Yt=ut.next()).done)&&(tt.push(Yt.value),!(Q&&tt.length===Q));Z=!0);}catch(ue){lt=!0,ct=ue}finally{try{!Z&&ut.return&&ut.return()}finally{if(lt)throw ct}}return tt}return function(Y,Q){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return K(Y,Q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function K(Y,Q){for(var tt=0;tt<Q.length;tt++){var Z=Q[tt];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}}return function(Y,Q,tt){return Q&&K(Y.prototype,Q),tt&&K(Y,tt),Y}}(),l=r(3),c=A(l),u=r(2),f=A(u),h=r(0),d=A(h),g=r(5),p=A(g),m=r(10),y=A(m),v=r(9),_=A(v),b=r(36),x=r(37),T=r(13),S=A(T),k=r(26),P=r(38),E=r(39),w=r(40);function A(K){return K&&K.__esModule?K:{default:K}}function j(K,Y,Q){return Y in K?Object.defineProperty(K,Y,{value:Q,enumerable:!0,configurable:!0,writable:!0}):K[Y]=Q,K}function M(K,Y){if(!(K instanceof Y))throw new TypeError("Cannot call a class as a function")}function N(K,Y){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:K}function q(K,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);K.prototype=Object.create(Y&&Y.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(K,Y):K.__proto__=Y)}var z=(0,y.default)("quill:clipboard"),G="__ql-matcher",B=[[Node.TEXT_NODE,Pt],[Node.TEXT_NODE,ht],["br",nt],[Node.ELEMENT_NODE,ht],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,mt],[Node.ELEMENT_NODE,V],[Node.ELEMENT_NODE,Ft],["li",st],["b",U.bind(U,"bold")],["i",U.bind(U,"italic")],["style",ot]],I=[b.AlignAttribute,P.DirectionAttribute].reduce(function(K,Y){return K[Y.keyName]=Y,K},{}),C=[b.AlignStyle,x.BackgroundStyle,k.ColorStyle,P.DirectionStyle,E.FontStyle,w.SizeStyle].reduce(function(K,Y){return K[Y.keyName]=Y,K},{}),L=function(K){q(Y,K);function Y(Q,tt){M(this,Y);var Z=N(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,Q,tt));return Z.quill.root.addEventListener("paste",Z.onPaste.bind(Z)),Z.container=Z.quill.addContainer("ql-clipboard"),Z.container.setAttribute("contenteditable",!0),Z.container.setAttribute("tabindex",-1),Z.matchers=[],B.concat(Z.options.matchers).forEach(function(lt){var ct=s(lt,2),ut=ct[0],Yt=ct[1];!tt.matchVisual&&Yt===mt||Z.addMatcher(ut,Yt)}),Z}return a(Y,[{key:"addMatcher",value:function(tt,Z){this.matchers.push([tt,Z])}},{key:"convert",value:function(tt){if(typeof tt=="string")return this.container.innerHTML=tt.replace(/\>\r?\n +\</g,"><"),this.convert();var Z=this.quill.getFormat(this.quill.selection.savedRange.index);if(Z[S.default.blotName]){var lt=this.container.innerText;return this.container.innerHTML="",new f.default().insert(lt,j({},S.default.blotName,Z[S.default.blotName]))}var ct=this.prepareMatching(),ut=s(ct,2),Yt=ut[0],ue=ut[1],Ot=F(this.container,Yt,ue);return H(Ot,`
`)&&Ot.ops[Ot.ops.length-1].attributes==null&&(Ot=Ot.compose(new f.default().retain(Ot.length()-1).delete(1))),z.log("convert",this.container.innerHTML,Ot),this.container.innerHTML="",Ot}},{key:"dangerouslyPasteHTML",value:function(tt,Z){var lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof tt=="string")this.quill.setContents(this.convert(tt),Z),this.quill.setSelection(0,p.default.sources.SILENT);else{var ct=this.convert(Z);this.quill.updateContents(new f.default().retain(tt).concat(ct),lt),this.quill.setSelection(tt+ct.length(),p.default.sources.SILENT)}}},{key:"onPaste",value:function(tt){var Z=this;if(!(tt.defaultPrevented||!this.quill.isEnabled())){var lt=this.quill.getSelection(),ct=new f.default().retain(lt.index),ut=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(p.default.sources.SILENT),setTimeout(function(){ct=ct.concat(Z.convert()).delete(lt.length),Z.quill.updateContents(ct,p.default.sources.USER),Z.quill.setSelection(ct.length()-lt.length,p.default.sources.SILENT),Z.quill.scrollingContainer.scrollTop=ut,Z.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var tt=this,Z=[],lt=[];return this.matchers.forEach(function(ct){var ut=s(ct,2),Yt=ut[0],ue=ut[1];switch(Yt){case Node.TEXT_NODE:lt.push(ue);break;case Node.ELEMENT_NODE:Z.push(ue);break;default:[].forEach.call(tt.container.querySelectorAll(Yt),function(Ot){Ot[G]=Ot[G]||[],Ot[G].push(ue)});break}}),[Z,lt]}}]),Y}(_.default);L.DEFAULTS={matchers:[],matchVisual:!0};function D(K,Y,Q){return(typeof Y>"u"?"undefined":o(Y))==="object"?Object.keys(Y).reduce(function(tt,Z){return D(tt,Z,Y[Z])},K):K.reduce(function(tt,Z){return Z.attributes&&Z.attributes[Y]?tt.push(Z):tt.insert(Z.insert,(0,c.default)({},j({},Y,Q),Z.attributes))},new f.default)}function W(K){if(K.nodeType!==Node.ELEMENT_NODE)return{};var Y="__ql-computed-style";return K[Y]||(K[Y]=window.getComputedStyle(K))}function H(K,Y){for(var Q="",tt=K.ops.length-1;tt>=0&&Q.length<Y.length;--tt){var Z=K.ops[tt];if(typeof Z.insert!="string")break;Q=Z.insert+Q}return Q.slice(-1*Y.length)===Y}function R(K){if(K.childNodes.length===0)return!1;var Y=W(K);return["block","list-item"].indexOf(Y.display)>-1}function F(K,Y,Q){return K.nodeType===K.TEXT_NODE?Q.reduce(function(tt,Z){return Z(K,tt)},new f.default):K.nodeType===K.ELEMENT_NODE?[].reduce.call(K.childNodes||[],function(tt,Z){var lt=F(Z,Y,Q);return Z.nodeType===K.ELEMENT_NODE&&(lt=Y.reduce(function(ct,ut){return ut(Z,ct)},lt),lt=(Z[G]||[]).reduce(function(ct,ut){return ut(Z,ct)},lt)),tt.concat(lt)},new f.default):new f.default}function U(K,Y,Q){return D(Q,K,!0)}function V(K,Y){var Q=d.default.Attributor.Attribute.keys(K),tt=d.default.Attributor.Class.keys(K),Z=d.default.Attributor.Style.keys(K),lt={};return Q.concat(tt).concat(Z).forEach(function(ct){var ut=d.default.query(ct,d.default.Scope.ATTRIBUTE);ut!=null&&(lt[ut.attrName]=ut.value(K),lt[ut.attrName])||(ut=I[ct],ut!=null&&(ut.attrName===ct||ut.keyName===ct)&&(lt[ut.attrName]=ut.value(K)||void 0),ut=C[ct],ut!=null&&(ut.attrName===ct||ut.keyName===ct)&&(ut=C[ct],lt[ut.attrName]=ut.value(K)||void 0))}),Object.keys(lt).length>0&&(Y=D(Y,lt)),Y}function X(K,Y){var Q=d.default.query(K);if(Q==null)return Y;if(Q.prototype instanceof d.default.Embed){var tt={},Z=Q.value(K);Z!=null&&(tt[Q.blotName]=Z,Y=new f.default().insert(tt,Q.formats(K)))}else typeof Q.formats=="function"&&(Y=D(Y,Q.blotName,Q.formats(K)));return Y}function nt(K,Y){return H(Y,`
`)||Y.insert(`
`),Y}function ot(){return new f.default}function st(K,Y){var Q=d.default.query(K);if(Q==null||Q.blotName!=="list-item"||!H(Y,`
`))return Y;for(var tt=-1,Z=K.parentNode;!Z.classList.contains("ql-clipboard");)(d.default.query(Z)||{}).blotName==="list"&&(tt+=1),Z=Z.parentNode;return tt<=0?Y:Y.compose(new f.default().retain(Y.length()-1).retain(1,{indent:tt}))}function ht(K,Y){return H(Y,`
`)||(R(K)||Y.length()>0&&K.nextSibling&&R(K.nextSibling))&&Y.insert(`
`),Y}function mt(K,Y){if(R(K)&&K.nextElementSibling!=null&&!H(Y,`

`)){var Q=K.offsetHeight+parseFloat(W(K).marginTop)+parseFloat(W(K).marginBottom);K.nextElementSibling.offsetTop>K.offsetTop+Q*1.5&&Y.insert(`
`)}return Y}function Ft(K,Y){var Q={},tt=K.style||{};return tt.fontStyle&&W(K).fontStyle==="italic"&&(Q.italic=!0),tt.fontWeight&&(W(K).fontWeight.startsWith("bold")||parseInt(W(K).fontWeight)>=700)&&(Q.bold=!0),Object.keys(Q).length>0&&(Y=D(Y,Q)),parseFloat(tt.textIndent||0)>0&&(Y=new f.default().insert("	").concat(Y)),Y}function Pt(K,Y){var Q=K.data;if(K.parentNode.tagName==="O:P")return Y.insert(Q.trim());if(Q.trim().length===0&&K.parentNode.classList.contains("ql-clipboard"))return Y;if(!W(K.parentNode).whiteSpace.startsWith("pre")){var tt=function(lt,ct){return ct=ct.replace(/[^\u00a0]/g,""),ct.length<1&&lt?" ":ct};Q=Q.replace(/\r\n/g," ").replace(/\n/g," "),Q=Q.replace(/\s\s+/g,tt.bind(tt,!0)),(K.previousSibling==null&&R(K.parentNode)||K.previousSibling!=null&&R(K.previousSibling))&&(Q=Q.replace(/^\s+/,tt.bind(tt,!1))),(K.nextSibling==null&&R(K.parentNode)||K.nextSibling!=null&&R(K.nextSibling))&&(Q=Q.replace(/\s+$/,tt.bind(tt,!1)))}return Y.insert(Q)}i.default=L,i.matchAttributor=V,i.matchBlot=X,i.matchNewline=ht,i.matchSpacing=mt,i.matchText=Pt},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(p,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,y){return m&&g(p.prototype,m),y&&g(p,y),p}}(),s=function g(p,m,y){p===null&&(p=Function.prototype);var v=Object.getOwnPropertyDescriptor(p,m);if(v===void 0){var _=Object.getPrototypeOf(p);return _===null?void 0:g(_,m,y)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(y)}},a=r(6),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function u(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function f(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function h(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var d=function(g){h(p,g);function p(){return u(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return o(p,[{key:"optimize",value:function(y){s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"optimize",this).call(this,y),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),p}(l.default);d.blotName="bold",d.tagName=["STRONG","B"],i.default=d},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.addControls=i.default=void 0;var o=function(){function w(A,j){var M=[],N=!0,q=!1,z=void 0;try{for(var G=A[Symbol.iterator](),B;!(N=(B=G.next()).done)&&(M.push(B.value),!(j&&M.length===j));N=!0);}catch(I){q=!0,z=I}finally{try{!N&&G.return&&G.return()}finally{if(q)throw z}}return M}return function(A,j){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return w(A,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function w(A,j){for(var M=0;M<j.length;M++){var N=j[M];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(A,N.key,N)}}return function(A,j,M){return j&&w(A.prototype,j),M&&w(A,M),A}}(),a=r(2),l=y(a),c=r(0),u=y(c),f=r(5),h=y(f),d=r(10),g=y(d),p=r(9),m=y(p);function y(w){return w&&w.__esModule?w:{default:w}}function v(w,A,j){return A in w?Object.defineProperty(w,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):w[A]=j,w}function _(w,A){if(!(w instanceof A))throw new TypeError("Cannot call a class as a function")}function b(w,A){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:w}function x(w,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);w.prototype=Object.create(A&&A.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(w,A):w.__proto__=A)}var T=(0,g.default)("quill:toolbar"),S=function(w){x(A,w);function A(j,M){_(this,A);var N=b(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,j,M));if(Array.isArray(N.options.container)){var q=document.createElement("div");P(q,N.options.container),j.container.parentNode.insertBefore(q,j.container),N.container=q}else typeof N.options.container=="string"?N.container=document.querySelector(N.options.container):N.container=N.options.container;if(!(N.container instanceof HTMLElement)){var z;return z=T.error("Container required for toolbar",N.options),b(N,z)}return N.container.classList.add("ql-toolbar"),N.controls=[],N.handlers={},Object.keys(N.options.handlers).forEach(function(G){N.addHandler(G,N.options.handlers[G])}),[].forEach.call(N.container.querySelectorAll("button, select"),function(G){N.attach(G)}),N.quill.on(h.default.events.EDITOR_CHANGE,function(G,B){G===h.default.events.SELECTION_CHANGE&&N.update(B)}),N.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){var G=N.quill.selection.getRange(),B=o(G,1),I=B[0];N.update(I)}),N}return s(A,[{key:"addHandler",value:function(M,N){this.handlers[M]=N}},{key:"attach",value:function(M){var N=this,q=[].find.call(M.classList,function(G){return G.indexOf("ql-")===0});if(q){if(q=q.slice(3),M.tagName==="BUTTON"&&M.setAttribute("type","button"),this.handlers[q]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[q]==null){T.warn("ignoring attaching to disabled format",q,M);return}if(u.default.query(q)==null){T.warn("ignoring attaching to nonexistent format",q,M);return}}var z=M.tagName==="SELECT"?"change":"click";M.addEventListener(z,function(G){var B=void 0;if(M.tagName==="SELECT"){if(M.selectedIndex<0)return;var I=M.options[M.selectedIndex];I.hasAttribute("selected")?B=!1:B=I.value||!1}else M.classList.contains("ql-active")?B=!1:B=M.value||!M.hasAttribute("value"),G.preventDefault();N.quill.focus();var C=N.quill.selection.getRange(),L=o(C,1),D=L[0];if(N.handlers[q]!=null)N.handlers[q].call(N,B);else if(u.default.query(q).prototype instanceof u.default.Embed){if(B=prompt("Enter "+q),!B)return;N.quill.updateContents(new l.default().retain(D.index).delete(D.length).insert(v({},q,B)),h.default.sources.USER)}else N.quill.format(q,B,h.default.sources.USER);N.update(D)}),this.controls.push([q,M])}}},{key:"update",value:function(M){var N=M==null?{}:this.quill.getFormat(M);this.controls.forEach(function(q){var z=o(q,2),G=z[0],B=z[1];if(B.tagName==="SELECT"){var I=void 0;if(M==null)I=null;else if(N[G]==null)I=B.querySelector("option[selected]");else if(!Array.isArray(N[G])){var C=N[G];typeof C=="string"&&(C=C.replace(/\"/g,'\\"')),I=B.querySelector('option[value="'+C+'"]')}I==null?(B.value="",B.selectedIndex=-1):I.selected=!0}else if(M==null)B.classList.remove("ql-active");else if(B.hasAttribute("value")){var L=N[G]===B.getAttribute("value")||N[G]!=null&&N[G].toString()===B.getAttribute("value")||N[G]==null&&!B.getAttribute("value");B.classList.toggle("ql-active",L)}else B.classList.toggle("ql-active",N[G]!=null)})}}]),A}(m.default);S.DEFAULTS={};function k(w,A,j){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+A),j!=null&&(M.value=j),w.appendChild(M)}function P(w,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(j){var M=document.createElement("span");M.classList.add("ql-formats"),j.forEach(function(N){if(typeof N=="string")k(M,N);else{var q=Object.keys(N)[0],z=N[q];Array.isArray(z)?E(M,q,z):k(M,q,z)}}),w.appendChild(M)})}function E(w,A,j){var M=document.createElement("select");M.classList.add("ql-"+A),j.forEach(function(N){var q=document.createElement("option");N!==!1?q.setAttribute("value",N):q.setAttribute("selected","selected"),M.appendChild(q)}),w.appendChild(M)}S.DEFAULTS={container:null,handlers:{clean:function(){var A=this,j=this.quill.getSelection();if(j!=null)if(j.length==0){var M=this.quill.getFormat();Object.keys(M).forEach(function(N){u.default.query(N,u.default.Scope.INLINE)!=null&&A.quill.format(N,!1)})}else this.quill.removeFormat(j,h.default.sources.USER)},direction:function(A){var j=this.quill.getFormat().align;A==="rtl"&&j==null?this.quill.format("align","right",h.default.sources.USER):!A&&j==="right"&&this.quill.format("align",!1,h.default.sources.USER),this.quill.format("direction",A,h.default.sources.USER)},indent:function(A){var j=this.quill.getSelection(),M=this.quill.getFormat(j),N=parseInt(M.indent||0);if(A==="+1"||A==="-1"){var q=A==="+1"?1:-1;M.direction==="rtl"&&(q*=-1),this.quill.format("indent",N+q,h.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,h.default.sources.USER)},list:function(A){var j=this.quill.getSelection(),M=this.quill.getFormat(j);A==="check"?M.list==="checked"||M.list==="unchecked"?this.quill.format("list",!1,h.default.sources.USER):this.quill.format("list","unchecked",h.default.sources.USER):this.quill.format("list",A,h.default.sources.USER)}}},i.default=S,i.addControls=P},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(p,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,y){return m&&g(p.prototype,m),y&&g(p,y),p}}(),s=function g(p,m,y){p===null&&(p=Function.prototype);var v=Object.getOwnPropertyDescriptor(p,m);if(v===void 0){var _=Object.getPrototypeOf(p);return _===null?void 0:g(_,m,y)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(y)}},a=r(28),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function u(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function f(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function h(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var d=function(g){h(p,g);function p(m,y){u(this,p);var v=f(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,m));return v.label.innerHTML=y,v.container.classList.add("ql-color-picker"),[].slice.call(v.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(_){_.classList.add("ql-primary")}),v}return o(p,[{key:"buildItem",value:function(y){var v=s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"buildItem",this).call(this,y);return v.style.backgroundColor=y.getAttribute("value")||"",v}},{key:"selectItem",value:function(y,v){s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,y,v);var _=this.label.querySelector(".ql-color-label"),b=y&&y.getAttribute("data-value")||"";_&&(_.tagName==="line"?_.style.stroke=b:_.style.fill=b)}}]),p}(l.default);i.default=d},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(p,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,y){return m&&g(p.prototype,m),y&&g(p,y),p}}(),s=function g(p,m,y){p===null&&(p=Function.prototype);var v=Object.getOwnPropertyDescriptor(p,m);if(v===void 0){var _=Object.getPrototypeOf(p);return _===null?void 0:g(_,m,y)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(y)}},a=r(28),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function u(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function f(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function h(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var d=function(g){h(p,g);function p(m,y){u(this,p);var v=f(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,m));return v.container.classList.add("ql-icon-picker"),[].forEach.call(v.container.querySelectorAll(".ql-picker-item"),function(_){_.innerHTML=y[_.getAttribute("data-value")||""]}),v.defaultItem=v.container.querySelector(".ql-selected"),v.selectItem(v.defaultItem),v}return o(p,[{key:"selectItem",value:function(y,v){s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,y,v),y=y||this.defaultItem,this.label.innerHTML=y.innerHTML}}]),p}(l.default);i.default=d},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function l(c,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,h.key,h)}}return function(c,u,f){return u&&l(c.prototype,u),f&&l(c,f),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,u){var f=this;s(this,l),this.quill=c,this.boundsContainer=u||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return o(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(u){var f=u.left+u.width/2-this.root.offsetWidth/2,h=u.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=h+"px",this.root.classList.remove("ql-flip");var d=this.boundsContainer.getBoundingClientRect(),g=this.root.getBoundingClientRect(),p=0;if(g.right>d.right&&(p=d.right-g.right,this.root.style.left=f+p+"px"),g.left<d.left&&(p=d.left-g.left,this.root.style.left=f+p+"px"),g.bottom>d.bottom){var m=g.bottom-g.top,y=u.bottom-u.top+m;this.root.style.top=h-y+"px",this.root.classList.add("ql-flip")}return p}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();i.default=a},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function E(w,A){var j=[],M=!0,N=!1,q=void 0;try{for(var z=w[Symbol.iterator](),G;!(M=(G=z.next()).done)&&(j.push(G.value),!(A&&j.length===A));M=!0);}catch(B){N=!0,q=B}finally{try{!M&&z.return&&z.return()}finally{if(N)throw q}}return j}return function(w,A){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return E(w,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function E(w,A,j){w===null&&(w=Function.prototype);var M=Object.getOwnPropertyDescriptor(w,A);if(M===void 0){var N=Object.getPrototypeOf(w);return N===null?void 0:E(N,A,j)}else{if("value"in M)return M.value;var q=M.get;return q===void 0?void 0:q.call(j)}},a=function(){function E(w,A){for(var j=0;j<A.length;j++){var M=A[j];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,M.key,M)}}return function(w,A,j){return A&&E(w.prototype,A),j&&E(w,j),w}}(),l=r(3),c=_(l),u=r(8),f=_(u),h=r(43),d=_(h),g=r(27),p=_(g),m=r(15),y=r(41),v=_(y);function _(E){return E&&E.__esModule?E:{default:E}}function b(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function x(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function T(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],k=function(E){T(w,E);function w(A,j){b(this,w),j.modules.toolbar!=null&&j.modules.toolbar.container==null&&(j.modules.toolbar.container=S);var M=x(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,A,j));return M.quill.container.classList.add("ql-snow"),M}return a(w,[{key:"extendToolbar",value:function(j){j.container.classList.add("ql-snow"),this.buildButtons([].slice.call(j.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(j.container.querySelectorAll("select")),v.default),this.tooltip=new P(this.quill,this.options.bounds),j.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(M,N){j.handlers.link.call(j,!N.format.link)})}}]),w}(d.default);k.DEFAULTS=(0,c.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(w){if(w){var A=this.quill.getSelection();if(A==null||A.length==0)return;var j=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(j)&&j.indexOf("mailto:")!==0&&(j="mailto:"+j);var M=this.quill.theme.tooltip;M.edit("link",j)}else this.quill.format("link",!1)}}}}});var P=function(E){T(w,E);function w(A,j){b(this,w);var M=x(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,A,j));return M.preview=M.root.querySelector("a.ql-preview"),M}return a(w,[{key:"listen",value:function(){var j=this;s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(M){j.root.classList.contains("ql-editing")?j.save():j.edit("link",j.preview.textContent),M.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(M){if(j.linkRange!=null){var N=j.linkRange;j.restoreFocus(),j.quill.formatText(N,"link",!1,f.default.sources.USER),delete j.linkRange}M.preventDefault(),j.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(M,N,q){if(M!=null){if(M.length===0&&q===f.default.sources.USER){var z=j.quill.scroll.descendant(p.default,M.index),G=o(z,2),B=G[0],I=G[1];if(B!=null){j.linkRange=new m.Range(M.index-I,B.length());var C=p.default.formats(B.domNode);j.preview.textContent=C,j.preview.setAttribute("href",C),j.show(),j.position(j.quill.getBounds(j.linkRange));return}}else delete j.linkRange;j.hide()}})}},{key:"show",value:function(){s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),w}(h.BaseTooltip);P.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),i.default=k},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(29),s=Z(o),a=r(36),l=r(38),c=r(64),u=r(65),f=Z(u),h=r(66),d=Z(h),g=r(67),p=Z(g),m=r(37),y=r(26),v=r(39),_=r(40),b=r(56),x=Z(b),T=r(68),S=Z(T),k=r(27),P=Z(k),E=r(69),w=Z(E),A=r(70),j=Z(A),M=r(71),N=Z(M),q=r(72),z=Z(q),G=r(73),B=Z(G),I=r(13),C=Z(I),L=r(74),D=Z(L),W=r(75),H=Z(W),R=r(57),F=Z(R),U=r(41),V=Z(U),X=r(28),nt=Z(X),ot=r(59),st=Z(ot),ht=r(60),mt=Z(ht),Ft=r(61),Pt=Z(Ft),K=r(108),Y=Z(K),Q=r(62),tt=Z(Q);function Z(lt){return lt&&lt.__esModule?lt:{default:lt}}s.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":y.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":v.FontClass,"attributors/class/size":_.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":y.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":v.FontStyle,"attributors/style/size":_.SizeStyle},!0),s.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":c.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":y.ColorStyle,"formats/font":v.FontClass,"formats/size":_.SizeClass,"formats/blockquote":f.default,"formats/code-block":C.default,"formats/header":d.default,"formats/list":p.default,"formats/bold":x.default,"formats/code":I.Code,"formats/italic":S.default,"formats/link":P.default,"formats/script":w.default,"formats/strike":j.default,"formats/underline":N.default,"formats/image":z.default,"formats/video":B.default,"formats/list/item":g.ListItem,"modules/formula":D.default,"modules/syntax":H.default,"modules/toolbar":F.default,"themes/bubble":Y.default,"themes/snow":tt.default,"ui/icons":V.default,"ui/picker":nt.default,"ui/icon-picker":mt.default,"ui/color-picker":st.default,"ui/tooltip":Pt.default},!0),i.default=s.default},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.IndentClass=void 0;var o=function(){function p(m,y){for(var v=0;v<y.length;v++){var _=y[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,y,v){return y&&p(m.prototype,y),v&&p(m,v),m}}(),s=function p(m,y,v){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,y);if(_===void 0){var b=Object.getPrototypeOf(m);return b===null?void 0:p(b,y,v)}else{if("value"in _)return _.value;var x=_.get;return x===void 0?void 0:x.call(v)}},a=r(0),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function u(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function f(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function h(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){h(m,p);function m(){return u(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"add",value:function(v,_){if(_==="+1"||_==="-1"){var b=this.value(v)||0;_=_==="+1"?b+1:b-1}return _===0?(this.remove(v),!0):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,v,_)}},{key:"canAdd",value:function(v,_){return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,v,_)||s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,v,parseInt(_))}},{key:"value",value:function(v){return parseInt(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,v))||void 0}}]),m}(l.default.Attributor.Class),g=new d("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});i.IndentClass=g},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(4),s=a(o);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}function c(h,d){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:h}function u(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);h.prototype=Object.create(d&&d.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(h,d):h.__proto__=d)}var f=function(h){u(d,h);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default);f.blotName="blockquote",f.tagName="blockquote",i.default=f},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function d(g,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,p,m){return p&&d(g.prototype,p),m&&d(g,m),g}}(),s=r(4),a=l(s);function l(d){return d&&d.__esModule?d:{default:d}}function c(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function u(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function f(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var h=function(d){f(g,d);function g(){return c(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),g}(a.default);h.blotName="header",h.tagName=["H1","H2","H3","H4","H5","H6"],i.default=h},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.ListItem=void 0;var o=function(){function b(x,T){for(var S=0;S<T.length;S++){var k=T[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(x,k.key,k)}}return function(x,T,S){return T&&b(x.prototype,T),S&&b(x,S),x}}(),s=function b(x,T,S){x===null&&(x=Function.prototype);var k=Object.getOwnPropertyDescriptor(x,T);if(k===void 0){var P=Object.getPrototypeOf(x);return P===null?void 0:b(P,T,S)}else{if("value"in k)return k.value;var E=k.get;return E===void 0?void 0:E.call(S)}},a=r(0),l=d(a),c=r(4),u=d(c),f=r(25),h=d(f);function d(b){return b&&b.__esModule?b:{default:b}}function g(b,x,T){return x in b?Object.defineProperty(b,x,{value:T,enumerable:!0,configurable:!0,writable:!0}):b[x]=T,b}function p(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function m(b,x){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:b}function y(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(b,x):b.__proto__=x)}var v=function(b){y(x,b);function x(){return p(this,x),m(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,[{key:"format",value:function(S,k){S===_.blotName&&!k?this.replaceWith(l.default.create(this.statics.scope)):s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,S,k)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,k){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,k),this):(this.parent.unwrap(),s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replaceWith",this).call(this,S,k))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:s(x.__proto__||Object.getPrototypeOf(x),"formats",this).call(this,S)}}]),x}(u.default);v.blotName="list-item",v.tagName="LI";var _=function(b){y(x,b),o(x,null,[{key:"create",value:function(S){var k=S==="ordered"?"OL":"UL",P=s(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,k);return(S==="checked"||S==="unchecked")&&P.setAttribute("data-checked",S==="checked"),P}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function x(T){p(this,x);var S=m(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,T)),k=function(E){if(E.target.parentNode===T){var w=S.statics.formats(T),A=l.default.find(E.target);w==="checked"?A.format("list","unchecked"):w==="unchecked"&&A.format("list","checked")}};return T.addEventListener("touchstart",k),T.addEventListener("mousedown",k),S}return o(x,[{key:"format",value:function(S,k){this.children.length>0&&this.children.tail.format(S,k)}},{key:"formats",value:function(){return g({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,k){if(S instanceof v)s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,S,k);else{var P=k==null?this.length():k.offset(this),E=this.split(P);E.parent.insertBefore(S,E)}}},{key:"optimize",value:function(S){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,S);var k=this.next;k!=null&&k.prev===this&&k.statics.blotName===this.statics.blotName&&k.domNode.tagName===this.domNode.tagName&&k.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(k.moveChildren(this),k.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var k=l.default.create(this.statics.defaultChild);S.moveChildren(k),this.appendChild(k)}s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replace",this).call(this,S)}}]),x}(h.default);_.blotName="list",_.scope=l.default.Scope.BLOCK_BLOT,_.tagName=["OL","UL"],_.defaultChild="list-item",_.allowedChildren=[v],i.ListItem=v,i.default=_},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(56),s=a(o);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}function c(h,d){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:h}function u(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);h.prototype=Object.create(d&&d.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(h,d):h.__proto__=d)}var f=function(h){u(d,h);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default);f.blotName="italic",f.tagName=["EM","I"],i.default=f},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(p,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,y){return m&&g(p.prototype,m),y&&g(p,y),p}}(),s=function g(p,m,y){p===null&&(p=Function.prototype);var v=Object.getOwnPropertyDescriptor(p,m);if(v===void 0){var _=Object.getPrototypeOf(p);return _===null?void 0:g(_,m,y)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(y)}},a=r(6),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function u(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function f(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function h(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var d=function(g){h(p,g);function p(){return u(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return o(p,null,[{key:"create",value:function(y){return y==="super"?document.createElement("sup"):y==="sub"?document.createElement("sub"):s(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,y)}},{key:"formats",value:function(y){if(y.tagName==="SUB")return"sub";if(y.tagName==="SUP")return"super"}}]),p}(l.default);d.blotName="script",d.tagName=["SUB","SUP"],i.default=d},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(6),s=a(o);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}function c(h,d){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:h}function u(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);h.prototype=Object.create(d&&d.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(h,d):h.__proto__=d)}var f=function(h){u(d,h);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default);f.blotName="strike",f.tagName="S",i.default=f},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=r(6),s=a(o);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}function c(h,d){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:h}function u(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);h.prototype=Object.create(d&&d.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(h,d):h.__proto__=d)}var f=function(h){u(d,h);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default);f.blotName="underline",f.tagName="U",i.default=f},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function m(y,v){for(var _=0;_<v.length;_++){var b=v[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,v,_){return v&&m(y.prototype,v),_&&m(y,_),y}}(),s=function m(y,v,_){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,v);if(b===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:m(x,v,_)}else{if("value"in b)return b.value;var T=b.get;return T===void 0?void 0:T.call(_)}},a=r(0),l=u(a),c=r(27);function u(m){return m&&m.__esModule?m:{default:m}}function f(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function h(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function d(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var g=["alt","height","width"],p=function(m){d(y,m);function y(){return f(this,y),h(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,[{key:"format",value:function(_,b){g.indexOf(_)>-1?b?this.domNode.setAttribute(_,b):this.domNode.removeAttribute(_):s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,_,b)}}],[{key:"create",value:function(_){var b=s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,_);return typeof _=="string"&&b.setAttribute("src",this.sanitize(_)),b}},{key:"formats",value:function(_){return g.reduce(function(b,x){return _.hasAttribute(x)&&(b[x]=_.getAttribute(x)),b},{})}},{key:"match",value:function(_){return/\.(jpe?g|gif|png)$/.test(_)||/^data:image\/.+;base64/.test(_)}},{key:"sanitize",value:function(_){return(0,c.sanitize)(_,["http","https","data"])?_:"//:0"}},{key:"value",value:function(_){return _.getAttribute("src")}}]),y}(l.default.Embed);p.blotName="image",p.tagName="IMG",i.default=p},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function m(y,v){for(var _=0;_<v.length;_++){var b=v[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,v,_){return v&&m(y.prototype,v),_&&m(y,_),y}}(),s=function m(y,v,_){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,v);if(b===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:m(x,v,_)}else{if("value"in b)return b.value;var T=b.get;return T===void 0?void 0:T.call(_)}},a=r(4),l=r(27),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}function f(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function h(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function d(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var g=["height","width"],p=function(m){d(y,m);function y(){return f(this,y),h(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,[{key:"format",value:function(_,b){g.indexOf(_)>-1?b?this.domNode.setAttribute(_,b):this.domNode.removeAttribute(_):s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,_,b)}}],[{key:"create",value:function(_){var b=s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,_);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(_)),b}},{key:"formats",value:function(_){return g.reduce(function(b,x){return _.hasAttribute(x)&&(b[x]=_.getAttribute(x)),b},{})}},{key:"sanitize",value:function(_){return c.default.sanitize(_)}},{key:"value",value:function(_){return _.getAttribute("src")}}]),y}(a.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",i.default=p},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.FormulaBlot=void 0;var o=function(){function _(b,x){for(var T=0;T<x.length;T++){var S=x[T];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,x,T){return x&&_(b.prototype,x),T&&_(b,T),b}}(),s=function _(b,x,T){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,x);if(S===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:_(k,x,T)}else{if("value"in S)return S.value;var P=S.get;return P===void 0?void 0:P.call(T)}},a=r(35),l=d(a),c=r(5),u=d(c),f=r(9),h=d(f);function d(_){return _&&_.__esModule?_:{default:_}}function g(_,b){if(!(_ instanceof b))throw new TypeError("Cannot call a class as a function")}function p(_,b){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:_}function m(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);_.prototype=Object.create(b&&b.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(_,b):_.__proto__=b)}var y=function(_){m(b,_);function b(){return g(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,null,[{key:"create",value:function(T){var S=s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,T);return typeof T=="string"&&(window.katex.render(T,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",T)),S}},{key:"value",value:function(T){return T.getAttribute("data-value")}}]),b}(l.default);y.blotName="formula",y.className="ql-formula",y.tagName="SPAN";var v=function(_){m(b,_),o(b,null,[{key:"register",value:function(){u.default.register(y,!0)}}]);function b(){g(this,b);var x=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return x}return b}(h.default);i.FormulaBlot=y,i.default=v},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.CodeToken=i.CodeBlock=void 0;var o=function(){function T(S,k){for(var P=0;P<k.length;P++){var E=k[P];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,E.key,E)}}return function(S,k,P){return k&&T(S.prototype,k),P&&T(S,P),S}}(),s=function T(S,k,P){S===null&&(S=Function.prototype);var E=Object.getOwnPropertyDescriptor(S,k);if(E===void 0){var w=Object.getPrototypeOf(S);return w===null?void 0:T(w,k,P)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(P)}},a=r(0),l=p(a),c=r(5),u=p(c),f=r(9),h=p(f),d=r(13),g=p(d);function p(T){return T&&T.__esModule?T:{default:T}}function m(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function y(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function v(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var _=function(T){v(S,T);function S(){return m(this,S),y(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,[{key:"replaceWith",value:function(P){this.domNode.textContent=this.domNode.textContent,this.attach(),s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,P)}},{key:"highlight",value:function(P){var E=this.domNode.textContent;this.cachedText!==E&&((E.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=P(E),this.domNode.normalize(),this.attach()),this.cachedText=E)}}]),S}(g.default);_.className="ql-syntax";var b=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),x=function(T){v(S,T),o(S,null,[{key:"register",value:function(){u.default.register(b,!0),u.default.register(_,!0)}}]);function S(k,P){m(this,S);var E=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,k,P));if(typeof E.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var w=null;return E.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(w),w=setTimeout(function(){E.highlight(),w=null},E.options.interval)}),E.highlight(),E}return o(S,[{key:"highlight",value:function(){var P=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var E=this.quill.getSelection();this.quill.scroll.descendants(_).forEach(function(w){w.highlight(P.options.highlight)}),this.quill.update(u.default.sources.SILENT),E!=null&&this.quill.setSelection(E,u.default.sources.SILENT)}}}]),S}(h.default);x.DEFAULTS={highlight:function(){return window.hljs==null?null:function(T){var S=window.hljs.highlightAuto(T);return S.value}}(),interval:1e3},i.CodeBlock=_,i.CodeToken=b,i.default=x},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,i){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,i){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,i){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,i){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,i){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BubbleTooltip=void 0;var o=function S(k,P,E){k===null&&(k=Function.prototype);var w=Object.getOwnPropertyDescriptor(k,P);if(w===void 0){var A=Object.getPrototypeOf(k);return A===null?void 0:S(A,P,E)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(E)}},s=function(){function S(k,P){for(var E=0;E<P.length;E++){var w=P[E];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(k,w.key,w)}}return function(k,P,E){return P&&S(k.prototype,P),E&&S(k,E),k}}(),a=r(3),l=m(a),c=r(8),u=m(c),f=r(43),h=m(f),d=r(15),g=r(41),p=m(g);function m(S){return S&&S.__esModule?S:{default:S}}function y(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function v(S,k){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:S}function _(S,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);S.prototype=Object.create(k&&k.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(S,k):S.__proto__=k)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],x=function(S){_(k,S);function k(P,E){y(this,k),E.modules.toolbar!=null&&E.modules.toolbar.container==null&&(E.modules.toolbar.container=b);var w=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,P,E));return w.quill.container.classList.add("ql-bubble"),w}return s(k,[{key:"extendToolbar",value:function(E){this.tooltip=new T(this.quill,this.options.bounds),this.tooltip.root.appendChild(E.container),this.buildButtons([].slice.call(E.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(E.container.querySelectorAll("select")),p.default)}}]),k}(h.default);x.DEFAULTS=(0,l.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){k?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var T=function(S){_(k,S);function k(P,E){y(this,k);var w=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,P,E));return w.quill.on(u.default.events.EDITOR_CHANGE,function(A,j,M,N){if(A===u.default.events.SELECTION_CHANGE)if(j!=null&&j.length>0&&N===u.default.sources.USER){w.show(),w.root.style.left="0px",w.root.style.width="",w.root.style.width=w.root.offsetWidth+"px";var q=w.quill.getLines(j.index,j.length);if(q.length===1)w.position(w.quill.getBounds(j));else{var z=q[q.length-1],G=w.quill.getIndex(z),B=Math.min(z.length()-1,j.index+j.length-G),I=w.quill.getBounds(new d.Range(G,B));w.position(I)}}else document.activeElement!==w.textbox&&w.quill.hasFocus()&&w.hide()}),w}return s(k,[{key:"listen",value:function(){var E=this;o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){E.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!E.root.classList.contains("ql-hidden")){var w=E.quill.getSelection();w!=null&&E.position(E.quill.getBounds(w))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(E){var w=o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"position",this).call(this,E),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",w===0)return w;A.style.marginLeft=-1*w-A.offsetWidth/2+"px"}}]),k}(f.BaseTooltip);T.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),i.BubbleTooltip=T,i.default=x},function(e,i,r){e.exports=r(63)}]).default})})(Al);var zg=Al.exports,Hg=ve&&ve.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])},n(t,e)};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ti=ve&&ve.__assign||function(){return Ti=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ti.apply(this,arguments)},Wg=ve&&ve.__spreadArrays||function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),r=0,t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i},qi=ve&&ve.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},ne=qi(J),Ug=qi(ta),dn=qi(vc),qs=qi(zg),Vg=function(n){Hg(t,n);function t(e){var i=n.call(this,e)||this;i.dirtyProps=["modules","formats","bounds","theme","children"],i.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],i.state={generation:0},i.selection=null,i.onEditorChange=function(o,s,a,l){var c,u,f,h;o==="text-change"?(u=(c=i).onEditorChangeText)===null||u===void 0||u.call(c,i.editor.root.innerHTML,s,l,i.unprivilegedEditor):o==="selection-change"&&((h=(f=i).onEditorChangeSelection)===null||h===void 0||h.call(f,s,l,i.unprivilegedEditor))};var r=i.isControlled()?e.value:e.defaultValue;return i.value=r??"",i}return t.prototype.validateProps=function(e){var i;if(ne.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ne.default.Children.count(e.children)){var r=ne.default.Children.only(e.children);if(((i=r)===null||i===void 0?void 0:i.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,i){var r=this,o;if(this.validateProps(e),!this.editor||this.state.generation!==i.generation)return!0;if("value"in e){var s=this.getEditorContents(),a=(o=e.value,o??"");this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),Wg(this.cleanProps,this.dirtyProps).some(function(l){return!dn.default(e[l],r.props[l])})},t.prototype.shouldComponentRegenerate=function(e){var i=this;return this.dirtyProps.some(function(r){return!dn.default(e[r],i.props[r])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,i){var r=this;if(this.editor&&this.shouldComponentRegenerate(e)){var o=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==i.generation){var a=this.regenerationSnapshot,o=a.delta,l=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(o),zs(function(){return r.setEditorSelection(c,l)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,i){var r=new qs.default(e,i);return i.tabIndex!=null&&this.setEditorTabIndex(r,i.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,i){return this.isDelta(e)&&this.isDelta(i)?dn.default(e.ops,i.ops):dn.default(e,i)},t.prototype.setEditorContents=function(e,i){var r=this;this.value=i;var o=this.getEditorSelection();typeof i=="string"?e.setContents(e.clipboard.convert(i)):e.setContents(i),zs(function(){return r.setEditorSelection(e,o)})},t.prototype.setEditorSelection=function(e,i){if(this.selection=i,i){var r=e.getLength();i.index=Math.max(0,Math.min(i.index,r-1)),i.length=Math.max(0,Math.min(i.length,r-1-i.index)),e.setSelection(i)}},t.prototype.setEditorTabIndex=function(e,i){var r,o;!((o=(r=e)===null||r===void 0?void 0:r.scroll)===null||o===void 0)&&o.domNode&&(e.scroll.domNode.tabIndex=i)},t.prototype.setEditorReadOnly=function(e,i){i?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var i=e;return{getHTML:function(){return i.root.innerHTML},getLength:i.getLength.bind(i),getText:i.getText.bind(i),getContents:i.getContents.bind(i),getSelection:i.getSelection.bind(i),getBounds:i.getBounds.bind(i)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=Ug.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,i=this.props,r=i.children,o=i.preserveWhitespace,s=this.state.generation,a={key:s,ref:function(l){e.editingArea=l}};return ne.default.Children.count(r)?ne.default.cloneElement(ne.default.Children.only(r),a):o?ne.default.createElement("pre",Ti({},a)):ne.default.createElement("div",Ti({},a))},t.prototype.render=function(){var e;return ne.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,e??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,i,r,o){var s,a;if(this.editor){var l=this.isDelta(this.value)?o.getContents():o.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=i,this.value=l,(a=(s=this.props).onChange)===null||a===void 0||a.call(s,e,i,r,o))}},t.prototype.onEditorChangeSelection=function(e,i,r){var o,s,a,l,c,u;if(this.editor){var f=this.getEditorSelection(),h=!f&&e,d=f&&!e;dn.default(e,f)||(this.selection=e,(s=(o=this.props).onChangeSelection)===null||s===void 0||s.call(o,e,i,r),h?(l=(a=this.props).onFocus)===null||l===void 0||l.call(a,e,i,r):d&&((u=(c=this.props).onBlur)===null||u===void 0||u.call(c,f,i,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=qs.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(ne.default.Component);function zs(n){Promise.resolve().then(n)}var $g=Vg;const Kg=ac($g);const Yg=({postId:n,onSave:t})=>{var y;const{user:e}=Vt(),{showNotification:i}=Rr(),[r,o]=J.useState({title:"",content:"",category:"strategy",tags:[]}),[s,a]=J.useState(""),[l,c]=J.useState(!1),[u,f]=J.useState(!1);J.useEffect(()=>{n&&h()},[n]);const h=async()=>{try{const _=(await Oe.getDrafts(e.uid)).find(b=>b.id===n);_&&o(_)}catch{i("Error loading draft","error")}},d=async()=>{if(!e){i("You must be logged in to save drafts","error");return}f(!0);try{const v=await Oe.saveDraft({...r,author:e.displayName||"Anonymous",authorId:e.uid});i("Draft saved successfully","success"),t&&t(v)}catch{i("Error saving draft","error")}finally{f(!1)}},g=async()=>{if(!n){i("Please save the draft first","error");return}try{await Oe.publishDraft(n),i("Post submitted for moderation","success")}catch{i("Error publishing draft","error")}},p=()=>{var v;s&&!((v=r.tags)!=null&&v.includes(s))&&(o(_=>({..._,tags:[..._.tags||[],s]})),a("")),c(!1)},m=v=>{o(_=>{var b;return{..._,tags:((b=_.tags)==null?void 0:b.filter(x=>x!==v))||[]}})};return O.jsxs(Dt,{sx:{p:3},children:[O.jsx(et,{variant:"h6",gutterBottom:!0,children:n?"Edit Draft":"New Draft"}),O.jsxs(rt,{component:"form",noValidate:!0,autoComplete:"off",children:[O.jsx(Wt,{fullWidth:!0,label:"Title",value:r.title,onChange:v=>o(_=>({..._,title:v.target.value})),margin:"normal"}),O.jsxs(Gs,{fullWidth:!0,margin:"normal",children:[O.jsx(Xs,{children:"Category"}),O.jsxs(Zs,{value:r.category,label:"Category",onChange:v=>o(_=>({..._,category:v.target.value})),children:[O.jsx(me,{value:"strategy",children:"Strategy"}),O.jsx(me,{value:"collection",children:"Collection"}),O.jsx(me,{value:"trading",children:"Trading"}),O.jsx(me,{value:"news",children:"News"})]})]}),O.jsxs(rt,{sx:{mt:2,mb:2},children:[O.jsx(et,{variant:"subtitle1",gutterBottom:!0,children:"Tags"}),O.jsxs(rt,{display:"flex",flexWrap:"wrap",gap:1,children:[(y=r.tags)==null?void 0:y.map(v=>O.jsx(kn,{label:v,onDelete:()=>m(v)},v)),O.jsx(Ht,{color:"primary",onClick:()=>c(!0),size:"small",children:O.jsx(br,{})})]})]}),O.jsx(rt,{sx:{mt:2,mb:2},children:O.jsx(Kg,{theme:"snow",value:r.content,onChange:v=>o(_=>({..._,content:v})),style:{height:"300px",marginBottom:"50px"}})}),O.jsxs(rt,{sx:{mt:4,display:"flex",gap:2},children:[O.jsx(gt,{variant:"contained",color:"primary",startIcon:O.jsx(Jl,{}),onClick:d,disabled:u,children:"Save Draft"}),n&&O.jsx(gt,{variant:"contained",color:"secondary",startIcon:O.jsx(Ql,{}),onClick:g,children:"Publish"})]})]}),O.jsxs(xr,{open:l,onClose:()=>c(!1),children:[O.jsx(_r,{children:"Add Tag"}),O.jsx(wr,{children:O.jsx(Wt,{autoFocus:!0,margin:"dense",label:"Tag",fullWidth:!0,value:s,onChange:v=>a(v.target.value)})}),O.jsxs(Or,{children:[O.jsx(gt,{onClick:()=>c(!1),children:"Cancel"}),O.jsx(gt,{onClick:p,color:"primary",children:"Add"})]})]})]})},Gg=()=>{const{user:n}=Vt(),{showNotification:t}=Rr(),[e,i]=J.useState(0),[r,o]=J.useState([]),[s,a]=J.useState(null),[l,c]=J.useState(!1),[u,f]=J.useState(!1);J.useEffect(()=>{n&&h()},[n]);const h=async()=>{if(n)try{const y=await Oe.getDrafts(n.uid);o(y)}catch{t("Error loading drafts","error")}},d=()=>{a(null),f(!0)},g=y=>{a(y),f(!0)},p=async y=>{await h(),f(!1),t("Draft saved successfully","success")},m=y=>{a(y),c(!0)};return O.jsxs(Ut,{maxWidth:"lg",sx:{mt:4,mb:4},children:[O.jsxs(dt,{container:!0,spacing:3,children:[O.jsx(dt,{item:!0,xs:12,children:O.jsxs(rt,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[O.jsx(et,{variant:"h4",gutterBottom:!0,children:"Blog Management"}),O.jsx(gt,{variant:"contained",color:"primary",startIcon:O.jsx(br,{}),onClick:d,children:"New Post"})]})}),O.jsx(dt,{item:!0,xs:12,children:O.jsxs(Dt,{sx:{width:"100%"},children:[O.jsxs(Js,{value:e,onChange:(y,v)=>i(v),indicatorColor:"primary",textColor:"primary",children:[O.jsx(bn,{label:"My Drafts"}),O.jsx(bn,{label:"Published Posts"}),(n==null?void 0:n.role)==="moderator"&&O.jsx(bn,{label:"Moderation"})]}),O.jsx(rt,{hidden:e!==0,sx:{p:3},children:O.jsx(dt,{container:!0,spacing:2,children:r.map(y=>O.jsx(dt,{item:!0,xs:12,children:O.jsxs(Dt,{sx:{p:2},children:[O.jsxs(rt,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[O.jsx(et,{variant:"h6",children:y.title}),O.jsxs(rt,{children:[O.jsx(Ht,{onClick:()=>g(y.id),children:O.jsx(tc,{})}),O.jsx(Ht,{onClick:()=>m(y.id),children:O.jsx(ec,{})})]})]}),O.jsxs(et,{color:"textSecondary",variant:"body2",children:["Last modified: ",new Date(y.lastModifiedAt).toLocaleDateString()]})]})},y.id))})}),O.jsx(rt,{hidden:e!==1,sx:{p:3}}),(n==null?void 0:n.role)==="moderator"&&O.jsx(rt,{hidden:e!==2,sx:{p:3},children:O.jsx(_f,{})})]})})]}),O.jsx(so,{anchor:"right",open:u,onClose:()=>f(!1),PaperProps:{sx:{width:"80%"}},children:O.jsx(Yg,{postId:s||void 0,onSave:p})}),O.jsx(so,{anchor:"right",open:l,onClose:()=>c(!1),PaperProps:{sx:{width:"60%"}},children:s&&O.jsx(qg,{postId:s})})]})};Bn.register(Si,Ei,Sn,Ye,vl,xl,ml);const Xg=({card:n})=>{var c;const[t,e]=J.useState(!1),[i,r]=J.useState(!1),o=()=>{e(!t)},s=u=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(u),a={labels:n.historicalPrices.map(u=>new Date(u.date).toLocaleDateString("fr-FR")),datasets:[{label:"Prix",data:n.historicalPrices.map(u=>u.price),fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1}]},l={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Historique des prix"}},scales:{y:{beginAtZero:!0,ticks:{callback:u=>s(u)}}}};return O.jsxs(oe,{sx:{maxWidth:345,m:2,position:"relative"},children:[O.jsxs(rt,{sx:{position:"relative",paddingTop:"139%"},children:[O.jsx(vr,{component:"img",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",transform:t?"rotateY(180deg)":"none",transition:"transform 0.6s",backfaceVisibility:"hidden"},image:t?(c=n.images.back)==null?void 0:c.large:n.images.large,alt:n.name}),O.jsxs(rt,{sx:{position:"absolute",top:8,right:8,zIndex:1,display:"flex",gap:1},children:[O.jsx(Ht,{onClick:o,sx:{bgcolor:"rgba(255, 255, 255, 0.8)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.9)"}},children:O.jsx(nc,{})}),O.jsx(Ht,{onClick:()=>r(!i),sx:{bgcolor:"rgba(255, 255, 255, 0.8)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.9)"}},children:O.jsx(Qs,{})})]})]}),O.jsxs(se,{children:[O.jsx(et,{gutterBottom:!0,variant:"h5",component:"div",children:n.name}),O.jsx(rt,{sx:{mb:1},children:O.jsx(kn,{icon:O.jsx(ic,{}),label:s(n.rarity.estimatedValue),color:"primary"})}),O.jsx(et,{variant:"body2",color:"text.secondary",children:n.rarity.description}),i&&O.jsx(Dt,{sx:{mt:2,p:2},children:O.jsx(El,{data:a,options:l})}),O.jsxs(rt,{sx:{mt:2},children:[O.jsx(et,{variant:"body2",color:"text.secondary",children:"Dernière vente connue :"}),O.jsxs(et,{variant:"body2",children:[s(n.rarity.lastKnownSale.price)," (",new Date(n.rarity.lastKnownSale.date).toLocaleDateString("fr-FR"),")"]}),O.jsxs(et,{variant:"body2",color:"text.secondary",children:["Lieu : ",n.rarity.lastKnownSale.source]}),O.jsxs(et,{variant:"body2",color:"text.secondary",children:["Condition : ",n.rarity.lastKnownSale.condition]})]})]})]})};class Ge{constructor(){this.rareCards=[{id:"pikachu-illustrator",name:"Pikachu Illustrator",frontImage:"https://assets.tcgcollector.com/build/images/cards/pokemon/sm12/243_pikachu_illustrator.jpg",backImage:"https://i.ebayimg.com/images/g/MqwAAOSwYXxgxPNv/s-l1600.jpg",rarity:{rank:1,description:"La carte la plus rare et la plus chère au monde",estimatedValue:54e5},lastKnownSale:{date:"2021-07-02",price:5275e3,currency:"EUR",location:"Japon"},historicalPrices:[{date:"2019-01-01",price:195e3},{date:"2020-01-01",price:233e3},{date:"2021-01-01",price:5275e3}],description:"Créée en 1998 pour un concours d'illustration au Japon. Seuls 39 exemplaires ont été distribués."},{id:"trophy-trainer-no2",name:"Trophy Trainer Card No. 2",frontImage:"https://i.ebayimg.com/images/g/r~QAAOSwQjZXP5eb/s-l1600.jpg",backImage:"https://i.ebayimg.com/images/g/r~QAAOSwQjZXP5eb/s-l1600.back.jpg",rarity:{rank:2,description:"Une des cartes promotionnelles les plus rares",estimatedValue:2e6},lastKnownSale:{date:"2021-08-15",price:19e5,currency:"EUR",location:"États-Unis"},historicalPrices:[{date:"2019-01-01",price:85e3},{date:"2020-01-01",price:15e4},{date:"2021-01-01",price:19e5}],description:"Carte trophée distribuée lors du tournoi Super Secret Battle au Japon en 1999."},{id:"prerelease-raichu",name:"Prerelease Raichu",frontImage:"https://i.ebayimg.com/images/g/YVwAAOSwv9hW4Kq6/s-l1600.jpg",backImage:"https://i.ebayimg.com/images/g/YVwAAOSwv9hW4Kq6/s-l1600.back.jpg",rarity:{rank:3,description:"Une des cartes test les plus rares",estimatedValue:85e4},lastKnownSale:{date:"2020-10-12",price:825e3,currency:"EUR",location:"États-Unis"},historicalPrices:[{date:"2018-01-01",price:25e4},{date:"2019-01-01",price:45e4},{date:"2020-01-01",price:825e3}],description:"Carte test de préproduction. Seulement 10 exemplaires connus."},{id:"pokemon-snap-magikarp",name:"Pokemon Snap Magikarp",frontImage:"https://i.ebayimg.com/images/g/0~sAAOSwQYZWu8oL/s-l1600.jpg",backImage:"https://i.ebayimg.com/images/g/0~sAAOSwQYZWu8oL/s-l1600.back.jpg",rarity:{rank:4,description:"Carte promotionnelle très rare du jeu Pokemon Snap",estimatedValue:75e4},lastKnownSale:{date:"2021-03-20",price:735e3,currency:"EUR",location:"Japon"},historicalPrices:[{date:"2019-01-01",price:2e5},{date:"2020-01-01",price:45e4},{date:"2021-01-01",price:735e3}],description:"Carte promotionnelle du jeu Pokemon Snap N64. Très peu d'exemplaires distribués."},{id:"espeon-gold-star",name:"Espeon Gold Star",frontImage:"https://i.ebayimg.com/images/g/qZ4AAOSwQYZWu8oM/s-l1600.jpg",backImage:"https://i.ebayimg.com/images/g/qZ4AAOSwQYZWu8oM/s-l1600.back.jpg",rarity:{rank:5,description:"Une des cartes Gold Star les plus rares",estimatedValue:7e5},lastKnownSale:{date:"2021-05-15",price:68e4,currency:"EUR",location:"États-Unis"},historicalPrices:[{date:"2019-01-01",price:15e4},{date:"2020-01-01",price:4e5},{date:"2021-01-01",price:68e4}],description:"Version Gold Star d'Espeon. Moins de 100 exemplaires connus."},{id:"master-scroll",name:"Master's Scroll",frontImage:"https://i.ebayimg.com/images/g/ab4AAOSwv9hW4Kq7/s-l1600.jpg",backImage:"https://i.ebayimg.com/images/g/ab4AAOSwv9hW4Kq7/s-l1600.back.jpg",rarity:{rank:6,description:"Carte promotionnelle très rare des tournois",estimatedValue:65e4},lastKnownSale:{date:"2021-06-10",price:63e4,currency:"EUR",location:"Japon"},historicalPrices:[{date:"2019-01-01",price:12e4},{date:"2020-01-01",price:35e4},{date:"2021-01-01",price:63e4}],description:"Carte donnée aux vainqueurs de tournois majeurs au Japon. Très peu d'exemplaires."},{id:"base1-4",name:"Charizard",images:{small:"https://images.pokemontcg.io/base1/4.png",large:"https://images.pokemontcg.io/base1/4_hires.png",back:{small:"https://images.pokemontcg.io/base1/back.png",large:"https://images.pokemontcg.io/base1/back_hires.png"}},cardmarket:{prices:{averageSellPrice:399.99,lowPrice:299.99,trendPrice:449.99}},rarity:{rank:1,description:"1ère édition Dracaufeu Base Set PSA 10",estimatedValue:42e4,lastKnownSale:{date:"2022-03-19",price:42e4,condition:"PSA 10",source:"PWCC Marketplace"}},historicalPrices:[{date:"2022-03-19",price:42e4,condition:"PSA 10",source:"PWCC Marketplace"},{date:"2020-10-10",price:22e4,condition:"PSA 10",source:"Heritage Auctions"}]},{id:"base1-2",name:"Blastoise",images:{small:"https://images.pokemontcg.io/base1/2.png",large:"https://images.pokemontcg.io/base1/2_hires.png",back:{small:"https://images.pokemontcg.io/base1/back.png",large:"https://images.pokemontcg.io/base1/back_hires.png"}},cardmarket:{prices:{averageSellPrice:199.99,lowPrice:149.99,trendPrice:249.99}},rarity:{rank:5,description:"1ère édition Tortank Base Set PSA 10",estimatedValue:45e3,lastKnownSale:{date:"2021-11-15",price:45e3,condition:"PSA 10",source:"eBay"}},historicalPrices:[{date:"2021-11-15",price:45e3,condition:"PSA 10",source:"eBay"},{date:"2020-08-15",price:28e3,condition:"PSA 10",source:"PWCC Marketplace"}]}]}static getInstance(){return Ge.instance||(Ge.instance=new Ge),Ge.instance}getRareCards(){return this.rareCards}getRareCardById(t){return this.rareCards.find(e=>e.id===t)}getTopRareCards(t=5){return this.rareCards.sort((e,i)=>i.rarity.estimatedValue-e.rarity.estimatedValue).slice(0,t)}getCardPriceHistory(t){const e=this.getRareCardById(t);return e?e.historicalPrices:[]}}const Zg=Ge.getInstance(),Jg=()=>{const[n,t]=J.useState([]),[e,i]=J.useState(!0);return J.useEffect(()=>{(async()=>{try{const o=await Zg.getTopRareCards();t(o)}catch(o){console.error("Error loading rare cards:",o)}finally{i(!1)}})()},[]),e?O.jsx(rt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:O.jsx(rn,{})}):O.jsxs(Ut,{maxWidth:"lg",sx:{py:4},children:[O.jsxs(rt,{sx:{mb:4},children:[O.jsx(gt,{component:Ct,to:"/",variant:"outlined",sx:{mb:2},children:"Retour à l'accueil"}),O.jsx(et,{variant:"h4",component:"h1",gutterBottom:!0,children:"Cartes Pokémon les Plus Rares"}),O.jsx(et,{variant:"subtitle1",color:"text.secondary",paragraph:!0,children:"Découvrez les cartes Pokémon les plus rares et les plus chères au monde."})]}),O.jsx(dt,{container:!0,spacing:4,children:n.map(r=>O.jsx(dt,{item:!0,xs:12,children:O.jsx(Xg,{card:r})},r.id||r.name))})]})},Qg=J.createContext(void 0),tm=({children:n})=>{const[t,e]=J.useState([]),[i,r]=J.useState(!0),{user:o}=Vt();J.useEffect(()=>{(async()=>{if(!o){e([]),r(!1);return}try{const f=Nt(bt,"users",o.uid),h=await fi(f);if(h.exists()){const d=h.data();e(d.collection||[])}else await oa(f,{collection:[]}),e([])}catch(f){console.error("Error loading collection:",f)}finally{r(!1)}})()},[o]);const c={collection:t,addToCollection:async u=>{if(o)try{const f=Nt(bt,"users",o.uid),h=[...t,u];await Jt(f,{collection:h}),e(h)}catch(f){throw console.error("Error adding card to collection:",f),f}},removeFromCollection:async u=>{if(o)try{const f=Nt(bt,"users",o.uid),h=t.filter(d=>d.id!==u);await Jt(f,{collection:h}),e(h)}catch(f){throw console.error("Error removing card from collection:",f),f}},isInCollection:u=>t.some(f=>f.id===u),loading:i};return O.jsx(Qg.Provider,{value:c,children:n})},em=J.createContext(void 0),nm=({children:n})=>{const[t,e]=J.useState([]),[i,r]=J.useState(!0),{user:o}=Vt();J.useEffect(()=>{(async()=>{if(!o){e([]),r(!1);return}try{const f=Nt(bt,"users",o.uid),h=await fi(f);if(h.exists()){const d=h.data();e(d.favorites||[])}else await oa(f,{favorites:[]}),e([])}catch(f){console.error("Error loading favorites:",f)}finally{r(!1)}})()},[o]);const c={favorites:t,addToFavorites:async u=>{if(o)try{const f=Nt(bt,"users",o.uid),h=[...t,u];await Jt(f,{favorites:h}),e(h)}catch(f){throw console.error("Error adding card to favorites:",f),f}},removeFromFavorites:async u=>{if(o)try{const f=Nt(bt,"users",o.uid),h=t.filter(d=>d.id!==u);await Jt(f,{favorites:h}),e(h)}catch(f){throw console.error("Error removing card from favorites:",f),f}},isInFavorites:u=>t.some(f=>f.id===u),loading:i};return O.jsx(em.Provider,{value:c,children:n})},im=()=>{const{user:n,error:t}=Vt();return J.useEffect(()=>{console.log("App mounted"),console.log("User state:",n?"Logged in":"Not logged in")},[n]),O.jsxs(rc,{theme:xc,children:[O.jsx(oc,{}),O.jsx(xf,{children:O.jsx(tm,{children:O.jsxs(nm,{children:[O.jsx(lc,{children:O.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[O.jsx(Ac,{}),O.jsx("main",{style:{flex:1,padding:"20px 0"},children:O.jsxs(cc,{children:[O.jsx(fe,{path:"/",element:O.jsx(Tc,{})}),O.jsx(fe,{path:"/marketplace",element:O.jsx(uf,{})}),O.jsx(fe,{path:"/card/:id",element:O.jsx(vf,{})}),O.jsx(fe,{path:"/blog",element:O.jsx(Gg,{})}),O.jsx(fe,{path:"/rare-cards",element:O.jsx(Jg,{})}),O.jsx(fe,{path:"/profile",element:n?O.jsx(hf,{}):O.jsx(qn,{to:"/login",replace:!0})}),O.jsx(fe,{path:"/collection",element:n?O.jsx(bf,{}):O.jsx(qn,{to:"/login",replace:!0})}),O.jsx(fe,{path:"/login",element:n?O.jsx(qn,{to:"/profile",replace:!0}):O.jsx(df,{})}),O.jsx(fe,{path:"/signup",element:n?O.jsx(qn,{to:"/profile",replace:!0}):O.jsx(pf,{})})]})})]})}),t&&O.jsx(Sr,{open:!!t,autoHideDuration:6e3,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:O.jsx(nn,{severity:"error",variant:"filled",children:t})})]})})})]})},rm={apiKey:"AIzaSyDrqUfwjpKjyEwpuZGTCxbvfhKWdHAHAHX",authDomain:"pokemon-tcg-marketplace.firebaseapp.com",projectId:"pokemon-tcg-marketplace",storageBucket:"pokemon-tcg-marketplace.appspot.com",messagingSenderId:"433238130897",appId:"1:433238130897:web:0b3faf40c5d0b71d2985f0"},Zr=ea(rm);na(Zr);const om=Ne(Zr);yc(Zr);const sm=J.createContext({user:null,loading:!0});function am({children:n}){const[t,e]=J.useState(null),[i,r]=J.useState(!0);return J.useEffect(()=>{console.log("Setting up auth listener");const o=om.onAuthStateChanged(s=>{console.log("Auth state changed:",s?"User logged in":"No user"),e(s),r(!1)});return()=>o()},[]),O.jsx(sm.Provider,{value:{user:t,loading:i},children:!i&&n})}const Jr=document.getElementById("root");console.log("Initializing app...");console.log("Root element:",Jr);if(!Jr)throw console.error("Root element not found!"),new Error("Failed to find the root element");const lm=er.createRoot(Jr);console.log("Root created successfully");lm.render(O.jsx(En.StrictMode,{children:O.jsx(am,{children:O.jsx(im,{})})}));console.log("App rendered");
//# sourceMappingURL=index-8fa112dd.js.map
